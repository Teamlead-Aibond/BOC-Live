<!-- 
    /* ===================================================
* @copyright Copyright Â 2020 - 2023 Aibond Corp.
*
* All Rights Reserved.
*
* ========================================================== */
 -->
<div class="sideNavcontainer">
    <app-page-title title="Manage Profile"></app-page-title>
    <div class="row">
        <div class="col-xl-12">
            <form class="form" role="form" (ngSubmit)="onSubmit()" [formGroup]="CustomerEditForm">
                <div class="card-box edit-cust">

                    <div class="row m-2">
                        <div class="col-xl-4 col-md-5 col-sm-6">
                            <p class="m-b-10 text-left"><strong style="color: #232323 !important;">Customer code :
                                </strong><span class="customerbg">{{CustomerCode}}</span></p>
                        </div>

                        <div class="col-xl-4 col-md-5 col-sm-6">
                            <p class="m-b-10 text-left"><strong style="color: #232323 !important;">User Name :
                                </strong><span class="approvebg">{{UserName}}</span></p>
                        </div>

                        <div class="col-xl-4 col-md-2 col-sm-12 sales-right">
                            <div class="btn-group btn-group-sm float-right" role="group">
                                <button ngbTooltip="Save" placement="top" class="btn btn-icon waves-effect">
                                    <i class="mdi mdi-content-save"></i></button>
                                <button ngbTooltip="Back" placement="top" class="btn btn-icon bg-primary waves-effect" routerLink="/admin/customer/list">
                                    <i class="fas fa-arrow-left"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Column 1 -->
                        <div class="col-xl-6">
                            <div class="row">
                                <div class="col-xl-12 form-lbox">
                                    <div class="row">
                                        <div class="col-xl-6 col-md-6 float-left">
                                            <h4 class="form-title-text bluetxt mb-20">Basic Details</h4>
                                        </div>

                                        <div class="col-xl-6 col-md-6 mt-2">
                                            <div class="custom-control custom-switch float-right">
                                                <input type="checkbox" class="custom-control-input" id="Status" name="Status" formControlName="Status">
                                                <label class="custom-control-label" for="Status">Is Active</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-border">
                                        <div class="row">
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">First Name : <span
                                                            class="red">*</span></label>
                                                    <input type="hidden" class="form-control" id="" placeholder="Enter First Name" name="CustomerId" formControlName="CustomerId">
                                                    <input type="text" class="form-control" id="" placeholder="Enter First Name" name="FirstName" formControlName="FirstName">
                                                    <span class="text-danger" *ngIf="(CustomerEditFormControl.FirstName.touched || submitted) && CustomerEditFormControl.FirstName.errors?.required">
                                                        First Name is required
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Last Name : <span class="red">*</span></label>
                                                    <input type="text" class="form-control" id="" placeholder="Enter Last Name" name="LastName" formControlName="LastName">
                                                    <span class="text-danger" *ngIf="(CustomerEditFormControl.LastName.touched || submitted) && CustomerEditFormControl.LastName.errors?.required">
                                                        Last Name is required
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Industry :</label>
                                                    <input type="text" class="form-control" id="firstname" placeholder="Enter Industry" name="CustomerIndustry" formControlName="CustomerIndustry">

                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Country">Country :<span class="red">*</span></label>
                                                    <select class="custom-select" name="CustomerCountryId" formControlName="CustomerCountryId">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let country of countryList"
                                                            value={{country.CountryId}}>
                                                            {{country.CountryName}}
                                                        </option>
                                                    </select>
                                                    <span class="text-danger" *ngIf="(CustomerEditFormControl.CustomerCountryId.touched || submitted) && CustomerEditFormControl.CustomerCountryId.errors?.required">
                                                        CountryId is required
                                                    </span>
                                                </div>
                                            </div>


                                        </div>

                                        <div class="row">
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Customer Type : <span
                                                            class="red">*</span></label>
                                                    <select class="custom-select" name="CustomerTypeId" formControlName="CustomerTypeId">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let Type of CustomerType"
                                                            value={{Type.CustomerTypeId}}>
                                                            {{Type.CustomerType}}
                                                        </option>
                                                    </select>
                                                    <span class="text-danger" *ngIf="(CustomerEditFormControl.CustomerTypeId.touched || submitted) && CustomerEditFormControl.CustomerTypeId.errors?.required">
                                                        Customer Type is required
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Customer Group : <span
                                                            class="red">*</span></label>
                                                    <select class="custom-select" name="GroupId" formControlName="GroupId">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let Group of CustomerGroup"
                                                            value={{Group.GroupId}}>
                                                            {{Group.CustomerGroupName}}
                                                        </option>
                                                    </select>
                                                    <span class="text-danger" *ngIf="(CustomerEditFormControl.GroupId.touched || submitted) && CustomerEditFormControl.GroupId.errors?.required">
                                                        Customer Group is required
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Terms : <span class="red">*</span></label>
                                                    <select class="custom-select" name="TermsId" formControlName="TermsId">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let Term of TermsList" value={{Term.TermsId}}>
                                                            {{Term.TermsName}}
                                                        </option>
                                                    </select>
                                                    <span class="text-danger" *ngIf="(CustomerEditFormControl.TermsId.touched || submitted) && CustomerEditFormControl.TermsId.errors?.required">
                                                        Terms is required
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Tax Type :<span class="red">*</span></label>
                                                    <select class="custom-select" name="TaxTypeId" formControlName="TaxTypeId">
                                                        <option value="" disabled>Select</option>
                                                        <option value="1">Taxable</option>
                                                        <option value="2">Rolling Stack</option>
                                                        <option value="3">Reseller/Non Taxable</option>
                                                    </select>
                                                    <span class="text-danger" *ngIf="(CustomerEditFormControl.TaxTypeId.touched || submitted) && CustomerEditFormControl.TaxTypeId.errors?.required">
                                                        Tax Type is required
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label for="Customer">Email : <span class="red">*</span></label>
                                                    <input type="text" class="form-control" id="firstname" name="Email" formControlName="Email" placeholder="Enter Email">
                                                    <span class="text-danger" *ngIf="(CustomerEditFormControl.Email.touched || submitted) && CustomerEditFormControl.Email.errors?.required">
                                                        Email is required
                                                    </span>
                                                    <span class="text-danger" *ngIf="(CustomerEditFormControl.Email.touched || submitted) && CustomerEditFormControl.Email.errors?.email">

                                                        Enter a valid email address
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Customer Name : <span
                                                            class="red">*</span></label>
                                                    <input type="text" class="form-control" id="" placeholder="Enter Customer Name" name="CompanyName" formControlName="CompanyName">
                                                    <span class="text-danger" *ngIf="(CustomerEditFormControl.CompanyName.touched || submitted) && CustomerEditFormControl.CompanyName.errors?.required">
                                                        Customer Name is required
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Website:
                                                    </label>
                                                    <input type="text" class="form-control" id="Website" placeholder="Enter Website" name="Website" formControlName="Website">

                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-xl-12">
                                                <div class="form-group">
                                                    <label for="Customer">Notes :</label>
                                                    <textarea class="form-control" placeholder="Notes" rows="3" name="Notes" formControlName="Notes"></textarea>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-xl-12">
                                                <div class="form-group">
                                                    <div class="custom-control custom-checkbox">
                                                        <input class="custom-control-input" type="checkbox" id="IsLaborOnInvoice" value=1 name="IsLaborOnInvoice" formControlName="IsLaborOnInvoice">
                                                        <label class="custom-control-label" for="IsLaborOnInvoice">
                                                            Print Labor on Invoice
                                                        </label>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xl-12 form-lbox">
                                    <h4 class="form-title-text bluetxt mb-20">Profile Image</h4>

                                    <div class="form-border">
                                        <div class="row">
                                            <div class="form-group">
                                                <label>Image : </label>
                                                <img class="img-fluid" [src]="ImagePath" *ngIf="showImagePath" width="300">
                                                <br>
                                                <input type="file" class="form-control" (change)="fileProgress($event)" (change)="onFileChange($event)">

                                                <input type="hidden" name="ProfilePhoto" formControlName="ProfilePhoto">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- <div class="row">
                                <div class="col-xl-12 form-lbox">
                                    <h4 class="form-title-text bluetxt mb-20">Customer Reference
                                        <span class="float-right">
                                            <button class="btn btn-primary btn-sm waves-effect raa" type="button"
                                                (click)="addReference()">
                                                <i class="remixicon-add-fill mrg-5"></i> Add Reference
                                            </button>
                                        </span>
                                    </h4>

                                    <div class="table-responsive">
                                        <table class="table table-bordered mb-0">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>Reference Name</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let ref of RefList; let i = index;">
                                                    <td>{{ref.CReferenceName}}</td>
                                                    <td>
                                                        <a (click)="editReference(ref,i)" class="fa fa-edit"
                                                            ngbTooltip="Edit" placement="top"></a>&nbsp;
                                                        <a (click)="deleteReference(ref.CReferenceId,i)"
                                                            class="fa fa-trash text-danger" ngbTooltip="Delete"
                                                            placement="top"></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div> -->


                            <div class="row">
                                <div class="col-xl-12 form-lbox">
                                    <h4 class="form-title-text bluetxt mb-20">Department
                                        <span class="float-right">
                                            <button class="btn btn-primary btn-sm waves-effect raa" type="button"
                                                (click)="addDepartments()">
                                                <i class="remixicon-add-fill mrg-5"></i> Add Department
                                            </button>
                                        </span>
                                    </h4>

                                    <div class="table-responsive">
                                        <table class="table table-bordered mb-0">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>Department Name</th>
                                                    <th>Contact Name</th>
                                                    <th>Contact Phone</th>
                                                    <th>Contact Email</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let depart of DepartmentList; let i = index;">
                                                    <td>{{depart.CustomerDepartmentName}}</td>
                                                    <td>{{depart.DepartmentContactName}}</td>
                                                    <td>{{depart.DepartmentContactPhone}}</td>
                                                    <td>{{depart.DepartmentContactEmail}}</td>
                                                    <td>
                                                        <a (click)="editDepartment(depart,i)" class="fa fa-edit" ngbTooltip="Edit" placement="top"></a>&nbsp;
                                                        <a (click)="deleteDepartment(depart.CustomerDepartmentId,i)" class="fa fa-trash text-danger" ngbTooltip="Delete" placement="top"></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tbody *ngIf="DepartmentList?.length == 0">
                                                <tr>
                                                    <td colspan="5" class="no-data-available">No data!</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Column 2 -->
                        <div class="col-xl-6">

                            <div class="row">
                                <div class="col-xl-12 form-rbox">
                                    <h4 class="form-title-text bluetxt mb-20">Customer Address</h4>
                                    <div class="row">
                                        <div class="col-lg-6 col-xl-6" *ngFor="let Addressdata of AddressList;let i = index;">

                                            <div class="form-border">
                                                <h6 class="text-uppercase text-primary">
                                                    <span class="float-left">Address #{{i+1}}</span>
                                                    <span class="float-right">
                                                        <a (click)="editAddress(Addressdata,i)" class="fa fa-edit"
                                                            ngbTooltip="Edit" placement="top"></a>&nbsp;

                                                        <a (click)="deleteAddress(Addressdata.AddressId,i)"
                                                            id="{{Addressdata.AddressId}}"
                                                            class="fa fa-trash text-danger" ngbTooltip="Delete"
                                                            *ngIf="AddressList.length>1 && Addressdata.IsContactAddress != 1  && Addressdata.IsBillingAddress != 1  && Addressdata.IsShippingAddress != 1"
                                                            placement="top"></a>

                                                    </span>
                                                </h6>
                                                <div class="clearfix"></div>
                                                <p class="text-secondary mt-2 mb-0">
                                                    {{Addressdata.StreetAddress}}, {{Addressdata.SuiteOrApt}} <br> {{Addressdata.City}}, {{Addressdata.StateName}},<br> {{Addressdata.CountryName}} -  {{Addressdata.Zip}}<br>
                                                    <i class="mdi mdi-phone mr-1 text-primary" ngbTooltip="Primary"></i> {{Addressdata.PhoneNoPrimary}}
                                                    <span *ngIf="Addressdata.PhoneNoSecondary"><br><i
                                                            class="mdi mdi-phone mr-1" ngbTooltip="Secondary"></i>
                                                        {{Addressdata.PhoneNoSecondary}}</span>
                                                    <span *ngIf="Addressdata.Fax"><br><i class="mdi mdi-fax mr-1"></i>
                                                        {{Addressdata.Fax}}</span><br>
                                                </p>

                                                <div class="mt-2">
                                                    <div>
                                                        <input id="C{{CustomerId}}{{Addressdata.AddressId}}{{i+1}}" type="radio" value="{{Addressdata.AddressId}}" [checked]="Addressdata.IsContactAddress == 1 ? true : false" name="IsContactAddress" (click)="setDefaultAddress(Addressdata.AddressId, 1)" class="mr-2">
                                                        <label for="IsContactAddress">Default Contact Address</label>
                                                    </div>

                                                    <div>
                                                        <input id="B{{CustomerId}}{{Addressdata.AddressId}}{{i+1}}" type="radio" value="{{Addressdata.AddressId}}" [checked]="Addressdata.IsBillingAddress == 1 ? true : false" name="IsBillingAddress" (click)="setDefaultAddress(Addressdata.AddressId, 3)" class="mr-2">
                                                        <label for="IsBillingAddress">Default Billing Address</label>
                                                    </div>

                                                    <div>
                                                        <input id="S{{CustomerId}}{{Addressdata.AddressId}}{{i+1}}" type="radio" value="{{Addressdata.AddressId}}" [checked]="Addressdata.IsShippingAddress == 1 ? true : false" name="IsShippingAddress" (click)="setDefaultAddress(Addressdata.AddressId, 2)" class="mr-2">
                                                        <label for="IsShippingAddress">Default Shipping Address</label>
                                                    </div>
                                                </div>


                                            </div>
                                            <br>
                                        </div>
                                        <br>
                                    </div>
                                    <br>
                                </div>
                            </div>

                            <div class="row mt-1 mb-2">
                                <div class="custom-control custom-switch float-right">
                                    <button class="btn btn-primary btn-sm waves-effect raa" type="button" (click)="addAddress()">
                                        <i class="remixicon-add-fill mrg-5"></i> Add Address
                                    </button>
                                </div>
                            </div>



                            <div class="row">
                                <div class="col-xl-12 form-rbox">
                                    <h4 class="form-title-text bluetxt mb-20">Asset
                                        <span class="float-right">
                                            <button class="btn btn-primary btn-sm waves-effect raa" type="button"
                                                (click)="addAsset()">
                                                <i class="remixicon-add-fill mrg-5"></i> Add Asset
                                            </button>
                                        </span>
                                    </h4>
                                    <div class="table-responsive">
                                        <table class="table table-bordered mb-0">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>Asset Name</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let Asset of AssetList; let i = index;">
                                                    <td>{{Asset.CustomerAssetName}}</td>
                                                    <td>
                                                        <a (click)="editAsset(Asset,i)" class="fa fa-edit" ngbTooltip="Edit" placement="top"></a>&nbsp;
                                                        <a (click)="deleteAsset(Asset.CustomerAssetId,i)" class="fa fa-trash text-danger" ngbTooltip="Delete" placement="top"></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tbody *ngIf="AssetList?.length == 0">
                                                <tr>
                                                    <td colspan="5" class="no-data-available">No data!</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xl-12 form-rbox">
                                    <h4 class="form-title-text bluetxt mb-20">Attachments
                                        <span class="float-right">
                                            <button class="btn btn-primary btn-sm waves-effect raa" type="button"
                                                (click)="addAttachement()">
                                                <i class="remixicon-add-fill mrg-5"></i> Add Attachment
                                            </button>
                                        </span>
                                    </h4>

                                    <div class="form-border">
                                        <div style="padding-bottom:15px;" class="row">

                                            <div style="margin-bottom:40px;" class="col-sm-3" *ngFor="let vattachment of AttachmentList; let i = index;">
                                                <div class="box h-100 d-flex justify-content-center flex-column brdimg">
                                                    <span *ngIf="vattachment.AttachmentMimeType == 'application/pdf'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="assets/images/attachment/{{attachmentThumb['application/pdf'].thumb}}"
                                                                class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <span *ngIf="vattachment.AttachmentMimeType == 'image/jpeg'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="{{vattachment.Attachment}}" class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <span *ngIf="vattachment.AttachmentMimeType == 'image/png'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="{{vattachment.Attachment}}" class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <span *ngIf="vattachment.AttachmentMimeType == 'application/msword'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="assets/images/attachment/{{attachmentThumb['application/msword'].thumb}}"
                                                                class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <span *ngIf="vattachment.AttachmentMimeType == 'application/vnd.ms-excel'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="assets/images/attachment/{{attachmentThumb['application/vnd.ms-excel'].thumb}}"
                                                                class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <span *ngIf="vattachment.AttachmentMimeType == 'text/csv'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="assets/images/attachment/{{attachmentThumb['text/csv'].thumb}}"
                                                                class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                </div>
                                                <p class="mb-0">
                                                    <code class="text-primary">{{vattachment.AttachmentDesc}}</code>
                                                </p>
                                                <p class="mb-0">
                                                    <code>{{vattachment.Created | date : 'M/d/yy, h:mm a'}}</code> &nbsp;
                                                    <a style="margin-right: 10px;" (click)="editAttachement(vattachment,i)" class="fa fa-edit" ngbTooltip="Edit" placement="top"></a>
                                                    <a (click)="deleteAttachement(vattachment.AttachmentId,i)" class="fa fa-trash text-danger" ngbTooltip="Delete" placement="top"></a>
                                                </p>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xl-6">
                            &nbsp;

                        </div>


                        <div class="col-xl-6 sales-right">
                            <div class="btn-group btn-group-sm srr float-right" role="group">
                                <button ngbTooltip="Save" placement="top" class="btn btn-icon waves-effect">
                                    <i class="mdi mdi-content-save"></i></button>
                                <button type="button" ngbTooltip="Back" placement="top" class="btn btn-icon bg-primary waves-effect" routerLink="/admin/vendor/list">
                                    <i class="fas fa-arrow-left"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>

        </div>
    </div>
</div>