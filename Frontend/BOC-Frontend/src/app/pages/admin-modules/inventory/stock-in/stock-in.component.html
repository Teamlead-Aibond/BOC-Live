<div class="container-fluid">
	<app-page-title
		title="Stock In"
		[breadcrumbItems]="breadCrumbItems"
	></app-page-title>
	<div class="row">
		<div style="margin-top: -52px" class="col-xl-12 text-right">
			<div class="button-list btn-group-sm fl-right mb-10">
				<button
					class="btn btn-primary waves-effect"
					routerLink="/admin/inventory/stockin-list"
				>
					<i class="fas fa-arrow-left"></i> Back
				</button>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-12">
			<div class="card">
				<div class="card-body padstock">
					<div class="card-title">
						<div style="font-size: 15px; position: relative; font-weight: bold">
							<form [formGroup]="SearchForm">
								<div class="row">
									<div class="col-12 col-xl-2">
										<h2 class="stock-loc">StockIn: Location</h2>
									</div>
									<div class="col-12 col-xl-2">
										<label class="control-label">Warehouse</label>
										<select class="custom-select pt30" formControlName="WarehouseId">
											<option value="0" disabled>Select</option>
											<option
												*ngFor="let w of warehouseList"
												[value]="w.id"
												ng-reflect-value="1"
											>
												{{ w.name }}
											</option>
										</select>
									</div>
									<div class="col-12 col-xl-2">
										<label class="control-label">Building</label>
										<select class="custom-select pt30" formControlName="WarehouseSub1Id">
											<option value="0" disabled>Select</option>
											<option
												*ngFor="let w of warehouse1List"
												[value]="w.id"
												ng-reflect-value="1"
											>
												{{ w.name }}
											</option>
										</select>
									</div>

									<div class="col-12 col-xl-2">
										<label class="control-label">Room</label>
										<select class="custom-select pt30" formControlName="WarehouseSub2Id">
											<option value="0" disabled>Select</option>
											<option
												*ngFor="let w of warehouse2List"
												[value]="w.id"
												ng-reflect-value="1"
											>
												{{ w.name }}
											</option>
										</select>
									</div>

									<div class="col-12 col-xl-2">
										<label class="control-label">Row</label>
										<select class="custom-select pt30" formControlName="WarehouseSub3Id">
											<option value="0" disabled>Select</option>
											<option
												*ngFor="let w of warehouse3List"
												[value]="w.id"
												ng-reflect-value="1"
											>
												{{ w.name }}
											</option>
										</select>
									</div>

									<div class="col-12 col-xl-2">
										<label class="control-label">Shelf</label>
										<select class="custom-select pt30" formControlName="WarehouseSub4Id">
											<option value="0" disabled>Select</option>
											<option
												*ngFor="let w of warehouse4List"
												[value]="w.id"
												ng-reflect-value="1"
											>
												{{ w.name }}
											</option>
										</select>
									</div>
								</div>

								<div class="row pt-2 show">
									<div class="col-12 col-xl-2">
										<label class="control-label">Part #</label>
										<input
											type="text"
											class="form-control"
											id="firstname"
											formControlName="PartNo"
											placeholder="Enter Part No"
										/>
									</div>
									<div class="col-12 col-xl-2">
										<label class="control-label">Quantity</label>
										<input
											type="number"
											class="form-control"
											id="quantity"
											formControlName="Quantity"
											placeholder="Quantity"
										/>
									</div>

									<div class="col-12 col-xl-2" style="padding-top: 30px">
										<input
											type="button"
											class="btn btn-primary btn-md mr-1"
											value="Search by Part #"
											(click)="searchByPartNo()"
										/>
									</div>
									<div class="col-12 col-xl-1" style="padding-top: 30px">OR</div>

									<div class="col-12 col-xl-3">
										<label class="control-label">Enter PO #</label>
										<input
											type="text"
											class="form-control"
											formControlName="PONumber"
											placeholder="Enter PO Number"
										/>
									</div>
									<div class="col-12 col-xl-2" style="padding-top: 30px">
										<input
											type="button"
											class="btn btn-primary btn-md mr-1"
											value="Search by PO No."
											(click)="searchByPONumber()"
										/>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-12">
			<div class="card-box pad40">
				<b>Part #</b>: {{ this.ResPartNo }}<br />
				<b>Warehouse</b>: {{ this.WarehouseName }}<br />
				<form [formGroup]="AddForm">
					<div class="row">
						<div class="col-sm-12">
							<!-- Table -->
							<div class="table-responsive">
								<table
									id="datatable-angular-partslist"
									class="table mb-15 hover nowrap"
								>
									<thead class="thead-light">
										<tr>
											<th>#</th>
											<th>Serial No <span class="red">*</span></th>
											<th>Selling Price <span class="red">*</span></th>
											<th>Type <span class="red">*</span></th>
											<th>Qty</th>
											<th>Warehouse <span class="red">*</span></th>
											<th>Building <span class="red">*</span></th>
											<th>Room <span class="red">*</span></th>
											<th>Row <span class="red">*</span></th>
											<th>Shelf <span class="red">*</span></th>
											<th class="text-center" *ngIf="rfidEnabled">RFID</th>
										</tr>
									</thead>
									<tbody>
										<tr
											[formGroup]="item"
											*ngFor="
												let item of AddForm.controls.InventoryStockInList['controls'];
												let i = index;
												let last = last
											"
										>
											<td>{{ i + 1 }}</td>
											<td>
												<input
													type="text"
													class="form-control"
													formControlName="SerialNo"
													required
												/>
												<!-- <span class="text-danger"
                                                *ngIf="(item.controls.InventoryStockInList.touched || submitted) && item.controls.InventoryStockInList.errors?.required">
                                                Type is required
                                            </span> -->
											</td>
											<td>
												<div class="input-group">
													<div class="input-group-prepend">
														<span class="input-group-text" id="basic-addon1">$</span>
													</div>
													<input
														type="text"
														class="form-control"
														formControlName="SellingPrice"
														required
													/>
												</div>
											</td>
											<td>
												<select class="custom-select" formControlName="IsNew" required>
													<option>Select</option>
													<option value="1" ng-reflect-value="1">New</option>
													<option value="0" ng-reflect-value="0">Refurbrished</option>
												</select>
											</td>
											<td>1</td>
											<td>
												<select
													class="custom-select"
													formControlName="WarehouseId"
													required
												>
													<option value="" disabled>Select</option>
													<option
														*ngFor="let w of warehouseList"
														[value]="w.id"
														ng-reflect-value="1"
													>
														{{ w.name }}
													</option>
												</select>
											</td>
											<td>
												<select
													class="custom-select"
													formControlName="WarehouseSub1Id"
													required
												>
													<option value="" disabled>Select</option>
													<option
														*ngFor="let w of warehouse1List"
														[value]="w.id"
														ng-reflect-value="1"
													>
														{{ w.name }}
													</option>
												</select>
											</td>
											<td>
												<select
													class="custom-select"
													formControlName="WarehouseSub2Id"
													required
												>
													<option value="">Select</option>
													<option
														*ngFor="let w of warehouse2List"
														[value]="w.id"
														ng-reflect-value="1"
													>
														{{ w.name }}
													</option>
												</select>
											</td>
											<td>
												<select
													class="custom-select"
													formControlName="WarehouseSub3Id"
													required
												>
													<option value="">Select</option>
													<option
														*ngFor="let w of warehouse3List"
														[value]="w.id"
														ng-reflect-value="1"
													>
														{{ w.name }}
													</option>
												</select>
											</td>
											<td>
												<select
													class="custom-select"
													formControlName="WarehouseSub4Id"
													required
												>
													<option value="">Select</option>
													<option
														*ngFor="let w of warehouse4List"
														[value]="w.id"
														ng-reflect-value="1"
													>
														{{ w.name }}
													</option>
												</select>
											</td>
											<td class="text-center" *ngIf="rfidEnabled">
												<input
													type="text"
													class="form-control"
													formControlName="RFIDTagNo"
												/>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>

					<div class="row p-t-5">
						<div class="col-lg-8 col-xl-8 col-sm-4 float-left">&nbsp;</div>
						<div class="col-lg-4 col-xl-4 col-sm-8 col-12 float-left text-right pt-3">
							<input
								type="button"
								class="btn btn-secondary btn-md mt70"
								[disabled]="!canStock"
								value="Stock In"
								(click)="onStockIn(false)"
							/>&nbsp;
							<input
								type="button"
								class="btn btn-secondary btn-md mt70"
								[disabled]="!canStock"
								value="Stock In and Print"
								(click)="onStockIn(true)"
							/>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
