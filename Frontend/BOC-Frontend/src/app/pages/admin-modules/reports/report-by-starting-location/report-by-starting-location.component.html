<div class="container-fluid" *ngIf="IsViewEnabled">
  <app-page-title title="Repair Request Reports"></app-page-title>

  <ng-sidebar-container style="height: 100vh">
    <ng-sidebar
      [(opened)]="_opened"
      mode="over"
      position="right"
      [showBackdrop]="_showBackdrop"
    >
      <div class="sidebar-heading btn-secondary">
        <a
          href="javascript:void(0);"
          class="right-bar-toggle float-right"
          style="color: white"
          (click)="_toggleSidebar()"
        >
          <i class="fe-x noti-icon"></i>
        </a>
        <h4 class="m-0 text-white">
          <i class="fas fa-filter mr-1"></i>Custom Filter
        </h4>
      </div>

      <ng-container>
        <div class="card-box">
          <div class="row">
            <div class="col-xl-6">
              <label>RR #</label>
              <input
                class="form-control"
                [(ngModel)]="RRNo"
                name="RRNo"
                placeholder="Enter RR #"
              />
            </div>
            <div class="col-xl-6">
              <label>Part #</label>
              <input
                class="form-control"
                [(ngModel)]="PartNo"
                name="Part"
                placeholder="Enter Part #"
              />
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-xl-6">
              <label class="control-label">Starting Location</label>
              <select
                class="custom-select"
                [(ngModel)]="ShippingIdentityType"
                (change)="onLocationChange($event)"
              >
                <option value="">Select</option>
                <option value="1">Customer</option>
                <option value="2">Aibond</option>
              </select>
            </div>

            <div class="col-xl-6" *ngIf="ShippingIdentityType == 1">
              <label>Customer</label>
              <ng-select
                [items]="customers$ | async"
                [typeahead]="customersInput$"
                (change)="onCustomerChange()"
                [loading]="loadingCustomers"
                [multiple]="false"
                [closeOnSelect]="false"
                [searchable]="true"
                [virtualScroll]="true"
                placeholder="Select"
                bindLabel="CustomerCode"
                bindValue="CustomerId"
                [(ngModel)]="CustomerId"
              >
                <!-- <ng-template ng-header-tmp *ngIf="CustomersList.length > 0">
                                    <button (click)="selectAll()" class="btn btn-sm btn-link">Select all</button>
                                </ng-template> -->
                <ng-template
                  ng-multi-label-tmp
                  let-items="items"
                  let-clear="clear"
                >
                  <div
                    class="ng-value"
                    *ngFor="let item of items | slice : 0 : 1"
                  >
                    <span class="ng-value-label">{{ item.CompanyName }}</span>
                    <span
                      class="ng-value-icon right"
                      (click)="clear(item)"
                      aria-hidden="true"
                      >Ã—</span
                    >
                  </div>
                  <div class="ng-value" *ngIf="items.length > 1">
                    <span class="ng-value-label"
                      >+ {{ items.length - 1 }} more...</span
                    >
                  </div>
                </ng-template>
                <ng-template
                  ng-option-tmp
                  let-item="item"
                  let-item$="item$"
                  let-index="index"
                >
                  <input
                    id="item-{{ index }}"
                    type="checkbox"
                    [checked]="item$.selected"
                    [ngModel]="item$.selected"
                  />
                  {{ item.CompanyName }}
                </ng-template>
              </ng-select>
              <!-- <ng-select [items]="customerList"  [multiple]="true" [searchable]="true" [(ngModel)]="CustomerId" [virtualScroll]="true" placeholder="Select" bindLabel="title" bindValue="CustomerId">
                            </ng-select> -->
            </div>
            <div
              class="col-xl-6"
              [ngClass]="ShippingIdentityType == 1 ? 'mt-2' : ''"
            >
              <label for="Customer">Address:</label>
              <ng-select
                [items]="AddressList"
                name="Address"
                placeholder="Select"
                [(ngModel)]="ShippingAddressId"
                bindLabel="title"
                bindValue="AddressId"
                [searchable]="true"
              >
              </ng-select>
            </div>
          </div>

          <div class="row">
            <div class="col-xl-12" style="float: right">
              <input
                type="button"
                class="btn btn-primary btn-md mr-1 searchbt"
                value="Search"
                id="btnFilter"
                (click)="onFilter($event)"
              />
              <input
                type="button"
                class="btn btn-secondary btn-md searchbt"
                value="Clear"
                id="btnClear"
                (click)="onClear($event)"
              />
            </div>
          </div>
        </div>
      </ng-container>
    </ng-sidebar>

    <div ng-sidebar-content>
      <div class="card-box">
        <div class="row">
          <div class="col-xl-12 text-center">
            <img src="assets/images/ah_logo.png " alt=" " height="35" />

            <h4 style="margin-top: 25px" class="heading">
              Report by Starting Location
            </h4>
          </div>
        </div>

        <div class="row">
          <div class="col-12">
            <div class="row">
              <div class="col-xl-12 text-right">
                <div class="button-list btn-group-sm fl-right mb-10">
                  <button
                    class="btn btn-danger waves-effect"
                    routerLink="/admin/reports"
                    ngbTooltip="Back"
                    placement="top"
                  >
                    <i class="fas fa-arrow-left"></i>
                  </button>
                </div>
                <div
                  class="button-list btn-group-sm fl-right mb-10"
                  *ngIf="DownloadExcelCSVinReports"
                >
                  <button
                    ngbTooltip="Excel"
                    placement="top"
                    class="btn btn-secondary waves-effect"
                    title="Excel"
                    type="button"
                    (click)="onExcel()"
                  >
                    <i class="far fa-file-excel"></i>
                  </button>
                  <i
                    class="fa fa-spinner fa-spin spin-loader"
                    *ngIf="spinner"
                  ></i>
                </div>

                <div class="button-list btn-group-sm fl-right mb-10">
                  <button
                    class="btn btn-primary waves-effect"
                    (click)="_toggleSidebar()"
                    ngbTooltip="Custom Filter"
                    placement="top"
                  >
                    <i class="fas fa-filter"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="col-xl-12">
              <div class="row">
                <div class="col-xl-12 nopad-rt">
                  <!-- Table -->
                  <div class="table-responsive">
                    <table
                      id="datatable-angular-ReportByLocation"
                      style="margin-top: 50px !important"
                      datatable
                      [dtOptions]="dtOptions"
                      [dtTrigger]="dtTrigger"
                      class="table datatables dt-responsive hover nowrap"
                    >
                      <thead class="thead-light">
                        <tr>
                          <th width="15%">RR #</th>
                          <th width="15%">Starting Location</th>
                          <th width="15%">Ship From</th>
                          <th width="15%">Ship To</th>
                          <th width="15%">Ship By</th>
                          <th width="15%">Ship Via</th>
                          <th width="15%">Ship Date</th>
                          <th width="15%">Ship Status</th>
                          <th width="15%">Ship Comment</th>
                          <th width="15%">Receive Comment</th>
                          <th width="15%">Receive Date</th>
                          <th width="15%">RR Created Date</th>
                          <th width="15%">Is Picked Up?</th>
                          <th width="15%">Pickedup Date</th>
                          <th width="15%">Pickedup By</th>
                          <!-- <th width="15%">CustomerId</th>
                                                     <th width="15%">VendorId</th> 
                                                     <th width="15%">ShipById</th>
                                                     <th width="15%">ShipViaId</th>
                                                     <th width="15%">ShipFromIdentity</th>
                                                     <th width="15%">ShipToIdentity</th> -->
                        </tr>
                      </thead>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <br />
        <div class="row">
          <div class="col-md-6">
            {{ FooterRight }}
          </div>
          <div class="col-md-6">
            <div class="text-md-right footer-links d-none d-sm-block">
              <a href="javascript:void(0);">{{ FooterLeft }}</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-sidebar-container>
</div>

<div class="account-pages mt-5 mb-5" *ngIf="!IsViewEnabled">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6 col-xl-5">
        <div class="card bg-pattern">
          <div class="card-body p-4">
            <div class="text-center">
              <a routerLink="/">
                <span
                  ><img
                    src="assets/projects/ah-group/full_logo.png"
                    alt=""
                    height="22"
                /></span>
              </a>
            </div>

            <div class="text-center mt-4">
              <h1 class="text-error">401</h1>
              <h3 class="mt-3 mb-2">Access Denied!</h3>
              <p class="text-muted mb-3">
                You don't have permission to access this page.
              </p>

              <a
                routerLink="/admin/dashboard/ah-dashboard"
                class="btn btn-success waves-effect waves-light"
                >Back to Dashboard</a
              >
            </div>
          </div>
          <!-- end card-body -->
        </div>
        <!-- end card -->
      </div>
      <!-- end col -->
    </div>
    <!-- end row -->
  </div>
  <!-- end container -->
</div>
