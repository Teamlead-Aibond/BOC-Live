<!-- 
    /* ===================================================
* @copyright Copyright Â 2020 - 2023 Aibond Corp.
*
* All Rights Reserved.
*
* ========================================================== */
 -->
<div class="container-fluid" *ngIf="IsEditEnabled">
    <app-page-title title="Edit Invoice"></app-page-title>
    <form name="form" #f="ngForm" (ngSubmit)="onSubmit(f)" novalidate>
        <div class="row">
            <div class="col-12">
                <div class="sticky-container">
                    <div id="so-groups" class="right so-groups-sticky hidden-xs" style="top:198px">
                        <button *ngIf="InvoiceInfo.Status!=2 && IsApproveEnabled" (click)="onApprovedInvoice()" type="button"><span>Approve Invoice</span>
                            <i class="fas fa-check-circle"></i></button>
                          
                        <button *ngIf="InvoiceInfo.Status==2 && ReopenInvoice" (click)="onReOpenInvoice()" type="button"><span>ReOpen</span>
                            <i class="fas fa-history"></i></button>
                            <button *ngIf="InvoiceInfo.Status!=3 && IsCancelInvoiceEnabled" (click)="onCancelInvoice()" type="button"><span>Cancel Invoice</span>
                                <i class="far fa-window-close"></i></button>
                        <button [disabled]="btnDisabled" *ngIf="InvoiceInfo.Status!=2" [ngClass]="{'class': (btnDisabled)? 'gray': 'btn-group btn-group-sm float-right'}"><span>Save</span>
                            <i class="mdi mdi-content-save "></i></button>

                        <button type="button" (click)="InvoiceEmail()"><span>Email</span>
                            <i class="mdi mdi-email-outline"></i></button>
                        <!-- <button  type="button">
                            <span> <a [routerLink]="['/admin/invoice/list']"
                                    [queryParams]="{InvoiceId: this.InvoiceInfo.InvoiceId}" target="_blank"
                                    class="btn btn-icon waves-effect">
                                    View</a></span><i class="fa fa-eye"></i></button> -->
                        <!-- <button type="button" class="bg-danger"><span
                                class="bg-danger"><a [routerLink]="['/admin/invoice/list']"
                                [queryParams]="{InvoiceId: this.InvoiceInfo.InvoiceId}" 
                                class="btn btn-icon waves-effect">
                                Back</a></span>
                            <i class="fas fa-arrow-left"></i></button> -->
                            <button type="button" class="bg-danger" (click)="BackToView()"><span
                                class="bg-danger">Back</span>
                            <i class="fas fa-arrow-left"></i></button> 

                    </div>
                </div>
            </div>
        </div>
        <div class="row">

            <div class="col-12">
                <div class="card-box">
                    <!-- Logo & title -->
                    <div class="clearfix">
                        <div class="row">
                            <div class="col-xl-6 float-left">
                                <img src="assets/images/ah_logo.png" alt="" height="30">
                                <br>
                                <h4 class="page-title bluetxt mb-20">Invoice #{{InvoiceInfo.InvoiceNo}}</h4>
                            </div>
                            <div class="col-xl-6 sales-right">
                                <!-- <div class="btn-group btn-group-sm float-right" role="group">

                                    <button ngbTooltip="Approve Invoice"
                                        *ngIf="InvoiceInfo.Status!=2 && IsApproveEnabled" placement="top"
                                        class="btn btn-icon waves-effect" title="Approve Invoice"
                                        (click)="onApprovedInvoice()" type="button">
                                        <i class="fas fa-check-circle"></i></button>
                                    <button ngbTooltip="Save Invoice" placement="top" class="btn btn-icon waves-effect"
                                        title="Save">
                                        <i class="mdi mdi-content-save "></i></button>
                                  
                                    <button ngbTooltip="Email" placement="top" class="btn btn-icon waves-effect"
                                        title="Email" type="button">
                                        <i class="mdi mdi-email-outline"></i></button>
                                    <button ngbTooltip="Back" type="button" placement="top"
                                        class="btn btn-icon bg-danger waves-effect" title="Back"
                                        routerLink="/admin/invoice/list">
                                        <i class="fas fa-arrow-left"></i></button>
                                </div> -->
                            </div>
                        </div>
                    </div>
                    <div style="height: 1px;" class="clear">&nbsp;</div>
                    <h4 class="page-title bluetxt mb-20">Invoice Details

                    </h4>
                    <tr *ngIf="RRId !=0" class="mt-2">
                        <th scope="row">
                            <label style="font-size: 1.5rem !important;"><strong>Repair Request # : </strong></label>
                        </th>
                        <td>
                            <p style="font-size: 1.5rem !important;"> <span><a [routerLink]="['/admin/repair-request/edit']"
                                        [queryParams]="{RRId: this.InvoiceInfo.RRId}" target="_blank"
                                        routerLink="#">{{InvoiceInfo.RRNo}}</a></span></p>
                        </td>
                    </tr>
                    <tr >
                        <th>
                            <p style="font-size: 1.5rem !important;"><strong>Customer PO # : </strong></p>
                        </th>
                        <td>
                            <p class="row">
                            <span style="color: #333;padding:0;" *ngIf="InvoiceInfo.CustomerBlanketPOId==0"  class="ml-2"
                            >{{InvoiceInfo.CustomerPONo || "-"}}
                           </span>
                           <a   *ngIf="InvoiceInfo.CustomerBlanketPOId!=0"   style="padding: 0;font-size: 1.5rem !important;" [routerLink]="['/admin/Blanket-PO-History']" [queryParams]="{CustomerBlanketPOId: this.InvoiceInfo.CustomerBlanketPOId}" target="_blank"
                           ngbTooltip="Blanket PO"
                           placement="top">
                           <i style="float:left;font-size: 1.5rem !important;margin-top: 2px!important;" class="remixicon-wallet-3-fill mr-1 ml-3 blanketpo-icon"></i>{{InvoiceInfo.CustomerPONo || "-"}}</a>
                           <i style="margin-top: 0px !important;margin-left: 5px;float:left;cursor: pointer;font-size: 1.5rem !important;" class="remixicon-pencil-line mr-1" ngbTooltip="Edit Customer PO"  *ngIf="InvoiceInfo.MROId==0"
                           placement="top" (click)="onUpdateCustomerPONo()" ></i>
                           </p>
                        </td>
                    </tr>

                    <div class="row">

                        <div class="col-md-6">

                            <div class="row">
                                <div class="col-xl-6">
                                    <div class="form-group">
                                        <label>Customer:<span class="red">*</span></label>

                                        <ng-select [items]="customerList" [searchable]="true" name="CustomerId" (change)="getCustomerProperties(model.CustomerId)" [(ngModel)]="model.CustomerId" placeholder="Select" bindLabel="title" bindValue="CustomerId" #CustomerId="ngModel" [ngClass]="{ 'is-invalid': f.submitted && CustomerId.invalid }"
                                            required>
                                        </ng-select>
                                        <div *ngIf="f.submitted &&CustomerId.invalid" class="invalid-feedback">
                                            <div *ngIf="CustomerId.errors.required">Customer is required</div>
                                        </div>

                                    </div>
                                </div>
                                <div class="col-xl-6">
                                    <div class="form-group">
                                        <label>Invoice Type:<span class="red">*</span></label>
                                        <select class="custom-select" [(ngModel)]="model.InvoiceType" #InvoiceType="ngModel" [ngClass]="{ 'is-invalid': f.submitted && InvoiceType.invalid }" required name="InvoiceType">
                                            <option value="undefined" disabled>Select</option>
                                            <option value="0">Regular</option>
                                            <option value="2">Repair</option>
                                            <option value="3">Doorship</option>
                                        </select>
                                        <div *ngIf="f.submitted &&InvoiceType.invalid" class="invalid-feedback">
                                            <div *ngIf="InvoiceType.errors.required">Type is required</div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="row">

                                <div class="col-xl-6">
                                    <div class="form-group" *ngIf="InvoiceInfo.Status!=2">
                                        <label>Status:<span class="red">*</span></label>
                                        <select class="custom-select" #InvoiceStatus="ngModel" [ngClass]="{ 'is-invalid': f.submitted && InvoiceStatus.invalid }" required [(ngModel)]="model.InvoiceStatus" name="InvoiceStatus" class="form-control">
                                            <option value="undefined" disabled>Select</option>
                                            <option *ngFor="let Cust_invoice_status of Customer_Invoice_Status_edit"
                                                value="{{Cust_invoice_status.Cust_Invoice_StatusId}}">
                                                {{Cust_invoice_status.Cust_Invoice_StatusName}}</option>
                                        </select>
                                        <div *ngIf="f.submitted &&InvoiceStatus.invalid" class="invalid-feedback">
                                            <div *ngIf="InvoiceStatus.errors.required">Status is required</div>
                                        </div>
                                    </div>
                                    <div class="form-group" *ngIf="InvoiceInfo.Status==2">
                                        <label>Status:</label> {{InvoiceInfo.StatusName}}
                                    </div>
                                </div>

                                <div class="col-xl-6">
                                    <div class="form-group">
                                        <label>Terms:<span class="red">*</span></label>

                                        <select class="form-control" [(ngModel)]="model.TermsId" name="TermsId" #TermsId="ngModel" [ngClass]="{ 'is-invalid': f.submitted && TermsId.invalid }" required>
                                            <option value="undefined" disabled>Select</option>
                                            <option *ngFor="let item of TermsList" value="{{item.TermsId}}">
                                                {{item.TermsName}}</option>

                                        </select>
                                        <div *ngIf="f.submitted &&TermsId.invalid" class="invalid-feedback">
                                            <div *ngIf="TermsId.errors.required">Terms is required</div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xl-12">
                                    <div class="form-group">
                                        <label>Notes:</label>

                                        <textarea class="form-control" row="5" [(ngModel)]="model.Notes" name="Notes" style="height: 120px;"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 float-right">
                            <div>
                                <div class="row">
                                    <div class="col-xl-6">
                                        <div class="form-group">
                                            <label>Bill Address:<span class="red">*</span></label>
                                            <ng-select [items]="BillAddress" name="AddressId" #bi_BillCodeId="ngModel" [ngClass]="{ 'is-invalid': f.submitted && bi_BillCodeId.invalid }" required name="bi_BillCodeId" [(ngModel)]="model.bi_BillCodeId" placeholder="Select" bindLabel="title" bindValue="AddressId">
                                            </ng-select>
                                            <div *ngIf="f.submitted &&bi_BillCodeId.invalid" class="invalid-feedback">
                                                <div *ngIf="bi_BillCodeId.errors.required">Billing Address is required
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-xl-6">
                                        <div class="form-group">
                                            <label>Ship Address:<span class="red">*</span></label>
                                            <ng-select [items]="ShipAddress" name="AddressId" #sh_ShipCodeId="ngModel" [ngClass]="{ 'is-invalid': f.submitted && sh_ShipCodeId.invalid }" required name="sh_ShipCodeId" [(ngModel)]="model.sh_ShipCodeId" placeholder="Select" bindLabel="title" bindValue="AddressId">
                                            </ng-select>
                                            <div *ngIf="f.submitted &&sh_ShipCodeId.invalid" class="invalid-feedback">
                                                <div *ngIf="sh_ShipCodeId.errors.required">Shipping Address is required
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xl-6">
                                        <div class="form-group">
                                            <label>Invoice Date:<span class="red">*</span></label>
                                            <div class="input-group clockpicker">
                                                <input ngbDatepicker class="form-control" name="InvoiceDate" #InvoiceDate="ngModel" [ngClass]="{ 'is-invalid': f.submitted && InvoiceDate.invalid }" required [(ngModel)]="model.InvoiceDate" autoClose="false" placeholder="MM/DD/YYYY" #Invoice_Date="ngbDatepicker">
                                                <div class="input-group-append" (click)="Invoice_Date.toggle()">
                                                    <span class="input-group-text"><i
                                                            class="mdi mdi-calendar"></i></span>
                                                </div>
                                                <div *ngIf="f.submitted &&InvoiceDate.invalid" class="invalid-feedback">
                                                    <div *ngIf="InvoiceDate.errors.required">Invoice Date is required
                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                    <div class="col-xl-6">
                                        <div class="form-group">
                                            <label>Due Date:<span class="red">*</span></label>

                                            <div class="input-group clockpicker">
                                                <input ngbDatepicker class="form-control" [(ngModel)]="model.DueDate" [ngModelOptions]="{standalone: true}" #DueDate="ngModel" name="DueDate" [ngClass]="{ 'is-invalid': f.submitted && DueDate.invalid }" required autoClose="false" placeholder="MM/DD/YYYY"
                                                    #Due_Date1="ngbDatepicker">
                                                <div class="input-group-append" (click)="Due_Date1.toggle()">
                                                    <span class="input-group-text"><i
                                                            class="mdi mdi-calendar"></i></span>
                                                </div>
                                                <div *ngIf="f.submitted &&DueDate.invalid" class="invalid-feedback">
                                                    <div *ngIf="DueDate.errors.required">Due Date is required
                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                    </div>

                                </div>


                                <div class="row">

                                    <div class="col-xl-6">

                                        <div class="form-group">
                                            <label>Sales Order #:</label>
                                            <a [routerLink]="['/admin/orders/sales-list']" [queryParams]="{SOId: this.InvoiceInfo.SOId}" target="_blank">
                                                {{InvoiceInfo.SONo ||
                                                '-'}}</a>
                                            <!-- <input class="form-control" [(ngModel)]="model.SONo" name="SONo"> -->
                                        </div>

                                    </div>
                                    <div class="col-xl-6">

                                        <div class="form-group">
                                            <label>Reference #:</label>
                                            <input class="form-control" [(ngModel)]="model.ReferenceNo" name="ReferenceNo">
                                        </div>

                                    </div>
                                    <!-- <div class="col-xl-3">

                                        <div class="form-group">
                                            <label>Customer PO #:</label>
                                            <input class="form-control" [(ngModel)]="model.CustomerPONo" name="CustomerPONo">
                                        </div>

                                    </div> -->

                                </div>


                                <div class="row" *ngIf="ShippingHistory.ShipToIdentityName =='Customer'">
                                    <div class="col-xl-6" *ngIf="ShippingHistory.ShipFromId != CONST_AH_Group_ID">

                                        <div class="form-group">
                                            <label>Shipping Status:</label> Shipped by Vendor
                                        </div>

                                    </div>
                                    <div class="col-xl-6" *ngIf="ShippingHistory.ShipFromId == CONST_AH_Group_ID">

                                        <div class="form-group">
                                            <label>Shipping Status:</label> Shipped by Aibond
                                        </div>

                                    </div>
                                    <div class="col-xl-6">
                                        <div class="form-group">
                                            <label>Shipping Tracking # :</label>

                                            <span>{{ShippingHistory.TrackingNo}}</span>


                                        </div>
                                    </div>


                                </div>
                                <div class="row" *ngIf="ShippingHistory.ShipToIdentityName =='Customer'">
                                    <div class="col-xl-6">
                                        <div class="form-group">
                                            <label>Shipping Via:</label>

                                            <span>{{ShippingHistory.ShipViaName}}</span>


                                        </div>
                                    </div>


                                </div>
                                <div class="row" *ngIf="InvoiceInfo.Status==2">
                                    <div class="col-xl-6">
                                        <div class="form-group">
                                            <label>Approved By:</label>

                                            <span class="approvebg">{{InvoiceInfo.ApprovedByName}}</span>


                                        </div>
                                    </div>
                                    <div class="col-xl-6">

                                        <div class="form-group">
                                            <label>Approved Date:</label> {{InvoiceInfo.ApprovedDate|dateTransform}}
                                        </div>

                                    </div>

                                </div>
                                <div class="row" *ngIf="InvoiceInfo.Status==7">
                                    <div class="col-xl-6">
                                        <div class="form-group">
                                            <label>ReOpened By:</label>

                                            <span class="approvebg">{{InvoiceInfo.ReOpenedByName}}</span>


                                        </div>
                                    </div>
                                    <div class="col-xl-6">

                                        <div class="form-group">
                                            <label>ReOpened Date:</label> {{InvoiceInfo.ReOpenedDate|dateTransform}}
                                        </div>

                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="col-md-12">

                        <div class="row">
                            <div class="col-xl-12">
                                <div class="form-group">
                                    <h4 class="page-title bluetxt mb-20">Customer Reference Number</h4>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="table-responsive">
                                <table class="table-bordered table nowrap">
                                    <tbody>
                                        <tr>
                                            <th>CR #</th>
                                            <th>Reference Name</th>
                                            <th>Value</th>
                                            <th>Action</th>
                                        </tr>
                                        <tr *ngFor="let item of InvoiceCustomerRef ; let i = index;let last=last;">
                                            <td>{{i+1}}</td>
                                            <td>{{item.ReferenceLabelName}}</td>
                                            <td>{{item.ReferenceValue}}</td>
                                            <td>
                                                <a (click)="deleteReference(i)" class="fa fa-trash text-danger" ngbTooltip="Delete" placement="top"></a>
                                            </td>
                                        </tr>
                                        <tr *ngIf="InvoiceCustomerRef?.length == 0">
                                            <td colspan="5" class="no-data-available">No data!</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>


                        </div>
                        <div class="row mt-1 -46px; float-right" style="margin-left: -46px;">
                            <div class="custom-control custom-switch ">
                                <button class="btn btn-pink btn-sm waves-effect raa" type="button" *ngIf="this.model.CustomerId != '' && this.model.CustomerId != null && this.model.CustomerId != 0 && InvoiceCustomerRef.length < 6" (click)="addReferenceType()">
                                    <i class="remixicon-add-fill mrg-5"></i> Add Reference Type
                                </button>
                            </div>
                            <div class="custom-control custom-switch ">
                                <button class="btn btn-primary btn-sm waves-effect" type="button" (click)="addReference()">
                                    <i class="remixicon-add-fill mrg-5"></i> Add
                                </button>
                            </div>
                        </div>

                    </div>
                    <div class="clear">&nbsp;</div>
                    <h4 class="page-title bluetxt mb-20" *ngIf="showlineItem">Item Details
                        <button (click)="AddItem()"  *ngIf="InvoiceInfo.MROId==0" type="button" class="btn btn-add waves-effect">
                            <i class="remixicon-add-fill mt-3"></i> Add
                        </button>
                        <button (click)="onResetInvoiceItem()" style="float:right!important"  *ngIf="InvoiceInfo.MROId!=0 && showReset" type="button" class="btn btn-danger waves-effect">
                            Price mismatch with SO. Click here to update
                        </button>
                    </h4>

                    <div class="table-responsive mt-15" *ngIf="showlineItem">
                        <table class="table table-bordered table-striped mb-0 eict">
                            <thead class="thead-light">
                                <tr>
                                    <th>Part #<span class="red">*</span></th>
                                    <th>Description</th>
                                    <th>Quantity<span class="red">*</span></th>
                                    <th>Unit Price<span class="red">*</span></th>
                                    <th>{{VAT_field_Name}}</th>
                                    <th *ngIf="InvoiceInfo.MROId != 0">{{Shipping_field_Name}}</th>
                                    <th style="font-size:17px !important;font-weight: 600;">Price<span class="red">*</span></th>
                                    <th *ngIf="IsDisplayBaseCurrencyValue==1">Price({{BaseCurrencySymbol}})<span class="red">*</span></th>
                                    <th>Warranty Period<span class="red">*</span></th>
                                    <th>Action</th>

                                </tr>
                            </thead>
                            <tbody *ngFor="let item of PartItem; let i = index;">
                                <tr>
                                    <td style="width: 20%;" class="ng-autocomplete">

                                        <ng-autocomplete [data]="filteredData" [isLoading]="isLoading" [searchKeyword]="keyword" (selected)='selectEvent($event,i)' [(ngModel)]="PartItem[i].Part" (inputChanged)='onChangeSearch($event,i)' placeholder="Enter Part #"  [disabled]="disbleLineItem"
                                            (inputFocused)='onFocused($event,i)' [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundTemplate" debounceTime="1000" #Part="ngModel" name="Part[{{i}}]" [ngClass]="{ 'is-invalid': f.submitted && Part.invalid }"
                                            required>
                                        </ng-autocomplete>

                                        <ng-template #itemTemplate let-item>
                                            <a [innerHTML]="item.PartNo"></a>
                                        </ng-template>

                                        <ng-template #notFoundTemplate let-notFound>
                                            <div [innerHTML]="notFound"></div>
                                        </ng-template>
                                        <input type="hidden" name="PartId[{{i}}]" [(ngModel)]="PartItem[i].PartId">

                                        <input type="hidden" name="PartNo[{{i}}]" [(ngModel)]="PartItem[i].PartNo">
                                        <br>


                                        <div *ngIf="f.submitted &&Part.invalid" class="invalid-feedback">
                                            <div *ngIf="Part.errors.required">Part is required</div>
                                        </div>
                                    </td>
                                    <td style="width: 15%;">
                                        <textarea class="form-control" placeholder="Description..."   [disabled]="disbleLineItem" name="PartDescription[{{i}}]" [(ngModel)]="item.PartDescription" rows="3"></textarea>

                                    </td>
                                  
                                    <td style="width: 5%;">
                                        <input type="text" min="1" class="form-control" name="Quantity[{{i}}]" digitOnly (keyup)="calculatePrice(i)" [(ngModel)]="item.Quantity" #Quantity="ngModel" [ngClass]="{ 'is-invalid': f.submitted && Quantity.invalid }" required [disabled]="disbleLineItem">
                                        <div *ngIf="f.submitted &&Quantity.invalid" class="invalid-feedback">
                                            <div *ngIf="Quantity.errors.required">Quantity is required</div>
                                        </div>
                                        <p *ngIf="InvoiceInfo.MROId!=0">SO : {{item.SOQuantity}}</p>
                                    </td>
                                    <td style="width: 12%;">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">{{PartItem[i].ItemLocalCurrencySymbol}}</span>
                                            </div>
                                            <input id="Rate" type="text" name="Rate[{{i}}]"  [(ngModel)]="item.Rate" class="form-control" inputmode="numeric" pattern="^\d+(\.\d{1,2})?$" placeholder="0.00" digitOnly #Rate="ngModel" [ngClass]="{ 'is-invalid': f.submitted && Rate.invalid }" [disabled]="disbleLineItem"
                                                required decimal="true" (keyup)="calculatePrice(i)" />
                                            <div *ngIf="f.submitted &&Rate.invalid" class="invalid-feedback">
                                                <div *ngIf="Rate.errors.required">Unit Price is required</div>
                                            </div>
                                         
                                        </div>
                                        <p *ngIf="InvoiceInfo.MROId!=0">SO : {{item.SOLocalCurrencySymbol}} {{item.SORate}}</p>
                                    </td>
                                    <td style="width: 10%;">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">%</span>
                                            </div>
                                        <input type="text" min="1" class="form-control" 
                                             [(ngModel)]="PartItem[i].ItemTaxPercent" #ItemTaxPercent="ngModel" [disabled]="disbleLineItem"
                                            name="ItemTaxPercent[{{i}}]"  inputmode="numeric" pattern="^\d+(\.\d{1,2})?$" placeholder="0.00" digitOnly
                                            decimal="true"
                                             (keyup)="calculatePrice(i)">
                                        </div>
                                        &nbsp;
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">{{PartItem[i].ItemLocalCurrencySymbol}}</span>
                                            </div>
                                            <input type="hidden" class="form-control"  readonly
                                                #Tax="ngModel"  name="Tax[{{i}}]"  [disabled]="disbleLineItem"
                                                 [(ngModel)]="PartItem[i].Tax">
                                                 <input type="text" class="form-control"  readonly
                                                #TaxWithQuantity="ngModel"  name="TaxWithQuantity[{{i}}]"  [disabled]="disbleLineItem"
                                                 [(ngModel)]="PartItem[i].TaxWithQuantity">
                                           
                                        </div>

                                       <p *ngIf="InvoiceInfo.MROId!=0">SO : {{item.SOItemTaxPercent}}%-  {{item.SOLocalCurrencySymbol}} {{item.SOTax}}</p>

                                    </td>
                                    <td style="width: 8%;" *ngIf="InvoiceInfo.MROId != 0">
                                               
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">{{PartItem[i].ItemLocalCurrencySymbol}}</span>
                                            </div>
                                            <input type="text" class="form-control"  (keyup)="calculatePrice(i)" 
                                                #ShippingCharge="ngModel"  name="ShippingCharge[{{i}}]" 
                                                inputmode="numeric" pattern="^\d+(\.\d{1,2})?$" placeholder="0.00" digitOnly
                                                decimal="true"
                                                [disabled]="disbleLineItem"
                                                 [(ngModel)]="PartItem[i].ShippingCharge">
                                           
                                        </div>
                                        <p *ngIf="InvoiceInfo.MROId!=0">SO : {{item.SOLocalCurrencySymbol}} {{item.SOShippingCharge}}</p>
                                    </td>
                                    <td style="width: 10%;">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">{{PartItem[i].ItemLocalCurrencySymbol}}</span>
                                            </div>
                                            <input type="text" class="form-control" name="Price[{{i}}]" [disabled]="disbleLineItem" readonly #Price="ngModel"  [ngClass]="{ 'is-invalid': f.submitted && Price.invalid }" required [(ngModel)]="item.Price">
                                            <div *ngIf="f.submitted &&Price.invalid" class="invalid-feedback">
                                                <div *ngIf="Price.errors.required">Price is required</div>
                                            </div>
                                        </div>
                                        <p *ngIf="InvoiceInfo.MROId!=0">SO :  {{item.SOLocalCurrencySymbol}} {{item.SOPrice}}</p>

                                    </td>
                                    <td style="width: 10%;" *ngIf="IsDisplayBaseCurrencyValue==1">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">{{BaseCurrencySymbol}}</span>
                                            </div>
                                            <input type="text" class="form-control"  readonly
                                                #BasePrice="ngModel"  name="BasePrice[{{i}}]" 
                                                [disabled]="disbleLineItem"
                                                [ngClass]="{ 'is-invalid': f.submitted && BasePrice.invalid }"
                                                required [(ngModel)]="PartItem[i].BasePrice">
                                            <div *ngIf="f.submitted &&BasePrice.invalid" class="invalid-feedback">
                                                <div *ngIf="BasePrice.errors.required">Price({{BaseCurrencySymbol}}) is required</div>
                                            </div>
                                        </div>
                                        <p *ngIf="InvoiceInfo.MROId!=0">SO : {{BaseCurrencySymbol}} {{item.SOBasePrice}}</p>
                                    </td>
                                    <td style="width: 12%;">
                                        <select class="custom-select" name="WarrantyPeriod[{{i}}]"  [disabled]="disbleLineItem" #WarrantyPeriod="ngModel"  [ngClass]="{ 'is-invalid': f.submitted && WarrantyPeriod.invalid }" required [(ngModel)]="item.WarrantyPeriod">
                                            <option value="undefined">Select</option>
                                            <option *ngFor="let warranty of warrantyList"
                                                value="{{warranty.WarrantyPeriodId}}">
                                                {{warranty.WarrantyPeriodValue}}
                                            </option>
                                        </select>
                                        <div *ngIf="f.submitted &&WarrantyPeriod.invalid" class="invalid-feedback">
                                            <div *ngIf="WarrantyPeriod.errors.required">Warranty Period is required
                                            </div>
                                        </div>
                                    </td>
                                    <td style="width: 2%;">
                                        <a (click)="removePartItem(i,item.InvoiceItemId)" *ngIf="i != 0" class="text-danger" style="cursor: pointer;"> <i class="remixicon-delete-bin-line delete-btn-ico"></i></a>
                                        <!-- &nbsp;&nbsp;
                                        <a ngbTooltip="Move this Part to Excluded Part List" *ngIf="RRId ==0" style="cursor: pointer;" (click)="onMovetoExcludedParts(i,item.InvoiceItemId,item)"> <i
                                        class="remixicon-arrow-down-fill arrow-btn-ico"></i></a>  -->
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                        <br>

                    </div>
                    <h4 class="page-title bluetxt mb-20"><span *ngIf="showExcludedPartItem && ExcludedPartItem.length>0">Excluded Part Details</span>
                        <button *ngIf="showlineItem && InvoiceInfo.MROId==0" (click)="AddExcludedPartItem()" type="button" class="btn btn-add waves-effect">
                            <i class="remixicon-add-fill mt-3"></i> Add Excluded Part
                        </button>
                    </h4>
                    <div class="table-responsive" *ngIf="showExcludedPartItem && ExcludedPartItem.length>0">
                        <table class="table table-bordered idt mb-0">
                            <thead class="thead-light">
                                <tr>
                                    <th>Part #<span class="red">*</span></th>
                                    <th>Description</th>
                                    <th>Quantity<span class="red">*</span></th>
                                    <th>Unit Price<span class="red">*</span></th>
                                    <th>{{VAT_field_Name}}</th>
                                    <th>Price<span class="red">*</span></th>
                                    <th *ngIf="IsDisplayBaseCurrencyValue==1">Price({{BaseCurrencySymbol}})<span class="red">*</span></th>
                                    <th>Warranty Period<span class="red">*</span></th>
                                    <th>Action</th>

                                </tr>
                            </thead>
                            <tbody *ngFor="let item of ExcludedPartItem; let j = index;">
                                <tr>
                                    <td style="width: 20%;" class="ng-autocomplete">

                                        <ng-autocomplete [data]="filteredData" [isLoading]="isLoading"
                                            [searchKeyword]="keyword" (selected)='selectExcludedPartItemEvent($event,j)'
                                            [(ngModel)]="ExcludedPartItem[j].Part"
                                            (inputChanged)='onChangeSearch($event,j)' placeholder="Enter Part #"
                                            (inputFocused)='onFocused($event,j)' [itemTemplate]="itemTemplate"
                                            [notFoundTemplate]="notFoundTemplate" debounceTime="1000"
                                            #Part="ngModel" name="ExcludedPartItem[{{j}}].Part"
                                            [ngClass]="{ 'is-invalid': f.submitted && Part.invalid }" required>
                                        </ng-autocomplete>

                                        <ng-template #itemTemplate let-item>
                                            <a [innerHTML]="item.PartNo"></a>
                                        </ng-template>

                                        <ng-template #notFoundTemplate let-notFound>
                                            <div [innerHTML]="notFound"></div>
                                        </ng-template>
                                        <input type="hidden" name="ExcludedPartItem[{{j}}].PartNo" [(ngModel)]="ExcludedPartItem[j].PartId">

                                        <input type="hidden" name="ExcludedPartItem[{{j}}].PartNo" [(ngModel)]="ExcludedPartItem[j].PartNo">
                                        <br>


                                        <div *ngIf="f.submitted &&Part.invalid" class="invalid-feedback">
                                            <div *ngIf="Part.errors.required">Part is required</div>
                                        </div>
                                    </td>
                                    <td style="width: 15%;">
                                        <textarea class="form-control" placeholder="Description..."
                                            name="ExcludedPartItem[{{j}}].PartDescription" 
                                            [(ngModel)]="ExcludedPartItem[j].PartDescription" rows="3"></textarea>

                                    </td>
                                   
                                    <td style="width: 5%;">
                                        <input type="text" min="1" class="form-control" name="ExcludedPartItem[{{j}}].Quantity"
                                            [(ngModel)]="ExcludedPartItem[j].Quantity" #Quantity="ngModel" 
                                            [ngClass]="{ 'is-invalid': f.submitted && Quantity.invalid }"
                                            required digitOnly (keyup)="ExcludedPartcalculatePrice(j)">

                                        <div *ngIf="f.submitted &&Quantity.invalid" class="invalid-feedback">
                                            <div *ngIf="Quantity.errors.required">Quantity is required</div>
                                        </div>
                                    </td>
                                    <td style="width: 12%;">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">{{ExcludedPartItem[j].ItemLocalCurrencySymbol}}</span>
                                            </div>
                                            <input id="Rate" type="text" name="ExcludedPartItem[{{j}}].Rate" 
                                                [(ngModel)]="ExcludedPartItem[j].Rate" class="form-control"
                                                inputmode="numeric" pattern="^\d+(\.\d{1,2})?$"
                                                placeholder="0.00" digitOnly #Rate="ngModel"
                                                [ngClass]="{ 'is-invalid': f.submitted && Rate.invalid }"
                                                required decimal="true" (keyup)="ExcludedPartcalculatePrice(j)" />
                                            <div *ngIf="f.submitted &&Rate.invalid" class="invalid-feedback">
                                                <div *ngIf="Rate.errors.required">Unit Price is required</div>
                                            </div>

                                        </div>

                                    </td>
                                    <td style="width: 10%;">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">%</span>
                                            </div>
                                        <input type="text" min="1" class="form-control" 
                                            digitOnly [(ngModel)]="ExcludedPartItem[j].ItemTaxPercent" #ItemTaxPercent="ngModel"  inputmode="numeric" pattern="^\d+(\.\d{1,2})?$" placeholder="0.00" digitOnly
                                            decimal="true"
                                            name="ExcludedPartItem[{{j}}].ItemTaxPercent" 
                                             (keyup)="ExcludedPartcalculatePrice(j)">
                                        </div>
                                        &nbsp;
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">{{ExcludedPartItem[j].ItemLocalCurrencySymbol}}</span>
                                            </div>
                                            <input type="hidden" class="form-control"  readonly
                                                #Tax="ngModel"  name="ExcludedPartItem[{{j}}].Tax" [(ngModel)]="ExcludedPartItem[j].Tax">
                                            <input type="text" class="form-control"  readonly
                                                #TaxWithQuantity="ngModel"  name="ExcludedPartItem[{{j}}].TaxWithQuantity" [(ngModel)]="ExcludedPartItem[j].TaxWithQuantity">
                                           
                                        </div>
                                    </td>
                                    <td style="width: 10%;">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">{{ExcludedPartItem[j].ItemLocalCurrencySymbol}}</span>
                                            </div>
                                            <input type="text" class="form-control" readonly name="ExcludedPartItem[{{j}}].Price"
                                                 #Price="ngModel"
                                                [ngClass]="{ 'is-invalid': f.submitted && Price.invalid }" 
                                                required [(ngModel)]="ExcludedPartItem[j].Price">
                                            <div *ngIf="f.submitted &&Price.invalid" class="invalid-feedback">
                                                <div *ngIf="Price.errors.required">Price is required</div>
                                            </div>
                                        </div>

                                    </td>
                                    <td style="width: 10%;" *ngIf="IsDisplayBaseCurrencyValue==1">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">{{BaseCurrencySymbol}}</span>
                                            </div>
                                            <input type="text" class="form-control"  readonly
                                                #BasePrice="ngModel"  name="ExcludedPartItem[{{j}}].BasePrice" 
                                               
                                                [ngClass]="{ 'is-invalid': f.submitted && BasePrice.invalid }"
                                                required [(ngModel)]="ExcludedPartItem[j].BasePrice">
                                            <div *ngIf="f.submitted &&BasePrice.invalid" class="invalid-feedback">
                                                <div *ngIf="BasePrice.errors.required">Price({{BaseCurrencySymbol}}) is required</div>
                                            </div>
                                        </div>

                                    </td>
                                    <td style="width: 12%;">
                                        <select class="custom-select" name="ExcludedPartItem[{{j}}].WarrantyPeriod" 
                                            #WarrantyPeriod="ngModel"
                                            [ngClass]="{ 'is-invalid': f.submitted && WarrantyPeriod.invalid }"
                                            required [(ngModel)]="ExcludedPartItem[j].WarrantyPeriod">
                                            <option value="undefined">Select</option>
                                            <option *ngFor="let warranty of warrantyList"
                                                value="{{warranty.WarrantyPeriodId}}">
                                                {{warranty.WarrantyPeriodValue}}
                                            </option>
                                        </select>
                                        <div *ngIf="f.submitted &&WarrantyPeriod.invalid"
                                            class="invalid-feedback">
                                            <div *ngIf="WarrantyPeriod.errors.required">Warranty Period is
                                                required
                                            </div>
                                        </div>
                                    </td>
                                    <td style="width: 2%;">
                                        <!-- <a (click)="removeExcludedPartItem(j,item.InvoiceItemId)" *ngIf="j != 0" class="text-danger" style="cursor: pointer;"><i class="remixicon-delete-bin-line delete-btn-ico"></i></a> -->
                                        <a (click)="removeExcludedPartItem(j,item.InvoiceItemId)" class="text-danger" style="cursor: pointer;"><i class="remixicon-delete-bin-line delete-btn-ico"></i></a>
                                        <!-- &nbsp;&nbsp;
                                        <a ngbTooltip="Move this Part to Item Details" *ngIf="RRId ==0"  style="cursor: pointer;" (click)="onMovetoParts(j,item.InvoiceItemId,item)"><i class="remixicon-arrow-up-fill arrow-btn-ico"></i></a>  -->
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                        <br>


                    </div>
                    <div class="clear">&nbsp;</div>
                    <div class="row" *ngIf="showlineItem">
                        <!-- end col -->
                        <div class="col-xl-12">
                            <div class="col-xl-5 float-left">&nbsp;</div>
                            <div class="col-xl-7 float-left">
                                <div class="float-right">

                                    <div class="table-responsive">
                                        <table class="table table-borderless bill mb-0">
                                            <tbody>
                                                <!-- <tr>
                                                    <th width="40%" scope="row">
                                                        <p><b>Sub Total:</b></p>
                                                    </th>
                                                    <td width="60%">
                                                        <div class="input-group">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">$</span>
                                                            </div>
                                                            <input type="text" class="form-control" name="SubTotal" [(ngModel)]="SubTotal" readonly>
                                                        </div>
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <th scope="row">
                                                        <p><b>Total Tax:</b></p>
                                                    </th>
                                                    <td>
                                                        <div class="row">
                                                            <div class="col-xl-6 eil">
                                                                <div class="input-group">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">$</span>
                                                                    </div>
                                                                    <input type="text" inputmode="numeric" pattern="^\d+(\.\d{1,2})?$" placeholder="0.00" digitOnly decimal="true" class="form-control" name="TotalTax" readonly [(ngModel)]="TotalTax">
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6 eir">
                                                                <div class="input-group">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">%</span>
                                                                    </div>
                                                                    <input type="text" inputmode="numeric" pattern="^\d+(\.\d{1,2})?$" placeholder="0.00" digitOnly decimal="true" class="form-control" (keyup)="calculateTax()" name="TaxPercent" [(ngModel)]="TaxPercent" readonly>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </td>
                                                </tr>

                                                <tr>
                                                    <th scope="row">
                                                        <p><b>Discount :</b></p>
                                                    </th>
                                                    <td>
                                                        <div class="input-group">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">$</span>
                                                            </div>
                                                            <input type="text" digitOnly class="form-control" name="Discount" (keyup)="calculateTotal()" [(ngModel)]="Discount" readonly>
                                                        </div>
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <th scope="row">
                                                        <p><b>Shipping :</b></p>
                                                    </th>
                                                    <td>
                                                        <div class="input-group">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">$</span>
                                                            </div>
                                                            <input type="text" digitOnly class="form-control" name="Shipping" readonly (keyup)="calculateTotal()" [(ngModel)]="Shipping">
                                                        </div>
                                                    </td>
                                                </tr>


                                                <tr>
                                                    <th scope="row">
                                                        <p><b>AH Processing Fee :</b></p>
                                                    </th>
                                                    <td>
                                                        <div class="input-group">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">$</span>
                                                            </div>
                                                            <input type="text" digitOnly class="form-control" name="AHFees" readonly (keyup)="calculateTotal()" [(ngModel)]="AHFees">
                                                        </div>
                                                    </td>
                                                </tr> -->
                                                <tr  *ngIf="BlanketPOExcludeAmount>0"> 
                                                    <th  width="80%" scope="row">
                                                        <p><b>Blanket PO Exclude Amount :</b></p>
                                                    </th>
                                                    <td>
                                                        <p>{{Symbol}} {{BlanketPOExcludeAmount}}</p>
                                                    </td>
                                                </tr>
                                                <tr *ngIf="BlanketPOExcludeAmount>0">
                                                    <th  width="80%" scope="row">
                                                        <p><b>Blanket PO Chargeable Amount :</b></p>
                                                    </th>
                                                    <td >
                                                        <p>{{Symbol}}{{BlanketPONetAmount}} </p>
                                                    </td>
                                                </tr>
                                                <tr  *ngIf="IsDisplayBaseCurrencyValue==1" >
                                                    <th  width="80%" scope="row">
                                                        <p><b>Grand Total ({{BaseCurrencySymbol}}) :</b></p>
                                                    </th>
                                                    <td> 
                                                        <p>{{BaseCurrencySymbol}} {{GrandTotalUSD}} </p>
                                                        
                                                    </td>
                                                </tr>
                                               <tr>
                                                    <th  width="80%" scope="row">
                                                        <span class="grandouter2"><b>Grand Total :</b></span>
                                                    </th>
                                                    <td >

                                                        <p *ngIf="(GrandTotal)>=(VendorPOCost)"><span class="gdc2">{{Symbol}} {{GrandTotal}}</span>
                                                        </p>
                                                        <span *ngIf="(GrandTotal)<(VendorPOCost)" class="badge badge-danger grandouterdanger gdc">{{Symbol}}
                                                            {{GrandTotal}}
                                                        </span>
                                                        <input type="hidden" class="form-control" name="GrandTotal" [(ngModel)]="GrandTotal">
                                                    </td>

                                                </tr>

                                                <tr>
                                                    <th  width="80%" scope="row">
                                                        <span class="grandouter2"><b>COGS :</b></span>
                                                    </th>
                                                    <td>
                                                        <span style="margin-top: 6px; float: left;" class="grandouterdanger gdc">{{CurrencySymbolNormal}}
                                                            {{VendorPOCost1}}</span>

                                                    </td>
                                                </tr>
                                                <tr *ngIf="InvoiceInfo.CustomerCurrencyCode!=InvoiceInfo.vendorCurrencyCode">
                                                    <th  width="80%" scope="row">
                                                        <span class="grandouter2"><b>COGS ({{CurrencySymbol1}}) :</b></span>
                                                    </th>
                                                    <td>
                                                        <span style="margin-top: 6px; float: left;" class="grandouterdanger gdc">{{CurrencySymbol1}}
                                                            {{VendorPOCost}}</span>

                                                    </td>
                                                </tr>
                                               
                                              
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                        </div>

                    </div>

                    <div class="clear">&nbsp;</div>
                    <h4 class="page-title bluetxt mb-10">Notes
                        <button (click)="addNotes()" type="button" *ngIf="IsNotesAddEnabled" class="btn btn-add waves-effect">
                            <i class="remixicon-add-fill mt-3"></i> Add
                        </button>
                    </h4>
                    <div class="table-responsive mt-15" *ngIf="IsNotesEnabled">
                        <table class="table table-bordered table-striped mb-0">
                            <thead class="thead-light">
                                <tr>
                                    <th>Notes</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody *ngFor="let note of InvoiceNotes;let i=index">
                                <tr>
                                    <td class="linebreak">{{note.Notes}}</td>
                                    <td>
                                        <a (click)="editNotes(note,i)" *ngIf="IsNotesEditEnabled" class="fa fa-edit" ngbTooltip="Edit" placement="top"></a>&nbsp;
                                        <a (click)="deleteNotes(note.NotesId,i)" *ngIf="IsNotesDeleteEnabled" class="fa fa-trash text-danger" ngbTooltip="Delete" placement="top"></a>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody *ngIf="InvoiceNotes?.length == 0">
                                <tr>
                                    <td colspan="5" class="no-data-available">No data!</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>


                    <div class="clear">&nbsp;</div>


                    <h4 class="page-title bluetxt mb-10">Attachments <button type="button" *ngIf="IsAttachmentAddEnabled" (click)="addAttachment()" class="btn btn-add waves-effect"><i
                                class="remixicon-add-fill mt-3"></i>
                            Add</button></h4>
                    <div class="table-responsive mt-15" *ngIf="IsAttachmentEnabled">
                        <table class="table table-bordered table-striped mb-0">
                            <thead class="thead-light">
                                <tr>
                                    <th>Type</th>
                                    <th class="linebreak">Description</th>
                                    <th>Attachment</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody *ngFor="let attachment of AttachmentList;let i=index">
                                <tr>
                                    <td>{{attachment.AttachmentTypeName}}</td>
                                    <td>{{attachment.AttachmentDesc}}</td>
                                    <td><a href="{{attachment.Attachment}}" target="_blank">{{attachment.AttachmentOriginalFile}}</a></td>
                                    <td>
                                        <a (click)="editAttachment(attachment,i)" *ngIf="IsAttachmentEditEnabled" class="fa fa-edit" ngbTooltip="Edit" placement="top"></a>&nbsp;
                                        <a (click)="deleteAttachment(attachment.AttachmentId,i)" *ngIf="IsAttachmentDeleteEnabled" class="fa fa-trash text-danger" ngbTooltip="Delete" placement="top"></a>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody *ngIf="AttachmentList?.length == 0">
                                <tr>
                                    <td colspan="5" class="no-data-available">No data!</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- end card-box -->
            </div>

            <!-- end col -->
        </div>
    </form>
    <!-- end row -->
</div>

<ng-template #AttachmentContent let-modal="close">
    <div class="modal-header">
        <h4>Add Attachment</h4>
        <button type="button" class="close" (click)="modal('Cross click')" aria-hidden="true">Ã</button>
    </div>
    <div class="modal-body p-4">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="field-2" class="control-label">Type</label>
                    <select class="custom-select">
                        <option selected="selected" value="0">Select</option>
                        <option value="1">Drawing</option>
                        <option value="2">Manual</option>
                        <option value="3">From</option>
                        <option value="3">Other</option>
                    </select>
                </div>

            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="field-2" class="control-label">Web Page</label>
                    <input class="form-control">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="form-group no-margin">
                    <label for="field-7" class="control-label">Description</label>
                    <textarea class="form-control" id="field-7" placeholder=""></textarea>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="form-group no-margin">
                    <label for="field-7" class="control-label">Attachments</label>
                    <input type="file" class="form-control">
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary waves-effect" (click)="modal('Cross click')">Close</button>
        <button type="button" class="btn btn-success waves-effect waves-light">Save</button>
    </div>
</ng-template>


<ng-template #ItemEditContent let-modal="close">
    <div class="modal-header">
        <h4 class="modal-title">Edit Item</h4>
        <button type="button" class="close" (click)="modal('Cross click')" aria-hidden="true">Ã</button>
    </div>
    <div class="modal-body p-4">
        <div class="row">
            <div class="col-md-6">
                <div class="mt-3 customer-detail">

                    <label class="font">Part No : <span>Freight </span></label>
                    <br>
                    <label class="font">UOM : <span>&nbsp;EA</span></label>
                </div>
            </div>
            <div class="col-md-6">
                <div class="mt-3 customer-detail">
                    <label class="font">Tax : <span>Regular </span></label>
                    <label class="font">Net Amount : <span>SO018661</span></label>

                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="field-2" class="control-label">Unit Price</label>
                    <input class="form-control">
                </div>

            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="field-2" class="control-label">Quantity</label>
                    <input class="form-control">
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="form-group no-margin">
                    <label for="field-7" class="control-label">Discount</label>
                    <input class="form-control">
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary waves-effect" (click)="modal('Cross click')">Close</button>
        <button type="button" class="btn btn-success waves-effect waves-light">Save</button>
    </div>
</ng-template>