<!-- 
    /* ===================================================
* @copyright Copyright Â 2020 - 2023 Aibond Corp.
*
* All Rights Reserved.
*
* ========================================================== */
 -->
<div class="container-fluid">
    <app-page-title title="Edit Customer"></app-page-title>
    <div class="row">
        <div class="col-xl-12">
            <form class="form" role="form" (ngSubmit)="onSubmit()" [formGroup]="CustomerEditForm">
                <div class="card-box edit-cust">

                    <div class="row m-2">
                        <div class="col-xl-4 col-md-4">
                            <p class="m-b-10 text-left"><strong style="color: #232323 !important;">Customer code :
                                </strong><span class="customerbg">{{CustomerCode}}</span></p>
                        </div>

                        <div class="col-xl-4 col-md-4">
                            <p class="m-b-10 text-left"><strong style="color: #232323 !important;">User Name :
                                </strong><span class="approvebg">{{UserName}}</span></p>
                        </div>

                        <div class="col-xl-4 col-md-4 sales-right">
                            <div class="btn-group btn-group-sm float-right" role="group">
                                <button ngbTooltip="Save" placement="top" class="btn btn-icon waves-effect"
                                    [disabled]="btnDisabled"
                                    [ngClass]="{'class': (btnDisabled)? 'gray': 'btn-group btn-group-sm float-right'}">
                                    <i class="mdi mdi-content-save"></i></button>
                                <button routerLink="/admin/customer/view" ngbTooltip="View" placement="top"
                                    class="btn btn-icon waves-effect">
                                    <i class="fa fa-eye"></i></button>
                                <button ngbTooltip="Back" placement="top" class="btn btn-icon bg-primary waves-effect"
                                    routerLink="/admin/customer/list">
                                    <i class="fas fa-arrow-left"></i></button>

                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Column 1 -->
                        <div class="col-xl-6 col-lg-6">
                            <div class="row">
                                <div class="col-xl-12 form-lbox">
                                    <div class="row">
                                        <div class="col-xl-6 float-left">
                                            <h4 class="form-title-text bluetxt mb-20">Basic Details</h4>
                                        </div>

                                        <div class="col-xl-6 mt-2">
                                            <div class="custom-control custom-switch float-right">
                                                <input type="checkbox" class="custom-control-input" id="Status"
                                                    name="Status" formControlName="Status">
                                                <label class="custom-control-label" for="Status">Is Active</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-border">
                                        <div class="row">
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label for="Customer">Customer Name : <span
                                                            class="red">*</span></label>
                                                    <input type="text" class="form-control" id=""
                                                        placeholder="Enter Customer Name" name="CompanyName"
                                                        formControlName="CompanyName"
                                                        (change)="onCustomerChange($event)">
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.CompanyName.touched || submitted) && CustomerEditFormControl.CompanyName.errors?.required">
                                                        Customer Name is required
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label for="Customer">Contact Name : <span
                                                            class="red">*</span></label>
                                                    <input type="hidden" class="form-control" id=""
                                                        placeholder="Enter Contact Name" name="CustomerId"
                                                        formControlName="CustomerId">
                                                    <input type="text" class="form-control" id=""
                                                        placeholder="Enter Contact Name" name="FirstName"
                                                        formControlName="FirstName">
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.FirstName.touched || submitted) && CustomerEditFormControl.FirstName.errors?.required">
                                                        Contact Name is required
                                                    </span>
                                                </div>
                                            </div>





                                        </div>
                                        <div class="row">
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label for="Customer">Customer ID : <span
                                                            class="red">*</span></label>
                                                    <input type="text" class="form-control"
                                                        placeholder="Enter Customer ID" name="CustomerCode" [readonly]="!IsEditCustomerIdEnabled"
                                                        formControlName="CustomerCode">
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.CustomerCode.touched || submitted) && CustomerEditFormControl.CustomerCode.errors?.required">
                                                        Customer ID is required
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Country">Country :<span class="red">*</span></label>
                                                    <select class="custom-select" name="CustomerCountryId"
                                                        formControlName="CustomerCountryId">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let country of countryList"
                                                            value={{country.CountryId}}>
                                                            {{country.CountryName}}
                                                        </option>
                                                    </select>
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.CustomerCountryId.touched || submitted) && CustomerEditFormControl.CustomerCountryId.errors?.required">
                                                        Country is required
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="CustomerGroupId">Customer Group:</label>
                                                    <select class="custom-select" name="CustomerGroupId"
                                                        formControlName="CustomerGroupId">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let item of customerGroupList"
                                                            value={{item.CustomerGroupId}}>
                                                            {{item.CustomerGroupName}}
                                                        </option>
                                                    </select>
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.CustomerGroupId.touched || submitted) && CustomerEditFormControl.CustomerGroupId.errors?.required">
                                                        Customer Group is required
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Customer Type : <span
                                                            class="red">*</span></label>
                                                    <select class="custom-select" name="CustomerTypeId"
                                                        formControlName="CustomerTypeId">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let Type of CustomerType"
                                                            value={{Type.CustomerTypeId}}>
                                                            {{Type.CustomerType}}
                                                        </option>
                                                    </select>
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.CustomerTypeId.touched || submitted) && CustomerEditFormControl.CustomerTypeId.errors?.required">
                                                        Customer Type is required
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Group : <span
                                                            class="red">*</span></label>
                                                    <select class="custom-select" name="GroupId"
                                                        formControlName="GroupId">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let Group of CustomerGroup"
                                                            value={{Group.GroupId}}>
                                                            {{Group.CustomerGroupName}}
                                                        </option>
                                                    </select>
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.GroupId.touched || submitted) && CustomerEditFormControl.GroupId.errors?.required">
                                                        Customer Group is required
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Terms : <span class="red">*</span></label>
                                                    <select class="custom-select" name="TermsId"
                                                        formControlName="TermsId">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let Term of Terms" value={{Term.TermsId}}>
                                                            {{Term.TermsName}}
                                                        </option>
                                                    </select>
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.TermsId.touched || submitted) && CustomerEditFormControl.TermsId.errors?.required">
                                                        Terms is required
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Tax Type :<span class="red">*</span></label>
                                                    <select class="custom-select" name="TaxTypeId"
                                                        formControlName="TaxTypeId">
                                                        <option value="" disabled>Select</option>
                                                        <option value="1">Taxable</option>
                                                        <option value="2">Rolling Stack</option>
                                                        <option value="3">Reseller/Non Taxable</option>
                                                    </select>
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.TaxTypeId.touched || submitted) && CustomerEditFormControl.TaxTypeId.errors?.required">
                                                        Tax Type is required
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label for="Customer">Email : <span class="red">*</span></label>
                                                    <input type="text" class="form-control" id="firstname" name="Email"
                                                        formControlName="Email" placeholder="Enter Email">
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.Email.touched || submitted) && CustomerEditFormControl.Email.errors?.required">
                                                        Email is required
                                                    </span>
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.Email.touched || submitted) && CustomerEditFormControl.Email.errors?.email">

                                                        Enter a valid email address
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Industry :</label>
                                                    <input type="text" class="form-control" id="firstname"
                                                        placeholder="Enter Industry" name="CustomerIndustry"
                                                        formControlName="CustomerIndustry">

                                                </div>
                                            </div>
                                            <div class="col-xl-3">
                                                <div class="form-group">
                                                    <label for="Customer">Website:
                                                    </label>
                                                    <input type="text" class="form-control" id="Website"
                                                        placeholder="Enter Website" name="Website"
                                                        formControlName="Website">

                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label for="Customer">Blanket PO Lower Limit (%):
                                                        <span class="red">*</span>
                                                    </label>
                                                    <input type="text" class="form-control"
                                                        placeholder="Enter Blanket PO Lower Limit %"
                                                        name="BlanketPOLowerLimitPercent"
                                                        formControlName="BlanketPOLowerLimitPercent">
                                                    <span class="text-danger"
                                                        *ngIf="(CustomerEditFormControl.BlanketPOLowerLimitPercent.touched || submitted) && CustomerEditFormControl.BlanketPOLowerLimitPercent.errors?.required">
                                                        Blanket PO Lower Limit % is required
                                                    </span>

                                                </div>
                                            </div>
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label for="Customer">Customer VAT No:
                                                        
                                                    </label>
                                                    <input type="text" class="form-control"
                                                        placeholder="Enter Customer VAT No"
                                                        name="CustomerVATNo"
                                                        formControlName="CustomerVATNo">
                                                

                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <!-- <label for="Customer">Country(Location) :<span
                                                        class="red">*</span></label> -->
                                                        <label for="Customer">Customer Assigned Country & Currency :<span
                                                            class="red">*</span></label>
                                                    <select class="custom-select" name="CustomerLocation" formControlName="CustomerLocation" (change)="getCustomerCurrencyCode($event)">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let country of countryListWithSymbol" value={{country.CountryId}}>
                                                            {{country.name}}
                                                        </option>
                                                    </select>
                                                    <span class="text-danger"
                                                    *ngIf="(CustomerEditFormControl.CustomerLocation.touched || submitted) && CustomerEditFormControl.CustomerLocation.errors?.required">
                                                    Customer Invoice Currency is required
                                                </span>
                                                </div>
                                            </div>
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label for="Customer">Customer Invoice Currency:</label>
                                                    <br>
                                                    {{CustomerCurrencyCode}}
                                                    <!-- <select class="custom-select" name="CustomerCurrencyCode" formControlName="CustomerCurrencyCode">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let item of CurrencyList"
                                                            value={{item.CurrencyCode}}>
                                                            {{item.CurrencyCode}}&nbsp;-{{item.CurrencySymbol}}
                                                        </option>
                                                    </select>
                                                    <span class="text-danger"
                                                    *ngIf="(CustomerEditFormControl.CustomerCurrencyCode.touched || submitted) && CustomerEditFormControl.CustomerCurrencyCode.errors?.required">
                                                    Currency is required
                                                </span> -->
                                                </div>
                                            </div>
                                        </div> 
                                        <div class="row">
                                            <div class="col-xl-12">
                                                <div class="form-group">
                                                    <label for="Customer">Notes :</label>
                                                    <textarea class="form-control" placeholder="Notes" rows="3"
                                                        name="Notes" formControlName="Notes"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xl-12">
                                                <div class="form-group">
                                                    <label for="Customer">Customer Shipping Notes :</label>
                                                    <textarea class="form-control" placeholder="CustomerPONotes" rows="3"
                                                        name="CustomerPONotes" formControlName="CustomerPONotes"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xl-12">
                                                <div class="form-group">
                                                    <label for="Customer">Priority Note:</label>
                                                    <textarea class="form-control" placeholder="Priority Notes "
                                                        rows="3" name="PriorityNotes"
                                                        formControlName="PriorityNotes"></textarea>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <div class="custom-control custom-checkbox">
                                                        <input class="custom-control-input" type="checkbox"
                                                            id="IsLaborOnInvoice" value=1 name="IsLaborOnInvoice"
                                                            formControlName="IsLaborOnInvoice">
                                                        <label class="custom-control-label" for="IsLaborOnInvoice">
                                                            Print Labor on Invoice
                                                        </label>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-6">
                                            <div class="form-group">
                                                <div class="custom-control custom-checkbox">
                                                    <input class="custom-control-input" type="checkbox"
                                                        id="IsDisplayPOInQR" name="IsDisplayPOInQR"
                                                        formControlName="IsDisplayPOInQR"
                                                        (change)="onUpdateQRcode($event,'',0,true)">
                                                    <label class="custom-control-label" for="IsDisplayPOInQR">
                                                        Display Customer PO in QR Code
                                                    </label>

                                                </div>
                                            </div>
                                           </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xl-12 form-lbox">
                                    <h4 class="form-title-text bluetxt mb-20">Profile Image</h4>

                                    <div class="form-border">
                                        <div class="row">
                                            <div class="form-group">
                                                <label>Image : </label>
                                                <img [src]="ImagePath" *ngIf="showImagePath" width="300">
                                                <br>
                                                <input type="file" class="form-control" (change)="fileProgress($event)"
                                                    (change)="onFileChange($event)">

                                                <input type="hidden" name="ProfilePhoto" formControlName="ProfilePhoto">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="row" *ngIf="IsCusRefEnabled">
                                <div class="col-xl-12 form-lbox">
                                    <h4 class="form-title-text bluetxt mb-20">Customer Reference
                                        <span class="float-right">
                                            <button *ngIf="IsAddCusRefEnabled && RefList.length < 6"
                                                class="btn btn-primary btn-sm waves-effect raa" type="button"
                                                (click)="addReference()">
                                                <i class="remixicon-add-fill mrg-5"></i> Add Reference
                                            </button>
                                        </span>
                                    </h4>

                                    <div class="table-responsive">
                                        <table class="table table-bordered mb-0">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th scope="col">#</th>
                                                    <th>Reference Name</th>
                                                    <th>QR Code</th>
                                                    <th>Edit Customer Reference</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody cdkDropList (cdkDropListDropped)="onDrop($event)">
                                                <tr *ngFor="let ref of RefList; let i = index;" cdkDrag
                                                    cdkDragLockAxis="y">
                                                    <th class="col-xs">
                                                        <div class="drag-handle">
                                                            <ng-container [ngTemplateOutlet]="dragHandleTmpl">
                                                            </ng-container>
                                                            {{ i+1 }}
                                                        </div>
                                                    </th>
                                                    <td>{{ref.CReferenceName}}</td>
                                                    <td>
                                                        <input type="checkbox"
                                                            [checked]="ref.IsDisplayOnQRCode == 1 ? true : false"
                                                            id="{{ref.CReferenceId}}"
                                                            (change)="onUpdateQRcode($event,ref,i)">
                                                    </td>
                                                    <td>
                                                        <input type="checkbox"
                                                            [checked]="ref.IsEditableByCustomer == 1 ? true : false"
                                                            id="{{ref.CReferenceId}}"
                                                            (change)="onChangeEditableCustomerRef($event,ref,i)">
                                                    </td>
                                                    <td>
                                                        <a *ngIf="IsEditCusRefEnabled" (click)="editReference(ref,i)"
                                                            class="fa fa-edit" ngbTooltip="Edit"
                                                            placement="top"></a>&nbsp;
                                                        <a *ngIf="IsDeleteCusRefEnabled"
                                                            (click)="deleteReference(ref.CReferenceId,i)"
                                                            class="fa fa-trash text-danger" ngbTooltip="Delete"
                                                            placement="top"></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tbody *ngIf="RefList?.length == 0">
                                                <tr>
                                                    <td colspan="5" class="no-data-available">No data!</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-xl-12 form-lbox">
                                    <h4 class="form-title-text bluetxt mb-20">Department
                                        <span class="float-right">
                                            <button class="btn btn-primary btn-sm waves-effect raa" type="button"
                                                (click)="addDepartments()">
                                                <i class="remixicon-add-fill mrg-5"></i> Add Department
                                            </button>
                                        </span>
                                    </h4>

                                    <div class="table-responsive">
                                        <table class="table table-bordered mb-0">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>Department Name</th>
                                                    <th>Contact Name</th>
                                                    <th>Contact Phone</th>
                                                    <th>Contact Email</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let depart of DepartmentList; let i = index;">
                                                    <td>{{depart.CustomerDepartmentName}}</td>
                                                    <td>{{depart.DepartmentContactName}}</td>
                                                    <td>{{depart.DepartmentContactPhone}}</td>
                                                    <td>{{depart.DepartmentContactEmail}}</td>
                                                    <td>
                                                        <a (click)="editDepartment(depart,i)" class="fa fa-edit"
                                                            ngbTooltip="Edit" placement="top"></a>&nbsp;
                                                        <a (click)="deleteDepartment(depart.CustomerDepartmentId,i)"
                                                            class="fa fa-trash text-danger" ngbTooltip="Delete"
                                                            placement="top"></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tbody *ngIf="DepartmentList?.length == 0">
                                                <tr>
                                                    <td colspan="5" class="no-data-available">No data!</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Column 2 -->
                        <div class="col-xl-6 col-lg-6">
                            <div class="row">
                                <div class="col-xl-12 form-rbox">
                                    <h4 class="form-title-text bluetxt mb-20">Customer Address</h4>
                                    <div class="row">
                                        <div class="col-lg-6 col-xl-6"
                                            *ngFor="let Addressdata of AddressList;let i = index;">

                                            <div class="form-border">
                                                <h6 class="text-uppercase text-primary">
                                                    <span class="float-left">Address #{{i+1}}
                                                        <i *ngIf="Addressdata.IsUPSVerified == 1" ngbTooltip="Address verified by UPS" class="mdi mdi-checkbox-marked-circle text-success"></i>
                                                        <i *ngIf="Addressdata.IsUPSVerified == 2" ngbTooltip="Address verified fail by UPS"class="mdi mdi-minus-circle text-danger"></i>
                                                        <i *ngIf="Addressdata.IsUPSVerified == 0" ngbTooltip="Not verified / Not US country" class="mdi mdi-checkbox-blank-circle text-warning"></i>
                                                    </span>
                                                    <span class="float-right">
                                                        <a (click)="editAddress(Addressdata,i)" class="fa fa-edit"
                                                            ngbTooltip="Edit" placement="top"></a>&nbsp;

                                                        <a (click)="deleteAddress(Addressdata.AddressId,i)"
                                                            id="{{Addressdata.AddressId}}"
                                                            class="fa fa-trash text-danger" ngbTooltip="Delete"
                                                            *ngIf="AddressList.length>1 && Addressdata.IsContactAddress != 1  && Addressdata.IsBillingAddress != 1  && Addressdata.IsShippingAddress != 1"
                                                            placement="top"></a>

                                                    </span>
                                                </h6>
                                                <div class="clearfix"></div>
                                                <p class="text-secondary mt-2 mb-0">
                                                    {{Addressdata.StreetAddress}}, {{Addressdata.SuiteOrApt}} <br>
                                                    {{Addressdata.City}}, {{Addressdata.StateName}},<br>
                                                    {{Addressdata.CountryName}} - {{Addressdata.Zip}}<br>
                                                    <i class="mdi mdi-phone mr-1 text-primary" ngbTooltip="Primary"></i>
                                                    {{Addressdata.PhoneNoPrimary}}
                                                    <span *ngIf="Addressdata.PhoneNoSecondary"><br><i
                                                            class="mdi mdi-phone mr-1" ngbTooltip="Secondary"></i>
                                                        {{Addressdata.PhoneNoSecondary}}</span>
                                                    <span *ngIf="Addressdata.Fax"><br><i class="mdi mdi-fax mr-1"></i>
                                                        {{Addressdata.Fax}}</span><br>
                                                </p>

                                                <div class="mt-2">
                                                    <div>
                                                        <input id="C{{CustomerId}}{{Addressdata.AddressId}}{{i+1}}"
                                                            type="radio" value="{{Addressdata.AddressId}}"
                                                            [checked]="Addressdata.IsContactAddress == 1 ? true : false"
                                                            name="IsContactAddress"
                                                            (click)="setDefaultAddress(Addressdata.AddressId, 1)"
                                                            class="mr-2">
                                                        <label for="IsContactAddress">Default Contact Address</label>
                                                    </div>

                                                    <div>
                                                        <input id="B{{CustomerId}}{{Addressdata.AddressId}}{{i+1}}"
                                                            type="radio" value="{{Addressdata.AddressId}}"
                                                            [checked]="Addressdata.IsBillingAddress == 1 ? true : false"
                                                            name="IsBillingAddress"
                                                            (click)="setDefaultAddress(Addressdata.AddressId, 3)"
                                                            class="mr-2">
                                                        <label for="IsBillingAddress">Default Billing Address</label>
                                                    </div>

                                                    <div>
                                                        <input id="S{{CustomerId}}{{Addressdata.AddressId}}{{i+1}}"
                                                            type="radio" value="{{Addressdata.AddressId}}"
                                                            [checked]="Addressdata.IsShippingAddress == 1 ? true : false"
                                                            name="IsShippingAddress"
                                                            (click)="setDefaultAddress(Addressdata.AddressId, 2)"
                                                            class="mr-2">
                                                        <label for="IsShippingAddress">Default Shipping Address</label>
                                                    </div>
                                                </div>


                                            </div>
                                            <br>
                                        </div>
                                        <br>
                                    </div>
                                    <br>
                                </div>
                            </div>

                            <div class="row mt-1 mb-2">
                                <div class="custom-control custom-switch float-right">
                                    <button class="btn btn-primary btn-sm waves-effect raa" type="button"
                                        (click)="addAddress()">
                                        <i class="remixicon-add-fill mrg-5"></i> Add Address
                                    </button>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-xl-12 form-rbox">
                                    <h4 class="form-title-text bluetxt mb-20">Account Manager</h4>
                                    <div class="form-border">
                                        <div class="row">
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label>
                                                        Manager Name :
                                                    </label>
                                                    <select class="custom-select" [(ngModel)]="UserId"
                                                        [ngModelOptions]="{standalone: true}">
                                                        <option value="" disabled>Select</option>
                                                        <option *ngFor="let User of UserListddl"
                                                            value="{{User.UserId}}">
                                                            {{User.Username}}
                                                        </option>
                                                    </select>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xl-12 form-rbox">
                                    <h4 class="form-title-text bluetxt mb-20">Asset
                                        <span class="float-right">
                                            <button class="btn btn-primary btn-sm waves-effect raa" type="button"
                                                (click)="addAsset()">
                                                <i class="remixicon-add-fill mrg-5"></i> Add Asset
                                            </button>
                                        </span>
                                    </h4>
                                    <div class="table-responsive">
                                        <table class="table table-bordered mb-0">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>Asset Name</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let Asset of AssetList; let i = index;">
                                                    <td>{{Asset.CustomerAssetName}}</td>
                                                    <td>
                                                        <a (click)="editAsset(Asset,i)" class="fa fa-edit"
                                                            ngbTooltip="Edit" placement="top"></a>&nbsp;
                                                        <a (click)="deleteAsset(Asset.CustomerAssetId,i)"
                                                            class="fa fa-trash text-danger" ngbTooltip="Delete"
                                                            placement="top"></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tbody *ngIf="AssetList?.length == 0">
                                                <tr>
                                                    <td colspan="5" class="no-data-available">No data!</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xl-12 form-rbox">
                                    <h4 class="form-title-text bluetxt mb-20">Users
                                        <span class="float-right">
                                            <button class="btn btn-primary btn-sm waves-effect raa" type="button"
                                                (click)="addUser()">
                                                <i class="remixicon-add-fill mrg-5"></i> Add User
                                            </button>
                                        </span>

                                    </h4>
                                    <div class="table-responsive">
                                        <table class="table table-bordered mb-0">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>#</th>
                                                    <th>User Name</th>
                                                    <th>Email</th>
                                                    <th>Is Primary</th>
                                                    <th>Account Locked</th>
                                                    <th style="width: 19%;">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let users of UserList;let i=index">
                                                    <td>{{i+1}}</td>
                                                    <td>{{users.Username}}</td>
                                                    <td>{{users.Email}}</td>
                                                    <td>
                                                        <div [ngClass]="GetClassName(users.IsPrimay)">
                                                            {{IsPrimary}}
                                                        </div>


                                                    <td><span class="badge badge-info" [ngClass]="
                                                        {
                                                            'badge-success': users.AccountLocked === 'No',
                                                            'badge-danger': users.AccountLocked === 'Yes'
                                                        }">{{users.AccountLocked}}</span>
                                                    </td>
                                                    <td>
                                                        <a (click)="onChangePassword(users,i)" style="cursor:pointer;"
                                                            class="remixicon-lock-2-line" ngbTooltip="Change Password"
                                                            placement="top"></a>&nbsp;
                                                        <a (click)="editUser(users,i)" class="fa fa-edit" style="cursor:pointer;"
                                                            ngbTooltip="Edit" placement="top"></a>&nbsp;
                                                        <a (click)="deleteUser(users.UserId,i)" style="cursor:pointer;"
                                                            class="fa fa-trash text-danger" ngbTooltip="Delete"
                                                            placement="top"></a>&nbsp;
                                                        <a *ngIf="users.IsPrimay == 0" (click)="setPrimaryUser(users.UserId,i)" style="cursor:pointer;"
                                                            class="fa fa-plus text-success" ngbTooltip="Set as Primary"
                                                            placement="top"></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tbody *ngIf="UserList?.length == 0">
                                                <tr>
                                                    <td colspan="5" class="no-data-available">No data!</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xl-12 form-rbox">
                                    <h4 class="form-title-text bluetxt mb-20">Attachments
                                        <span class="float-right">
                                            <button class="btn btn-primary btn-sm waves-effect raa" type="button"
                                                (click)="addAttachement()">
                                                <i class="remixicon-add-fill mrg-5"></i> Add Attachment
                                            </button>
                                        </span>
                                    </h4>

                                    <div style="padding-bottom:0;" class="form-border">
                                        <div style="padding-bottom:0px;" class="row">

                                            <div style="margin-bottom:20px;" class="col-sm-3"
                                                *ngFor="let vattachment of AttachmentList; let i = index;">
                                                <div style="height:auto !important;padding-bottom: 5px;margin-bottom: 10px;"
                                                    class="box d-flex justify-content-center flex-column brdimg">

                                                    <span *ngIf="vattachment.AttachmentMimeType == 'application/pdf'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="assets/images/attachment/{{attachmentThumb['application/pdf'].thumb}}"
                                                                class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <span *ngIf="vattachment.AttachmentMimeType == 'image/jpeg'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="{{vattachment.Attachment}}" class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <span *ngIf="vattachment.AttachmentMimeType == 'image/png'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="{{vattachment.Attachment}}" class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <span
                                                        *ngIf="vattachment.AttachmentMimeType == 'application/msword'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="assets/images/attachment/{{attachmentThumb['application/msword'].thumb}}"
                                                                class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <span
                                                        *ngIf="vattachment.AttachmentMimeType == 'application/vnd.ms-excel'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="assets/images/attachment/{{attachmentThumb['application/vnd.ms-excel'].thumb}}"
                                                                class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <span *ngIf="vattachment.AttachmentMimeType == 'text/csv'">
                                                        <a href="{{vattachment.Attachment}}" target="_blank">
                                                            <img src="assets/images/attachment/{{attachmentThumb['text/csv'].thumb}}"
                                                                class="img-fluid"
                                                                ngbTooltip="{{vattachment.AttachmentOriginalFile}}"
                                                                width="200" alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                </div>
                                                <p class="mb-0">
                                                    <code class="text-primary">{{vattachment.AttachmentDesc}}</code>
                                                </p>
                                                <p class="mb-0">
                                                    <code>{{vattachment.Created | date : 'M/d/yy, h:mm a'}}</code>
                                                    &nbsp;
                                                    <a style="margin-right: 10px;"
                                                        (click)="editAttachement(vattachment,i)" class="fa fa-edit"
                                                        ngbTooltip="Edit" placement="top"></a>
                                                    <a (click)="deleteAttachement(vattachment.AttachmentId,i)"
                                                        class="fa fa-trash text-danger" ngbTooltip="Delete"
                                                        placement="top"></a>
                                                </p>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xl-12 form-rbox">
                                    <h4 class="form-title-text bluetxt mb-20">Directed Vendors</h4>
                                    <div class="form-border">
                                        <div class="row">
                                            <div class="col-xl-12">
                                                <div class="form-group">
                                                    <label>
                                                        Vendors : 
                                                    </label>
                                                    <ng-select [items]="vendors$ | async" [typeahead]="vendorsInput$" [loading]="loadingVendors" [multiple]="true" [closeOnSelect]="false" [searchable]="true" [virtualScroll]="true" placeholder="Select" bindLabel="VendorName" bindValue="VendorId"
                                                    name="DirectedVendors" formControlName="DirectedVendors">
                                                        <ng-template ng-header-tmp *ngIf="VendorsList.length > 0">
                                                            <button type='button' (click)="selectAllVendor()" class="btn btn-sm btn-link">Select all</button>
                                                        </ng-template>
                                                        <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                                            <div class="ng-value" *ngFor="let item of items | slice:0:1">
                                                                <span class="ng-value-label">{{item.VendorName}}</span>
                                                                <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">Ã</span>
                                                            </div>
                                                            <div class="ng-value" *ngIf="items.length > 1">
                                                                <span class="ng-value-label">+ {{items.length - 1}} more...</span>
                                                            </div>
                                                        </ng-template>
                                                        <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                                                            <input id="item-{{index}}" type="checkbox" [checked]="item$.selected" [ngModel]="item$.selected" [ngModelOptions]="{standalone: true}" /> {{item.VendorName}}
                                                        </ng-template>
                                                    </ng-select>
                                                   
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                        <div class="col-xl-12">
                                            <h4 class="form-title-text bluetxt mb-20">Selected Directed Vendors
                                                <span class="float-right">
                                                    <button class="btn btn-primary btn-sm waves-effect raa" type="button"
                                                        (click)="onExcel()">
                                                        Export To Excel
                                                    </button>
                                                </span>
        
                                            </h4>
                                            <div class="table-responsive dataTables_scrollBody" style="position: relative; overflow: auto; max-height: 303px; width: 100%;">
                                                <table class="table table-bordered mb-0">
                                                    <thead class="thead-light">
                                                        <tr>
                                                            <th>#</th>
                                                            <th>Vendor Code</th>
                                                            <th>Vendor Name</th>
                                                            
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let users of DirectedVendorList;let i=index">
                                                            <td>{{i+1}}</td>
                                                            <td>{{users.VendorCode}}</td>
                                                            <td>{{users.VendorName}}</td>
                                                            
                                                          
                                                        </tr>
                                                    </tbody>
                                                    <tbody *ngIf="DirectedVendorList?.length == 0">
                                                        <tr>
                                                            <td colspan="5" class="no-data-available">No data!</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Customer UPS Details Start -->

                            <div class="row">
                                <div class="col-xl-12 form-lbox">
                                    <h4 class="form-title-text bluetxt mb-20">UPS Details</h4>

                                    <div class="form-border">
                                        <div class="row">
                                            <!-- <div class="col-xl-6">
                                                <div class="row">
                                                    <div class="col-xl-12">
                                                        <div class="form-group">
                                                            <label for="Customer">
                                                                UPS Username :
                                                            </label>
                                                            <input type="text" class="form-control" placeholder="Enter UPS Username" name="UPSUsername" formControlName="UPSUsername">

                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-xl-12">
                                                        <div class="form-group">
                                                            <label for="Customer">
                                                                UPS Password :
                                                            </label>
                                                            <input type="password" class="form-control" placeholder="Enter UPS Password" name="UPSPassword" formControlName="UPSPassword">

                                                        </div>
                                                    </div>
                                                </div>
                                            </div> -->

                                            <div class="col-xl-6">
                                                <!-- <div class="row">
                                                    <div class="col-xl-12">
                                                        <div class="form-group">
                                                            <label for="Customer">
                                                                UPS Access License Number:
                                                            </label>
                                                            <input type="text" class="form-control" placeholder="Enter UPS Access License Number" name="UPSAccessLicenseNumber" formControlName="UPSAccessLicenseNumber">

                                                        </div>
                                                    </div>
                                                </div> -->

                                                <div class="row">
                                                    <div class="col-xl-12">
                                                        <div class="form-group">
                                                            <label for="Customer">
                                                                UPS Shipper Number :
                                                            </label>
                                                            <input type="text" class="form-control" placeholder="Enter UPS Shipper Number" name="UPSShipperNumber" formControlName="UPSShipperNumber">

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <!-- Customer UPS Details End -->
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xl-6">
                            &nbsp;

                        </div>


                        <div class="col-xl-6 sales-right">
                            <div class="btn-group btn-group-sm float-right" role="group">
                                <button ngbTooltip="Save" placement="top" class="btn btn-icon waves-effect"
                                    [disabled]="btnDisabled"
                                    [ngClass]="{'class': (btnDisabled)? 'gray': 'btn-group btn-group-sm float-right'}">
                                    <i class="mdi mdi-content-save"></i></button>
                                <button type="button" ngbTooltip="Back" placement="top"
                                    class="btn btn-icon bg-primary waves-effect" routerLink="/admin/customer/list">
                                    <i class="fas fa-arrow-left"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>

        </div>
    </div>
</div>

<ng-template #dragHandleTmpl>
    <svg class="bi bi-list handle" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
        xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd"
            d="M2.5 11.5A.5.5 0 013 11h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4A.5.5 0 013 7h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4A.5.5 0 013 3h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5z"
            clip-rule="evenodd" />
    </svg>
</ng-template>