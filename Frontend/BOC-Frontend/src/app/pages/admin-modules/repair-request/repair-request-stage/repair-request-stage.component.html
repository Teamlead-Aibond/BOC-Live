<div class="container-fluid">
  <app-page-title
    title="Edit Repair Request"
    [breadcrumbItems]="breadCrumbItems"
  ></app-page-title>

  <form class="form" role="form" (ngSubmit)="onSubmit()" [formGroup]="EditForm">
    <div class="row">
      <div class="col-12">
        <div class="sticky-container">
          <div
            id="so-groups"
            class="right so-groups-sticky hidden-xs"
            style="top: 198px"
          >
            <a
              (click)="reLoad()"
              data-target="popup"
              data-popup="#popup-revert"
            >
              <span>Reload</span> <i class="fe-refresh-ccw"></i>
            </a>
            <a
              class="bg-warning"
              (click)="onSubmit(1)"
              *ngIf="
                Status == RRS_GENERATED &&
                RRVerify[APPROVE_ACCESS] == 1 &&
                IsActive == 1
              "
            >
              <span class="bg-warning">Verify Repair Request</span>
              <i class="mdi mdi-check-decagram"></i>
            </a>
            <a
              (click)="onSubmit(0)"
              *ngIf="
                showsave &&
                Status != RRS_NOT_REPAIRABLE &&
                Status != RRS_QUOTE_REJECTED &&
                Status != RRS_COMPLETED &&
                IsActive == 1
              "
            >
              <span>Save</span> <i class="mdi mdi-content-save"></i>
            </a>
            <a
              class="bg-danger"
              *ngIf="IsActive == 1 && ActiveInActiveRREnable"
              data-target="popup"
              data-popup="#popup-delete"
              (click)="onInActiveorActiveRR(0)"
            >
              <span class="bg-danger">Inactivate RR</span
              ><i class="far fa-thumbs-down"></i>
            </a>
            <a
              class="bg-success"
              *ngIf="IsActive == 0 && ActiveInActiveRREnable"
              data-target="popup"
              data-popup="#popup-delete"
              (click)="onInActiveorActiveRR(1)"
            >
              <span class="bg-success">Activate RR</span
              ><i class="far fa-thumbs-up"></i>
            </a>

            <a
              data-target="popup"
              data-popup="#popup-qrcode"
              (click)="viewQrCode()"
              *ngIf="IsActive == 1"
            >
              <span>QR Code</span> <i class="mdi mdi-qrcode"></i>
            </a>
            <a
              data-target="popup"
              data-popup="#popup-customer-followup"
              (click)="onCustomerFollowup()"
              *ngIf="RRCustomerFollowup[CREATE_ACCESS] == 1 && IsActive == 1"
            >
              <span>Customer Follow Up</span>
              <i class="mdi mdi-email-outline"></i>
            </a>
            <a
              data-target="popup"
              data-popup="#popup-vendor-follow-up"
              *ngIf="
                VendorId > 0 &&
                Status != RRS_NEED_RESOURCED &&
                RRVendorFollowup[CREATE_ACCESS] == 1 &&
                IsActive == 1
              "
              (click)="onVendorFollowup()"
            >
              <span>Vendor Follow Up</span>
              <i class="remixicon-mail-unread-line"></i>
            </a>
            <a
              class="bg-danger"
              data-target="popup"
              data-popup="#popup-delete"
              (click)="onDelete()"
              *ngIf="IsDeleteEnabled && IsActive == 1"
            >
              <span class="bg-danger">Delete</span
              ><i class="remixicon-delete-bin-line"></i>
            </a>
            <a
              class="bg-success"
              *ngIf="
                RRInfo &&
                !addMissingPart &&
                !RRInfo[0]?.InventoryId &&
                IsActive == 1
              "
              data-target="popup"
              data-popup="#popup-delete"
              (click)="onAddPartToInventory()"
            >
              <span class="bg-success">Add Part to Inventory</span
              ><i class="remixicon-file-add-line"></i>
            </a>
            <!-- <a class="bg-pink" *ngIf="RRInfo && !addMissingPart && !RRInfo[0]?.InventoryId && IsActive==1 && (Status == 6 || Status == 7)" -->
            <a
              class="bg-pink"
              *ngIf="
                MovePartsToStoreFromRRView &&
                RRInfo &&
                IsActive == 1 &&
                (Status == RRS_QUOTE_REJECTED || Status == RRS_COMPLETED) &&
                !PartsMovedToStore
              "
              data-target="popup"
              data-popup="#popup-delete"
              (click)="onInventoryShop()"
            >
              <span class="bg-pink">Move Part to Aibond Store</span
              ><i class="fas fa-shopping-cart"></i>
            </a>
            <a (click)="goBack($event)">
              <span>Back</span><i class="fas fa-arrow-left"></i>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-xl-12">
        <div style="padding-top: 1rem" class="card-box ribbon-box cbp">
          <div class="row">
            <div class="col-xl-6 float-left">
              <h3 class="page-title bluetxt" style="float: left; margin-top: 0">
                <span>
                  <!-- Repair Request # :  -->
                  RR #
                  <span class="badge badge-success m-2 p-1"> {{ RRNo }} </span>
                  <!-- <span>Revert</span> -->
                  <a
                    (click)="onRevert()"
                    class="badge badge-secondary m-1"
                    ngbTooltip="Revert RR"
                    placement="top"
                    *ngIf="RevertStatusForRR && IsActive == 1"
                  >
                    <i class="mdi mdi-refresh"></i>
                  </a>
                  <span
                    class="badge badge-success m-1"
                    ngbTooltip="Active RR"
                    placement="top"
                    *ngIf="IsActive == 1"
                  >
                    <i class="far fa-thumbs-up"></i>
                  </span>
                  <span
                    class="badge badge-danger m-1"
                    ngbTooltip="Inactive RR"
                    placement="top"
                    *ngIf="IsActive == 0"
                  >
                    <i class="far fa-thumbs-down"></i>
                  </span>
                  &nbsp;&nbsp;
                  <a
                    *ngIf="
                      MovePartsToStoreFromRRView &&
                      !PartsMovedToStore &&
                      (Status == RRS_QUOTE_REJECTED || Status == RRS_COMPLETED)
                    "
                    data-target="popup"
                    ngbTooltip="Move Part to Aibond Store"
                    data-popup="#popup-delete"
                    (click)="onInventoryShop()"
                  >
                    <i class="fas fa-shopping-cart color-pink"></i>&nbsp;<span
                      class="color-pink"
                      >Move Part to Aibond Store</span
                    >
                  </a>

                  <a
                    *ngIf="PartsMovedToStore"
                    ngbTooltip="Part Moved to Aibond Store"
                  >
                    <i class="fas fa-shopping-cart color-green"></i>&nbsp;<span
                      class="color-green"
                      >Part Moved to Aibond Store</span
                    >
                  </a>
                </span>
                <span class="Repair m-1">{{ repairMessage }}</span>
              </h3>
              <span
                *ngIf="RRNotesInfo.length > 0 && RRNotes[VIEW_ACCESS] == 1"
                style="float: left; padding-top: 25px"
              >
                <ng-template [ngTemplateOutlet]="NotesBar"></ng-template>
              </span>
            </div>
            <div class="col-xl-6 float-left">
              <span
                class="locwrap"
                *ngIf="RRPartLocationView || RRPartLocationEdit"
                >Location :
                <span
                  style="color: #333"
                  *ngIf="RRPartLocationView && RRPartLocationId != 0"
                  >{{ RRPartLocation }}</span
                >
                <a
                  *ngIf="
                    RRPartLocationEdit && RRPartLocationId != 0 && IsActive == 1
                  "
                  (click)="onEditRRPartLocation()"
                  ngbTooltip="Edit Part Location"
                  ><i
                    style="
                      color: #09518e;
                      margin-left: 6px;
                      margin-right: 3px;
                      cursor: pointer;
                    "
                    class="fas fa-edit"
                  ></i
                ></a>
                <a
                  *ngIf="
                    RRPartLocationView && RRPartLocationId != 0 && IsActive == 1
                  "
                  (click)="onRPartLocationHistory()"
                  ngbTooltip="Part Location History"
                  ><i
                    style="
                      cursor: pointer;
                      font-size: 23px;
                      position: relative;
                      top: 2px;
                    "
                    class="mdi mdi-history"
                  ></i
                ></a>
                <a
                  *ngIf="
                    RRPartLocationDelete &&
                    RRPartLocationId != 0 &&
                    IsActive == 1
                  "
                  (click)="onRRPartLocationDelete()"
                  ngbTooltip="Part Location Delete"
                  ><i
                    style="
                      cursor: pointer;
                      font-size: 18px;
                      position: relative;
                      top: 2px;
                      color: red;
                    "
                    class="fa fa-trash ml-1"
                  ></i
                ></a>
                <button
                  type="button"
                  (click)="onEditRRPartLocation()"
                  *ngIf="
                    RRPartLocationId == 0 && RRPartLocationAdd && IsActive == 1
                  "
                  class="btn btn-sm btn-primary ml-2"
                  ngbTooltip="Add Part Location"
                >
                  Add Part Location
                </button>
              </span>
              <span
                class="alert alert-warning float-right"
                *ngIf="PriorityNotes != ''"
              >
                <i class="mdi mdi-alert-outline mr-1"></i> {{ PriorityNotes }}
              </span>
            </div>
          </div>

          <div
            class="row ribbon ribbon-warning float-left"
            *ngIf="Status == RRS_GENERATED && RRVerify[VIEW_ACCESS] == 1"
          >
            <span><i class="mdi mdi-check-decagram"></i> Verify</span>
          </div>
          <div
            class="row ribbon ribbon-purple float-left"
            *ngIf="IsReverted == 1"
          >
            <a (click)="onRevertHistory()"
              ><i class="mdi mdi-refresh"></i> &nbsp;Reverted</a
            >
          </div>

          <ul class="step-indicator">
            <li
              [ngClass]="{
                active: Status >= RRS_GENERATED,
                complete: Status > RRS_GENERATED
              }"
            >
              <div class="step"><i class="mdi mdi-source-branch"></i></div>
              <div class="caption">
                <span>{{ array_rr_status[0].title }}</span>
              </div>
            </li>
            <li
              [ngClass]="{
                active: Status >= RRS_NEED_SOURCED,
                complete: Status > RRS_NEED_SOURCED
              }"
              *ngIf="
                VendorSize <= 1 &&
                Status != RRS_NEED_RESOURCED &&
                Status != RRS_NOT_REPAIRABLE
              "
            >
              <div class="step"><i class="fa fa-folder-open"></i></div>
              <div class="caption">
                <span>{{ array_rr_status[1].title }}</span>
              </div>
            </li>
            <li
              [ngClass]="{
                active: Status >= RRS_NEED_SOURCED,
                complete: Status > RRS_NEED_SOURCED
              }"
              *ngIf="
                (VendorSize > 1 || Status == RRS_NEED_RESOURCED) &&
                Status != RRS_NOT_REPAIRABLE
              "
            >
              <div class="step"><i class="fa fa-folder-open"></i></div>
              <div class="caption">
                <span>{{ array_rr_status[3].title }}</span>
              </div>
            </li>
            <li
              [ngClass]="{
                active:
                  Status >= RRS_AWAIT_VQUOTE && Status != RRS_NEED_RESOURCED,
                complete:
                  Status > RRS_AWAIT_VQUOTE && Status != RRS_NEED_RESOURCED
              }"
              *ngIf="Status != RRS_NOT_REPAIRABLE"
            >
              <div class="step">
                <span class="two" *ngIf="VendorSize > 1">{{ VendorSize }}</span>
                <i class="mdi mdi-file-document-outline"></i>
              </div>
              <div class="caption">
                <span>{{ array_rr_status[2].title }}</span>
              </div>
            </li>
            <li
              [ngClass]="{
                active: Status >= RRS_QUOTE_SUBMITTED,
                complete: Status > RRS_QUOTE_SUBMITTED
              }"
              *ngIf="Status != RRS_NOT_REPAIRABLE"
            >
              <div class="step">
                <i class="mdi mdi-file-document-box-multiple-outline"></i>
              </div>
              <div class="caption">
                <span>{{ array_rr_status[4].title }}</span>
              </div>
            </li>
            <li
              [ngClass]="{
                active:
                  Status == RRS_QUOTE_REJECTED && Status != RRS_NOT_REPAIRABLE,
                complete: Status > RRS_IN_PROGRESS
              }"
              *ngIf="
                Status == RRS_QUOTE_REJECTED && Status != RRS_NOT_REPAIRABLE
              "
            >
              <div class="step"><i class="fa fa-times"></i></div>
              <div class="caption">
                <span>{{ array_rr_status[6].title }}</span>
              </div>
            </li>
            <li
              [ngClass]="{
                active:
                  Status == RRS_IN_PROGRESS && Status != RRS_NOT_REPAIRABLE,
                complete:
                  Status > RRS_IN_PROGRESS && Status != RRS_NOT_REPAIRABLE
              }"
              *ngIf="
                Status != RRS_QUOTE_REJECTED && Status != RRS_NOT_REPAIRABLE
              "
            >
              <!--  && Status != RRS_NOT_REPAIRABLE -->
              <div class="step"><i class="fas fa-wrench"></i></div>
              <div class="caption">
                <span>{{ array_rr_status[5].title }}</span>
              </div>
            </li>
            <li
              [ngClass]="{ active: Status == RRS_COMPLETED }"
              *ngIf="
                Status != RRS_QUOTE_REJECTED && Status != RRS_NOT_REPAIRABLE
              "
            >
              <div class="step"><i class="fa fa-paper-plane"></i></div>
              <div class="caption">
                <span>{{ array_rr_status[7].title }}</span>
              </div>
            </li>
            <li
              [ngClass]="{ active: Status == RRS_NOT_REPAIRABLE }"
              *ngIf="Status == RRS_NOT_REPAIRABLE"
            >
              <div class="step"><i class="mdi mdi-nfc-variant-off"></i></div>
              <div class="caption">
                <span>{{ array_rr_status[8].title }} </span>
                <span *ngIf="ApprovedQuoteStatus == CUSTOMER_QUOTE_ACCEPTED"
                  >(Approved)</span
                >
              </div>
            </li>
          </ul>

          <div class="row">
            <div class="col-xl-9 col-lg-9">
              <div class="repair-left">
                <div class="row mb-2">
                  <div class="col-xl-6">
                    <div class="row csb">
                      <!-- <h4 style="margin-top: 10px;" class="page-title bluetxt mb-10">Basic Details
                                            </h4> -->
                      <div
                        style="width: 200px; float: left; position: relative"
                        *ngIf="RRSubStatusView && SubStatusId != 0"
                      >
                        <label class="substatus">Sub Status</label>

                        <ng-select
                          *ngIf="RRSubStatusEdit && IsActive == 1"
                          class="select1"
                          name="SubStatusId"
                          (change)="onSubStatusChange(SubStatusId)"
                          [ngModelOptions]="{ standalone: true }"
                          [(ngModel)]="SubStatusId"
                          [items]="subStatusList"
                          placeholder="Select Sub Status"
                          bindLabel="SubStatusName"
                          bindValue="SubStatusId"
                          [searchable]="true"
                        >
                        </ng-select>
                        <span
                          *ngIf="!RRSubStatusEdit || IsActive == 0"
                          class="select1"
                          >{{ SubStatusName }}</span
                        >
                      </div>
                      <a
                        *ngIf="
                          RRSubStatusView && SubStatusId != 0 && IsActive == 1
                        "
                        (click)="onRRSubStatusHistory()"
                        ngbTooltip="Sub Status History"
                        ><i
                          style="
                            cursor: pointer;
                            font-size: 23px;
                            position: relative;
                            top: 2px;
                            color: #1abc9c;
                          "
                          class="mdi mdi-history ml-1"
                        ></i
                      ></a>

                      <div
                        style="width: 200px; float: left; position: relative"
                        *ngIf="RRAssignToView && AssigneeUserId != 0"
                      >
                        <label class="assignto">Assign To</label>
                        <ng-select
                          class="select1"
                          *ngIf="RRAssignToEdit && IsActive == 1"
                          name="Assignee"
                          [(ngModel)]="AssigneeUserId"
                          [ngModelOptions]="{ standalone: true }"
                          (change)="onAssigneeChange(AssigneeUserId)"
                          [items]="adminList"
                          placeholder="Assign To"
                          bindLabel="title"
                          bindValue="UserId"
                          [searchable]="true"
                        >
                        </ng-select>
                        <span
                          *ngIf="!RRSubStatusEdit || IsActive == 0"
                          class="select1"
                          >{{ AssigneeName }}</span
                        >
                      </div>
                      <a
                        *ngIf="
                          RRAssignToView && AssigneeUserId != 0 && IsActive == 1
                        "
                        (click)="onRRAssigneeHistory()"
                        ngbTooltip="Assign To History"
                        ><i
                          style="
                            cursor: pointer;
                            font-size: 23px;
                            position: relative;
                            top: 2px;
                            color: #1abc9c;
                          "
                          class="mdi mdi-history ml-1"
                        ></i
                      ></a>
                      <a
                        *ngIf="
                          RRSubStatusDelete &&
                          RRAssignToDelete &&
                          AssigneeUserId != 0 && SubStatusId != 0 &&
                          IsActive == 1
                        "
                        (click)="onRRSubStatusAssignToReset()"
                        ngbTooltip="Sub Status & Assign To Delete"
                        ><i
                          style="
                            cursor: pointer;
                            font-size: 23px;
                            position: relative;
                            top: 10px;
                            color: red;
                            font-size: 18px;
                          "
                          class="fa fa-trash ml-1"
                        ></i
                      ></a>

                      <button
                        type="button"
                        (click)="onBulkEdit()"
                        *ngIf="
                          SubStatusId == 0 &&
                          AssigneeUserId == 0 &&
                          RRSubStatusAdd && RRAssignToAdd &&
                          IsActive == 1
                        "
                        class="btn btn-sm btn-primary ml-2"
                        ngbTooltip="Add Sub Status & Assign to"
                      >
                        Add Sub Status & Assign To
                      </button>
                    </div>
                  </div>
                  <div class="col-xl-6 text-right mt-1">
                    <!-- Status 1 [Ship] -->
                    <!-- <button (click)="onShip()" type="button"
                                        *ngIf="Status > 0 && ShippingStatus != 1 && ShippingStatus != 2 && RRShipParts[CREATE_ACCESS] == 1"
                                        class="btn btn-info btn-sm waves-effect waves-light mr-1">
                                        Ship
                                    </button> -->

                    <!-- Status 1 [Receive] -->
                    <button
                      (click)="onRRShippingReceive()"
                      type="button"
                      *ngIf="
                        ShippingStatus == 1 &&
                        RRShipParts[CREATE_ACCESS] == 1 &&
                        shippingDetails.ShipToId != CustomerId &&
                        IsActive == 1
                      "
                      class="btn btn-info btn-sm waves-effect waves-light mr-1"
                    >
                      Receive
                    </button>
                    <button
                      (click)="onRRShippingReceive()"
                      type="button"
                      *ngIf="
                        ShippingStatus == 1 &&
                        RRShipParts[CREATE_ACCESS] == 1 &&
                        shippingDetails.ShipToId == CustomerId &&
                        IsActive == 1
                      "
                      class="btn btn-info btn-sm waves-effect waves-light mr-1"
                    >
                      Receive By Customer
                    </button>

                    <!-- Status 2 [Ship] -->
                    <button
                      (click)="onShiptoVendor()"
                      type="button"
                      *ngIf="
                        ShippingStatus == 2 &&
                        Status > RRS_GENERATED &&
                        RRShipParts[CREATE_ACCESS] == 1 &&
                        !(
                          ShippingStatus == 2 &&
                          ShippingIdentityType == 1 &&
                          ShippingIdentityId == CustomerId &&
                          RRShippingHistory.length > 0
                        ) &&
                        IsActive == 1
                      "
                      class="btn btn-success btn-sm waves-effect waves-light mr-1"
                    >
                      Ship
                    </button>

                    <!-- IsPickUp Changes -->
                    <button
                      (click)="onRRShippingReceive()"
                      type="button"
                      *ngIf="
                        ShippingStatus == 3 &&
                        RRShipParts[CREATE_ACCESS] == 1 &&
                        shippingDetails.ShipToId != CustomerId &&
                        IsActive == 1
                      "
                      class="btn btn-warning btn-sm waves-effect waves-light mr-1"
                    >
                      Picked Up
                    </button>
                    <button
                      (click)="onRRShippingReceive()"
                      type="button"
                      *ngIf="
                        ShippingStatus == 4 &&
                        RRShipParts[CREATE_ACCESS] == 1 &&
                        shippingDetails.ShipToId != CustomerId &&
                        IsActive == 1
                      "
                      class="btn btn-info btn-sm waves-effect waves-light mr-1"
                    >
                      Receive
                    </button>
                    <button
                      (click)="onRRShippingReceive()"
                      type="button"
                      *ngIf="
                        ShippingStatus == 3 &&
                        RRShipParts[CREATE_ACCESS] == 1 &&
                        shippingDetails.ShipToId == CustomerId &&
                        IsActive == 1
                      "
                      class="btn btn-warning btn-sm waves-effect waves-light mr-1"
                    >
                      Picked Up
                    </button>
                    <button
                      (click)="onRRShippingReceive()"
                      type="button"
                      *ngIf="
                        ShippingStatus == 4 &&
                        RRShipParts[CREATE_ACCESS] == 1 &&
                        shippingDetails.ShipToId == CustomerId &&
                        IsActive == 1
                      "
                      class="btn btn-info btn-sm waves-effect waves-light mr-1"
                    >
                      Receive By Customer
                    </button>
                    <!-- IsPickUp Changes -->

                    <button
                      type="button"
                      *ngIf="
                        ShippingStatus > 0 &&
                        RRShippingHistory.length > 0 &&
                        !(
                          ShippingStatus == 2 &&
                          ShippingIdentityType == 1 &&
                          ShippingIdentityId == CustomerId
                        ) &&
                        RevertShippingEnabled &&
                        IsActive == 1
                      "
                      (click)="onRevertShippingCycle()"
                      class="btn btn-primary btn-sm waves-effect waves-light mr-1"
                    >
                      Revert Shipping Cycle
                    </button>
                    <button
                      (click)="addWarranty()"
                      *ngIf="
                        IsActive == 1 &&
                        WarrantyInfo.length == 0 &&
                        ApprovedQuoteId &&
                          ApprovedQuoteStatus == 2 &&
                          ApprovedQuoteWarranty > 0 &&
                        RRWarranty[CREATE_ACCESS] == 1 &&
                        Status == RRS_COMPLETED
                      "
                      class="btn btn-icon btn-sm btn-purple waves-effect waves-light mr-1"
                      type="button"
                    >
                      <i
                        style="margin-right: 10px"
                        class="fas fa-certificate"
                      ></i>
                      Add Warranty
                    </button>
                    <!-- Track UPS -->
                    <button
                      (click)="trackUPS(trackingNumber)"
                      type="button"
                      class="btn btn-pink btn-sm waves-effect waves-light mr-1"
                      *ngIf="
                        IsActive == 1 &&
                        trackingNumber != '' &&
                        trackingNumber != null &&
                        trackingNumber != 'undefined' &&
                        RRTrackUPS[VIEW_ACCESS] == 1
                      "
                    >
                      Track UPS
                    </button>

                    <button
                      type="button"
                      *ngIf="
                        IsActive == 1 &&
                        Status != RRS_COMPLETED &&
                          Status != RRS_QUOTE_REJECTED &&
                          !CustomerInvoiceNo &&
                          !VendorInvoiceNo &&
                          RRComplete[CREATE_ACCESS] == 1 &&
                          NotRepairableEnabled &&
                        Status != RRS_NOT_REPAIRABLE
                      "
                      (click)="NotRepairableRR()"
                      class="btn btn-danger btn-sm waves-effect waves-light mr-1"
                    >
                      Not Repairable
                    </button>

                    <button
                      *ngIf="IsActive == 1 && Status == 8"
                      type="button"
                      class="btn btn-purple btn-sm waves-effect mr-1"
                      (click)="onAddMro()"
                    >
                      Create MRO
                    </button>
                    <!-- <button type="button"
                                            *ngIf="(ApprovedQuoteId != 0 && Status != RRS_COMPLETED && CustomerSONo != '' && CustomerSONo != null && CustomerInvoiceNo != '' && (VendorPONo != ''&& VendorPONo != null) && RRComplete[CREATE_ACCESS] == 1) && Status != RRS_NOT_REPAIRABLE"
                                            (click)="CompleteRR(ApprovedQuoteId)"
                                            class="btn btn-success btn-sm waves-effect waves-light mr-1 mb-1">
                                            Complete
                                        </button> -->
                  </div>
                </div>

                <div class="table-responsive">
                  <table class="table table-bordered table-striped mb-0">
                    <thead class="thead-light">
                      <tr>
                        <th width="25%">
                          Current Status : <br />
                          <i
                            style="cursor: pointer"
                            class="mdi mdi-history repair2 bluetxt"
                            (click)="RRcurrentstatus()"
                          ></i>
                          <span> {{ StatusName }}</span>
                        </th>

                        <th width="25%">
                          <div *ngIf="RRShipParts[VIEW_ACCESS] == 1">
                            Shipping Status :<br />
                            <i
                              class="mdi mdi-history bluetxt"
                              style="cursor: pointer"
                              (click)="shippingHistory()"
                              *ngIf="
                                ShippingStatus > 0 &&
                                RRShippingHistory.length > 0
                              "
                            ></i>
                            <span
                              *ngIf="
                                ShippingStatus == 0 ||
                                ShippingStatus == null ||
                                RRShippingHistory.length == 0
                              "
                            >
                              Not Yet Started
                            </span>
                            <span *ngIf="RRShippingHistory.length > 0">
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 1 &&
                                  ShippingIdentityType == 1
                                "
                              >
                                Shipped by Customer
                              </span>
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 1 &&
                                  ShippingIdentityType == 2 &&
                                  ShippingIdentityId != CONST_AH_Group_ID
                                "
                              >
                                Shipped by Vendor
                              </span>
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 1 &&
                                  ShippingIdentityType == 2 &&
                                  ShippingIdentityId == CONST_AH_Group_ID
                                "
                              >
                                Shipped by Aibond
                              </span>
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 2 &&
                                  ShippingIdentityType == 1
                                "
                              >
                                Received by Customer
                              </span>
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 2 &&
                                  ShippingIdentityType == 2 &&
                                  ShippingIdentityId != CONST_AH_Group_ID
                                "
                              >
                                Received by Vendor
                              </span>
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 2 &&
                                  ShippingIdentityType == 2 &&
                                  ShippingIdentityId == CONST_AH_Group_ID
                                "
                              >
                                Received by Aibond
                              </span>

                              <!-- IsPickUp Changes -->
                              <!-- Ready for Pick Up -->
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 3 &&
                                  ShippingIdentityType == 1
                                "
                              >
                                Ready for Pick Up by Customer
                              </span>
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 3 &&
                                  ShippingIdentityType == 2 &&
                                  ShippingIdentityId != CONST_AH_Group_ID
                                "
                              >
                                Ready for Pick Up by Vendor
                              </span>
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 3 &&
                                  ShippingIdentityType == 2 &&
                                  ShippingIdentityId == CONST_AH_Group_ID
                                "
                              >
                                Ready for Pick Up by Aibond
                              </span>

                              <!-- Picked Up  -->
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 4 &&
                                  ShippingIdentityType == 1
                                "
                              >
                                Picked Up by Customer
                              </span>
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 4 &&
                                  ShippingIdentityType == 2 &&
                                  ShippingIdentityId != CONST_AH_Group_ID
                                "
                              >
                                Picked Up by Vendor
                              </span>
                              <span
                                class="blacktxt"
                                *ngIf="
                                  ShippingStatus == 4 &&
                                  ShippingIdentityType == 2 &&
                                  ShippingIdentityId == CONST_AH_Group_ID
                                "
                              >
                                Picked Up by Aibond
                              </span>
                            </span>
                          </div>
                        </th>
                        <th width="55%">
                          <div class="row" style="margin-left: -3px">
                            Part Current Location :
                            <br />
                            <a
                              (click)="onUpdatePartCurrentLocation(1)"
                              class="fa fa-edit"
                              ngbtooltip="Edit Current Location"
                              placement="top"
                              style="
                                cursor: pointer;
                                margin-top: 4px;
                                margin-left: 8px;
                              "
                              *ngIf="
                                IsActive == 1 &&
                                ShippingStatus > 0 &&
                                RRShippingHistory.length == 0
                              "
                            ></a>
                          </div>
                          <img
                            style="margin-right: 5px"
                            src="../../../../assets/images/icons/Parts.png"
                            (click)="partHistory()"
                            *ngIf="
                              ShippingStatus > 0 && RRShippingHistory.length > 0
                            "
                          />

                          <span
                            *ngIf="
                              ShippingStatus == 0 || ShippingStatus == null
                            "
                          >
                            Not Yet Started -
                            <button
                              type="button"
                              *ngIf="IsActive == 1"
                              (click)="onUpdatePartCurrentLocation(0)"
                              class="btn btn-pink btn-xs waves-effect waves-light mr-1"
                            >
                              Add Current Location
                            </button>
                          </span>

                          <span
                            class="bluetxt"
                            *ngIf="
                              ShippingStatus == 2 &&
                              ShippingIdentityId != CONST_AH_Group_ID &&
                              ShippingIdentityType == 2
                            "
                          >
                            Vendor:
                            {{ viewResult.RRInfo[0].ShippingIdentityName }} :
                            {{ vendoraddress.StreetAddress }}
                            {{ vendoraddress.SuiteOrApt }},
                            {{ vendoraddress.City }},
                            {{ vendoraddress.CountryName }} -
                            {{ vendoraddress.Zip }}
                          </span>
                          <span
                            class="bluetxt"
                            *ngIf="
                              ShippingStatus == 2 &&
                              ShippingIdentityId != CONST_AH_Group_ID &&
                              ShippingIdentityType == 1
                            "
                          >
                            Customer:
                            {{ viewResult.RRInfo[0].ShippingIdentityName }} :
                            {{ viewResult.RRInfo[0].ShipToStreetAddress }}
                            {{ vendoraddress.SuiteOrApt }},
                            {{ viewResult.RRInfo[0].ShipToCity }},
                            {{ viewResult.RRInfo[0].ShipToCountry }} -
                            {{ viewResult.RRInfo[0].ShipToZip }}
                          </span>
                          <span
                            class="bluetxt"
                            *ngIf="
                              ShippingStatus == 2 &&
                              ShippingIdentityId == CONST_AH_Group_ID
                            "
                          >
                            Aibond :{{
                              viewResult.RRInfo[0].ShippingIdentityName
                            }}
                            : {{ ahAddress.StreetAddress }}
                            {{ vendoraddress.SuiteOrApt }},
                            {{ ahAddress.City }}, {{ ahAddress.CountryName }} -
                            {{ ahAddress.Zip }}
                          </span>
                          <span class="bluetxt" *ngIf="ShippingStatus == 1">
                            Transit : {{ FromIdentityName }} =>
                            {{ ToIdentityName }} (
                            {{ shippingDetails.ShipFromName }} =>
                            {{ shippingDetails.ShipToName }} )
                          </span>
                          <span class="bluetxt" *ngIf="ShippingStatus == 3">
                            Ready for Pick Up : {{ FromIdentityName }} =>
                            {{ ToIdentityName }} (
                            {{ shippingDetails.ShipFromName }} =>
                            {{ shippingDetails.ShipToName }} )
                          </span>
                          <span class="bluetxt" *ngIf="ShippingStatus == 4">
                            Picked Up : {{ FromIdentityName }} =>
                            {{ ToIdentityName }} (
                            {{ shippingDetails.ShipFromName }} =>
                            {{ shippingDetails.ShipToName }} )
                          </span>
                        </th>
                      </tr>
                    </thead>
                  </table>
                </div>

                <div class="clear">&nbsp;</div>

                <div class="row">
                  <div class="col-xl-6">
                    <div class="row">
                      <div class="col-xl-12">
                        <div class="form-group">
                          <label for="Customer"
                            >Customer <span class="red">*</span></label
                          >
                          <ng-autocomplete
                            class="ng-autocomplete"
                            [isLoading]="isLoading"
                            *ngIf="Status == RRS_GENERATED"
                            [data]="customerList"
                            placeholder="Enter Customer Name"
                            formControlName="CompanyName"
                            name="CompanyName"
                            (selected)="selectEvent($event)"
                            (inputCleared)="clearEvent($event)"
                            [searchKeyword]="keyword"
                            (inputChanged)="onChangeSearch($event)"
                            (inputFocused)="onFocused($event)"
                            [itemTemplate]="itemTemplate"
                            [notFoundTemplate]="notFoundTemplate"
                            debounceTime="1000"
                          >
                          </ng-autocomplete>
                          <span
                            class="text-danger"
                            style="position: relative; top: 31px"
                            *ngIf="
                              (EditFormControl.CompanyName.touched ||
                                submitted) &&
                              EditFormControl.CompanyName.errors?.required
                            "
                          >
                            Customer is required
                          </span>
                          <input
                            type="hidden"
                            name="CustomerId"
                            formControlName="CustomerId"
                          />

                          <ng-template #itemTemplate let-item>
                            <a [innerHTML]="item.CompanyName"></a>
                          </ng-template>

                          <ng-template #notFoundTemplate let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>

                          <!-- <ng-select [items]="customerList" [searchable]="true"
                                                        *ngIf="Status ==RRS_GENERATED" [virtualScroll]="true"
                                                        formControlName="CustomerId" placeholder="Select"
                                                        [(ngModel)]="CustomerId" [readonly]="Status >= RRS_NEED_SOURCED"
                                                        (change)="getCustomerProperties(CustomerId, $event)"
                                                        bindLabel="title" bindValue="CustomerId">
                                                    </ng-select> -->
                          <input
                            type="text"
                            readonly
                            formControlName="CompanyName"
                            name="CompanyName"
                            *ngIf="Status != RRS_GENERATED"
                            class="form-control"
                          />
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xl-12">
                        <div class="form-group">
                          <label for="Customer"
                            >Description <span class="red">*</span></label
                          >
                          <textarea
                            class="form-control"
                            placeholder="Description..."
                            name="RRDescription"
                            formControlName="RRDescription"
                            [(ngModel)]="RRDescription"
                            rows="2"
                          ></textarea>
                          <span
                            class="text-danger"
                            *ngIf="
                              (EditFormControl.RRDescription.touched ||
                                submitted) &&
                              EditFormControl.RRDescription.errors?.required
                            "
                          >
                            Description is required
                          </span>
                        </div>
                      </div>
                      <div class="col-xl-12">
                        <div class="form-group">
                          <label for="Customer"
                            >Customer Stated Issue
                            <span class="red">*</span>
                          </label>
                          <textarea
                            class="form-control"
                            placeholder="Customer Stated Issue..."
                            name="StatedIssue"
                            formControlName="StatedIssue"
                            rows="2"
                          ></textarea>
                          <span
                            class="text-danger"
                            *ngIf="
                              (EditFormControl.StatedIssue.touched ||
                                submitted) &&
                              EditFormControl.StatedIssue.errors?.required
                            "
                          >
                            Customer Stated Issue is required
                          </span>
                        </div>
                      </div>
                    </div>

                    <div class="outerwrap">
                      <div class="row">
                        <div class="col-xl-6">
                          <div class="form-group">
                            <label for="Customer">Department</label>
                            <select
                              class="custom-select"
                              name="DepartmentId"
                              formControlName="DepartmentId"
                            >
                              <option value="" disabled>Select</option>
                              <option
                                *ngFor="let department of departmentList"
                                value="{{ department.CustomerDepartmentId }}"
                              >
                                {{ department.CustomerDepartmentName }}
                              </option>
                            </select>
                          </div>
                        </div>
                        <div class="col-xl-6">
                          <div class="form-group">
                            <label for="Customer">Machine/Asset</label>
                            <select
                              class="custom-select"
                              name="AssetId"
                              formControlName="AssetId"
                            >
                              <option value="" disabled>Select</option>
                              <option
                                *ngFor="let asset of assetList"
                                value="{{ asset.CustomerAssetId }}"
                              >
                                {{ asset.CustomerAssetName }}
                              </option>
                            </select>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-xl-12">
                          <div class="form-group">
                            <label for="Customer">Warranty Recovery :</label>
                            <select
                              class="custom-select"
                              name="IsWarrantyRecovery"
                              formControlName="IsWarrantyRecovery"
                            >
                              <option value="">Select</option>
                              <option
                                value="{{ item.warranty_type_id }}"
                                *ngFor="let item of WarrantyList"
                              >
                                {{ item.warranty_type_Name }}
                              </option>
                            </select>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-xl-12">
                          <div class="form-check form-check-inline">
                            <div class="custom-control custom-checkbox">
                              <input
                                class="custom-control-input"
                                id="IsWarrantyDenied"
                                value="1"
                                formControlName="IsWarrantyDenied"
                                name="IsWarrantyDenied"
                                type="checkbox"
                              />
                              <label
                                class="custom-control-label"
                                for="IsWarrantyDenied"
                              >
                                Warranty denied?
                              </label>
                            </div>
                          </div>
                          <div class="form-check form-check-inline">
                            <div class="custom-control custom-checkbox">
                              <input
                                class="custom-control-input"
                                id="IsRushRepair"
                                value="1"
                                formControlName="IsRushRepair"
                                name="IsRushRepair"
                                type="checkbox"
                              />

                              <label
                                class="custom-control-label"
                                for="IsRushRepair"
                              >
                                Rush Repair
                              </label>
                            </div>
                          </div>

                          <div class="form-check form-check-inline">
                            <div class="custom-control custom-checkbox">
                              <input
                                class="custom-control-input"
                                id="IsCriticalSpare"
                                value="1"
                                formControlName="IsCriticalSpare"
                                name="IsCriticalSpare"
                                type="checkbox"
                              />

                              <label
                                class="custom-control-label"
                                for="IsCriticalSpare"
                              >
                                Critical Spare?
                              </label>
                            </div>
                          </div>

                          <div class="form-check form-check-inline">
                            <div class="custom-control custom-checkbox">
                              <input
                                class="custom-control-input"
                                formControlName="IsRepairTag"
                                id="IsRepairTag"
                                value="1"
                                name="IsRepairTag"
                                type="checkbox"
                              />
                              <label
                                class="custom-control-label"
                                for="IsRepairTag"
                              >
                                Repair Tag
                              </label>
                              <i
                                class="mdi mdi-content-save saveicon2"
                                (click)="onUpdateRRDepartmentWarranty()"
                              ></i>
                            </div>
                          </div>
                        </div>
                        <!-- <div class="col-xl-4">
                                                    <div  class="form-group">
                                                        <div class="custom-control custom-checkbox">
                                                            <input class="custom-control-input"
                                                                formControlName="IsRepairTag" id="IsRepairTag" value="1"
                                                                name="IsRepairTag" type="checkbox">
                                                            <label class="custom-control-label" for="IsRepairTag">
                                                                Repair Tag 
                                                            </label>
                                                            <i class="mdi mdi-content-save saveicon2"
                                                        (click)='onUpdateRRDepartmentWarranty()'></i>
                                                        </div>
                                                        
                                                    </div>
                                                </div> -->
                      </div>
                    </div>
                  </div>

                  <div class="col-xl-6">
                    <div class="form-group">
                      <label for="Customer">Bill To :</label>
                      <ng-select
                        [items]="customerAddressList"
                        [searchable]="true"
                        formControlName="CustomerBillToId"
                        placeholder="Select"
                        [(ngModel)]="CustomerBillToId"
                        bindLabel="title"
                        bindValue="AddressId"
                      >
                      </ng-select>
                    </div>

                    <div class="form-group">
                      <label for="Customer">Ship To :</label>
                      <ng-select
                        [items]="customerAddressList"
                        [searchable]="true"
                        formControlName="CustomerShipToId"
                        placeholder="Select"
                        [(ngModel)]="CustomerShipToId"
                        bindLabel="title"
                        bindValue="AddressId"
                      >
                      </ng-select>
                    </div>

                    <div *ngIf="CustomerReferenceViewEnabled">
                      <label for="Customer" class="text-secondary">
                        Customer References
                      </label>
                      <table class="table-bordered table nowrap">
                        <tbody>
                          <tr>
                            <th>CR #</th>
                            <th>Reference Name</th>
                            <th>Value</th>
                            <th>Action</th>
                          </tr>
                          <tr
                            *ngFor="
                              let item of CustomerRefInfo;
                              let i = index;
                              let last = last
                            "
                          >
                            <td>{{ i + 1 }}</td>
                            <td>{{ item.ReferenceLabelName }}</td>
                            <td>{{ item.ReferenceValue }}</td>
                            <td>
                              <a
                                *ngIf="IsEditCusRefEnabled && IsActive == 1"
                                (click)="editReference(item, i)"
                                class="fa fa-edit"
                                style="cursor: pointer"
                                ngbTooltip="Edit"
                                placement="top"
                              ></a
                              >&nbsp;

                              <a
                                (click)="deleteReference(item.RRReferenceId, i)"
                                *ngIf="
                                  CustomerReferenceDeleteEnabled &&
                                  IsActive == 1
                                "
                                class="fa fa-trash text-danger"
                                style="cursor: pointer"
                                ngbTooltip="Delete"
                                placement="top"
                              ></a>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>

                    <div class="row mt-1 mr-1 float-right">
                      <div class="custom-control custom-switch">
                        <button
                          style="margin-right: 15px"
                          class="btn btn-pink btn-sm waves-effect raa"
                          type="button"
                          *ngIf="
                            CustomerId != '' &&
                            CustomerId != null &&
                            CustomerId != 0 &&
                            customerReferenceList.length < 6 &&
                            CustomerReference[CREATE_ACCESS] == 1 &&
                            CustomerReferenceAddEnabled &&
                            IsActive == 1
                          "
                          (click)="addReferenceType()"
                        >
                          <i class="remixicon-add-fill mrg-5"></i> Add Reference
                          Type
                        </button>
                        <button
                          class="btn btn-primary btn-sm waves-effect"
                          *ngIf="IsActive == 1"
                          type="button"
                          (click)="addReference()"
                        >
                          <i class="remixicon-add-fill mrg-5"></i> Add Reference
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <h4 class="page-title bluetxt mb-10">
                  Repair Parts
                  <!-- <button (click)="addRepairParts()" type="button" class="btn btn-add waves-effect">
                                        <i class="remixicon-add-fill mt-3"></i> Add
                                    </button> -->
                </h4>
                <div *ngIf="addMissingPart">
                  Part #:
                  <span style="color: red">{{
                    viewResult.RRInfo[0].PartNo
                  }}</span>
                  &nbsp;&nbsp; Serial #:
                  <span style="color: red">{{
                    viewResult.RRInfo[0].SerialNo
                  }}</span>
                  &nbsp;&nbsp;
                  <button
                    *ngIf="IsActive == 1"
                    (click)="
                      addMissingPartClick(
                        viewResult.RRInfo[0].PartNo,
                        viewResult.RRInfo[0].SerialNo
                      )
                    "
                    type="button"
                    class="btn btn-primary btn-sm waves-effect"
                  >
                    <i class="remixicon-add-fill mt-3"></i> Add Part
                  </button>
                </div>
                <div class="table-responsive mt-15">
                  <table class="table table-bordered mb-0">
                    <thead class="thead-light">
                      <tr>
                        <th>Part # <span class="red">*</span></th>
                        <!-- <th>Part Description</th> -->
                        <th>Manufacturer</th>
                        <th>Manufacturer Part #</th>
                        <th>Serial # <span class="red">*</span></th>
                        <th>Lead Time</th>
                        <th>Qty</th>
                      </tr>
                    </thead>

                    <tbody>
                      <tr *ngIf="Status == RRS_GENERATED">
                        <td style="width: 23%">
                          <select
                            class="custom-select"
                            name="PartId"
                            [(ngModel)]="PartId"
                            formControlName="PartId"
                            (change)="getPartDetails(PartId)"
                          >
                            <option value="undefined" disabled>
                              Select Part #
                            </option>
                            <option
                              *ngFor="let part of partList"
                              value="{{ part.PartId }}"
                            >
                              {{ part.PartNo }}
                            </option>
                          </select>
                          <input
                            type="hidden"
                            name="RRPartsId"
                            [(ngModel)]="RRPartsId"
                            formControlName="RRPartsId"
                          />
                          <input
                            type="hidden"
                            name="PartNo"
                            [(ngModel)]="PartNo"
                            formControlName="PartNo"
                          />
                          <input
                            type="hidden"
                            name="Price"
                            [(ngModel)]="Price"
                            formControlName="Price"
                          />
                          <input
                            type="hidden"
                            name="Rate"
                            [(ngModel)]="Rate"
                            formControlName="Rate"
                          />

                          <div *ngIf="PartId">
                            <div class="col-xl-12 nopad">
                              <b
                                >PON ({{
                                  viewResult.RRInfo[0].CustomerCurrencySymbol
                                }})</b
                              >
                              :
                            </div>
                            <div class="col-xl-12 nopad-lt">
                              <div class="col-xl-10 nopad-lt float-left">
                                <input
                                  type="text"
                                  style="float: left"
                                  [(ngModel)]="PON"
                                  inputmode="numeric"
                                  pattern="^\d+(\.\d{1,2})?$"
                                  placeholder="0.00"
                                  digitOnly
                                  decimal="true"
                                  [ngModelOptions]="{ standalone: true }"
                                />
                              </div>

                              <div
                                class="col-xl-2 float-left"
                                *ngIf="IsActive == 1"
                              >
                                <i
                                  class="mdi mdi-content-save saveicon"
                                  (click)="onPONUpdate()"
                                ></i>
                              </div>
                            </div>
                          </div>
                          <div *ngIf="PartId">
                            <b
                              >LPP&nbsp;&nbsp; ({{
                                viewResult.RRInfo[0].CustomerCurrencySymbol
                              }})</b
                            >
                            :
                            {{ LPP }}
                          </div>
                        </td>
                        <!-- <td style="width:20%;">
                                                    <textarea class="form-control" placeholder="Description..."
                                                        name="Description" formControlName="Description"
                                                        [(ngModel)]="Description" rows="3"></textarea>
                                                </td> -->
                        <td style="width: 15%">
                          {{ ManufactuerName }}
                          <input
                            type="hidden"
                            name="Manufacturer"
                            [(ngModel)]="Manufacturer"
                            formControlName="Manufacturer"
                          />
                        </td>
                        <td style="width: 17%">
                          <input
                            type="text"
                            class="form-control"
                            name="ManufacturerPartNo"
                            [(ngModel)]="ManufacturerPartNo"
                            formControlName="ManufacturerPartNo"
                            placeholder="Manufacturer Part #"
                          />
                        </td>
                        <td style="width: 15%">
                          <input
                            type="text"
                            class="form-control"
                            name="SerialNo"
                            [(ngModel)]="SerialNo"
                            formControlName="SerialNo"
                            placeholder="Serial #"
                          />
                        </td>
                        <td style="width: 15%">
                          <div class="input-group">
                            <input
                              type="number"
                              min="1"
                              class="form-control"
                              [(ngModel)]="LeadTime"
                              name="LeadTime"
                              formControlName="LeadTime"
                            />
                            <div class="input-group-append">
                              <span class="input-group-text">Day(s)</span>
                            </div>
                          </div>
                        </td>
                        <td style="width: 10%">
                          <input
                            type="text"
                            class="form-control"
                            name="Quantity"
                            digitOnly
                            formControlName="Quantity"
                            [(ngModel)]="Quantity"
                          />
                        </td>
                      </tr>

                      <tr *ngIf="Status == RRS_GENERATED">
                        <td style="padding: 0 !important" colspan="3">
                          <label class="partlabel" for="Description"
                            >Part Description</label
                          >
                          <textarea
                            style="margin: 5px 10px 15px; width: 97%"
                            class="form-control"
                            placeholder="Description..."
                            name="Description"
                            formControlName="Description"
                            [(ngModel)]="Description"
                            rows="3"
                          ></textarea>
                        </td>
                        <td style="padding-bottom: 0 !important" colspan="3">
                          <div class="row">
                            <div class="col-xl-12">
                              <div class="form-group">
                                <label for="Customer">Customer Part #1</label>
                                <input
                                  type="text"
                                  class="form-control w-95"
                                  name="CustomerPartNo1"
                                  formControlName="CustomerPartNo1"
                                  placeholder="Customer Part #1"
                                />
                              </div>
                            </div>
                            <div class="col-xl-12">
                              <div class="form-group">
                                <label for="Customer">Customer Part #2</label>
                                <input
                                  type="text"
                                  class="form-control w-95"
                                  name="CustomerPartNo2"
                                  formControlName="CustomerPartNo2"
                                  placeholder="Customer Part #2"
                                />
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr *ngIf="Status >= RRS_NEED_SOURCED">
                        <td style="width: 23%">
                          <a
                            style="color: #09518e !important; cursor: pointer"
                            (click)="onmapPreferredVendor()"
                            >{{ PartNo }}</a
                          >
                          <input
                            type="hidden"
                            name="RRPartsId"
                            [(ngModel)]="RRPartsId"
                            formControlName="RRPartsId"
                          />
                          <input
                            type="hidden"
                            name="PartId"
                            [(ngModel)]="PartId"
                            formControlName="PartId"
                          />
                          <div *ngIf="PartId">
                            <div class="col-xl-12 nopad">
                              <b>PON ({{ Symbol }})</b> :
                            </div>
                            <div class="col-xl-12 nopad-lt">
                              <div class="col-xl-10 nopad-lt float-left">
                                <input
                                  type="text"
                                  style="float: left"
                                  [(ngModel)]="PON"
                                  inputmode="numeric"
                                  pattern="^\d+(\.\d{1,2})?$"
                                  placeholder="0.00"
                                  digitOnly
                                  decimal="true"
                                  [ngModelOptions]="{ standalone: true }"
                                />
                              </div>
                              <div
                                class="col-xl-2 float-left"
                                *ngIf="IsActive == 1"
                              >
                                <i
                                  class="mdi mdi-content-save saveicon"
                                  (click)="onPONUpdate()"
                                ></i>
                              </div>
                            </div>
                          </div>
                          <div *ngIf="PartId">
                            <b>LPP&nbsp;&nbsp; ({{ Symbol }})</b> : {{ LPP }}
                          </div>
                        </td>
                        <!-- <td style="width: 20%;">
                                                    <span *ngIf="Description">{{Description}}</span>
                                                </td> -->
                        <td style="width: 15%">
                          <span *ngIf="ManufactuerName">{{
                            ManufactuerName
                          }}</span>
                        </td>
                        <td style="width: 17%">
                          <span *ngIf="ManufacturerPartNo"
                            >{{ ManufacturerPartNo }} </span
                          ><br />
                        </td>
                        <td style="width: 15%">
                          <span *ngIf="SerialNo">{{ SerialNo }}</span>
                        </td>
                        <td style="width: 15%">
                          <div class="input-group">
                            <input
                              type="number"
                              class="form-control"
                              name="LeadTime"
                              min="1"
                              formControlName="LeadTime"
                            />
                            <div class="input-group-append">
                              <span class="input-group-text">Day(s)</span>
                            </div>
                          </div>
                        </td>
                        <td style="width: 10%">
                          <span *ngIf="Quantity">{{ Quantity }}</span>
                        </td>
                      </tr>
                      <tr *ngIf="Status >= RRS_NEED_SOURCED">
                        <td style="padding: 0 !important" colspan="3">
                          <label class="partlabel">Part Description</label>
                          <div class="form-group">
                            <span
                              *ngIf="Description"
                              style="margin: 5px 10px 15px; width: 97%"
                            >
                              {{ Description }}
                            </span>
                          </div>
                        </td>
                        <td style="padding-bottom: 0 !important" colspan="3">
                          <div class="row">
                            <div class="col-xl-12">
                              <div class="form-group">
                                <label for="Customer">Customer Part #1</label>
                                <input
                                  type="text"
                                  class="form-control w-95"
                                  name="CustomerPartNo1"
                                  formControlName="CustomerPartNo1"
                                  placeholder="Customer Part #1"
                                />
                              </div>
                            </div>
                            <div class="col-xl-12">
                              <div class="form-group">
                                <label for="Customer">Customer Part #2</label>
                                <input
                                  type="text"
                                  class="form-control w-95"
                                  name="CustomerPartNo2"
                                  formControlName="CustomerPartNo2"
                                  placeholder="Customer Part #2"
                                />
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="row">
                  <div
                    class="col-xl-8 float-left text-danger"
                    *ngIf="
                      (EditFormControl.PartId.touched || submitted) &&
                      EditFormControl.PartId.errors?.required
                    "
                  >
                    Part # is required &nbsp;
                  </div>
                  <div
                    class="col-xl-4 float-right text-danger"
                    *ngIf="
                      (EditFormControl.SerialNo.touched || submitted) &&
                      EditFormControl.SerialNo.errors?.required
                    "
                  >
                    Serial # is required &nbsp;
                  </div>
                </div>
                <!-- <div class="row">
                                    <div class="col-xl-12 mm15">
                                        <div class="col-xl-6 cust-part2"><input type="text" class="form-control w-95"
                                                name="CustomerPartNo1" formControlName="CustomerPartNo1"
                                                placeholder="Customer Part #1">
                                        </div>
                                        <div class="col-xl-6 cust-part2"><input type="text" class="form-control w-95"
                                                name="CustomerPartNo2" formControlName="CustomerPartNo2"
                                                placeholder="Customer Part #2">
                                        </div>
                                    </div>
                                </div> -->

                <div class="clear">&nbsp;</div>

                <h4 class="page-title bluetxt mb-10 mt-2">
                  Contact Information
                </h4>
                <div class="table-responsive mt-15">
                  <table class="table table-bordered mb-0">
                    <thead class="thead-light">
                      <tr>
                        <th>Name</th>
                        <th>Phone</th>
                        <th>Email</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          <select
                            class="custom-select"
                            name="UserId"
                            [(ngModel)]="UserId"
                            formControlName="UserId"
                            (change)="getAdminView($event, UserId)"
                          >
                            <option value="undefined" disabled>Select</option>
                            <option
                              *ngFor="let admin of adminList"
                              value="{{ admin.UserId }}"
                            >
                              {{ admin.title }}
                            </option>
                          </select>
                        </td>
                        <td>
                          <input
                            type="text"
                            class="form-control"
                            name="ContactPhone"
                            [(ngModel)]="ContactPhone"
                            formControlName="ContactPhone"
                          />
                        </td>
                        <td>
                          <input
                            type="text"
                            class="form-control"
                            name="ContactEmail"
                            [(ngModel)]="ContactEmail"
                            formControlName="ContactEmail"
                          />
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <div *ngIf="ApprovedQuoteId && ApprovedQuoteStatus == 2">
                  <div class="clear">&nbsp;</div>
                  <h4 class="page-title bluetxt mb-10">
                    Approved Quote Details
                  </h4>
                  <div class="table-responsive">
                    <table class="table table-bordered table-striped mb-0">
                      <thead class="thead-light">
                        <tr>
                          <th>Part #</th>
                          <th>Part Description</th>
                          <th>Serial #</th>
                          <th>Lead Time</th>
                          <th>Quantity</th>
                          <th width="10%">Unit Price</th>
                          <th>{{ VAT_field_Name }}</th>
                          <th width="10%">Price</th>
                          <th *ngIf="IsDisplayBaseCurrencyValue == 1">
                            Price({{ BaseCurrencySymbol }})
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr
                          *ngFor="
                            let quote of ApprovedQuoteItems;
                            let i = index
                          "
                        >
                          <td>{{ quote.PartNo }}</td>
                          <td>{{ quote.Description }}</td>
                          <td>{{ quote.SerialNo }}</td>
                          <td>{{ quote.LeadTime }}</td>
                          <td>{{ quote.Quantity }}</td>
                          <td>{{ quote.CurrencySymbol }} {{ quote.Rate }}</td>
                          <td>
                            {{ quote.CurrencySymbol }} {{ quote.Tax }} ({{
                              quote.ItemTaxPercent
                            }}%)
                          </td>
                          <td>{{ quote.CurrencySymbol }} {{ quote.Price }}</td>
                          <td *ngIf="IsDisplayBaseCurrencyValue == 1">
                            {{ quote.CurrencySymbol }}
                            {{ quote.BasePrice }}
                          </td>
                        </tr>
                        <tr>
                          <td colspan="3">&nbsp;</td>
                          <td colspan="6">
                            <table class="table table-borderless">
                              <!-- <tr>
                                                                <th>Sub Total :</th>
                                                                <td>$ {{SubTotal}}</td>
                                                            </tr>
                                                            <tr>
                                                                <th>AH Processing Fee :</th>
                                                                <td>$ {{AdditionalCharge}}</td>
                                                            </tr>
                                                            <tr>
                                                                <th>Total Tax :</th>
                                                                <td>$ {{TotalTax}}</td>
                                                            </tr>
                                                            <tr>
                                                                <th>Discount :</th>
                                                                <td>$ {{Discount}}</td>
                                                            </tr>
                                                            <tr>
                                                                <th>Shipping :</th>
                                                                <td>$ {{Shipping}}</td>
                                                            </tr> -->

                              <tr>
                                <th>Grand Total :</th>
                                <td>
                                  {{ ApprovedQuoteInfo[0].CurrencySymbol }}
                                  {{ QuoteGrandTotal }}
                                </td>
                              </tr>
                              <tr *ngIf="IsDisplayBaseCurrencyValue == 1">
                                <th>Grand Total({{ BaseCurrencySymbol }}) :</th>
                                <td>
                                  {{ BaseCurrencySymbol }}
                                  {{ ApprovedQuoteInfo[0].BaseGrandTotal }}
                                </td>
                              </tr>
                            </table>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div class="clear">&nbsp;</div>

                <!-- <div *ngIf="RRCustomerFollowup[VIEW_ACCESS] == 1 || RRVendorFollowup[VIEW_ACCESS] == 1">
                                    <h4 class="page-title bluetxt mb-10">Follow Up</h4>
                                    <div class="table-responsive mt-15">
                                        <table class="table table-bordered table-striped mb-0">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>Type</th>
                                                    <th>To</th>
                                                    <th>Subject</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody *ngFor="let follow of VendorFollowup;let i=index;">
                                                <tr>
                                                    <td>{{follow.IdentityTypeName}}</td>
                                                    <td>{{follow.ToEmail}}</td>
                                                    <td>{{follow.Subject}}</td>
                                                    <td>
                                                        <a (click)="editFollowupNotes(follow.FollowupId,i)"
                                                            *ngIf="(RRCustomerFollowup[MODIFY_ACCESS] == 1 && follow.IdentityType == 1) || (RRVendorFollowup[MODIFY_ACCESS] == 1 && follow.IdentityType == 2)"
                                                            class="fas fa-envelope-open-text" ngbTooltip="Edit"
                                                            placement="top"></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tbody *ngIf="VendorFollowup?.length == 0">
                                                <tr>
                                                    <td colspan="5" class="no-data-available">No data!</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div> -->

                <div>
                  <h4 class="page-title bluetxt mb-10">
                    Follow Up Notes
                    <button
                      (click)="addFollowupNotes()"
                      type="button"
                      class="btn btn-add waves-effect"
                      *ngIf="IsActive == 1"
                    >
                      <i class="remixicon-add-fill mt-3"></i> Add
                    </button>
                  </h4>
                  <div class="table-responsive mt-15">
                    <table class="table table-bordered table-striped mb-0">
                      <thead class="thead-light">
                        <tr>
                          <th>Notes</th>
                          <th>Attachment</th>
                          <th>Added By</th>
                          <th>Added Date</th>
                          <th>Action</th>
                        </tr>
                      </thead>
                      <tbody
                        *ngFor="let item of FollowupNotesInfo; let i = index"
                      >
                        <tr>
                          <td class="linebreak">{{ item.Notes }}</td>
                          <td>
                            <a href="{{ item.FileUrl }}" target="_blank">{{
                              item.FileName
                            }}</a>
                          </td>
                          <td>
                            {{ item.FirstName }} {{ item.LastName }} ({{
                              item.Username
                            }})
                          </td>
                          <td>
                            {{ item.Created | date : "MMM d, y, h:mm a" }}
                          </td>
                          <td>
                            <a
                              (click)="editFollowUpNotes(item, i)"
                              class="fa fa-edit"
                              *ngIf="
                                item.CreatedBy == CreatedBy && IsActive == 1
                              "
                              ngbTooltip="Edit"
                              placement="top"
                            ></a
                            >&nbsp;
                            <a
                              (click)="
                                deleteFollowupNotes(item.FollowUpNoteId, i)
                              "
                              *ngIf="
                                item.CreatedBy == CreatedBy && IsActive == 1
                              "
                              class="fa fa-trash text-danger"
                              ngbTooltip="Delete"
                              placement="top"
                            ></a>
                          </td>
                        </tr>
                      </tbody>
                      <tbody *ngIf="FollowupNotesInfo?.length == 0">
                        <tr>
                          <td colspan="5" class="no-data-available">
                            No data!
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div class="clear">&nbsp;</div>

                <div *ngIf="RRNotes[VIEW_ACCESS] == 1">
                  <h4 class="page-title bluetxt mb-10">
                    Notes
                    <button
                      (click)="addNotes()"
                      type="button"
                      class="btn btn-add waves-effect"
                      *ngIf="RRNotes[CREATE_ACCESS] == 1 && IsActive == 1"
                    >
                      <i class="remixicon-add-fill mt-3"></i> Add
                    </button>
                  </h4>
                  <div class="table-responsive mt-15">
                    <table class="table table-bordered table-striped mb-0">
                      <thead class="thead-light">
                        <tr>
                          <th>Notes Type</th>
                          <th>Notes</th>
                          <!-- <th>Attachment</th> -->
                          <th>Notes Added By</th>
                          <th>Notes Added Date</th>
                          <th>Action</th>
                        </tr>
                      </thead>
                      <tbody *ngFor="let note of RRNotesInfo; let i = index">
                        <tr>
                          <td>{{ note.NotesTypeName }}</td>
                          <td class="linebreak">{{ note.Notes }}</td>
                          <!-- <td>
                                                        <span *ngIf="note.FileMimeType == 'application/pdf'">
                                                            <a href="{{note.FileUrl}}" target="_blank">
                                                                <img src="assets/images/attachment/{{attachmentThumb['application/pdf'].thumb}}"
                                                                    class="img-fluid" ngbTooltip="{{note.FileName}}"
                                                                    width="25" alt="work-thumbnail">
                                                            </a>
                                                        </span>
                                                        <span *ngIf="note.FileMimeType == 'image/jpeg'">
                                                            <a href="{{note.FileUrl}}" target="_blank">
                                                                <img src="{{note.FileUrl}}" class="img-fluid"
                                                                    ngbTooltip="{{note.FileName}}" width="25"
                                                                    alt="work-thumbnail">
                                                            </a>
                                                        </span>
                                                        <span *ngIf="note.FileMimeType == 'image/png'">
                                                            <a href="{{note.FileUrl}}" target="_blank">
                                                                <img src="{{note.FileUrl}}" class="img-fluid"
                                                                    ngbTooltip="{{note.FileName}}" width="25"
                                                                    alt="work-thumbnail">
                                                            </a>
                                                        </span>
                                                        <span *ngIf="note.FileMimeType== 'application/msword'">
                                                            <a href="{{note.FileUrl}}" target="_blank">
                                                                <img src="assets/images/attachment/{{attachmentThumb['application/msword'].thumb}}"
                                                                    class="img-fluid" ngbTooltip="{{note.FileName}}"
                                                                    width="25" alt="work-thumbnail">
                                                            </a>
                                                        </span>
                                                        <span *ngIf="note.FileMimeType == 'application/vnd.ms-excel'">
                                                            <a href="{{note.FileUrl}}" target="_blank">
                                                                <img src="assets/images/attachment/{{attachmentThumb['application/vnd.ms-excel'].thumb}}"
                                                                    class="img-fluid" ngbTooltip="{{note.FileName}}"
                                                                    width="25" alt="work-thumbnail">
                                                            </a>
                                                        </span>
                                                        <span *ngIf="note.FileMimeType == 'text/csv'">
                                                            <a href="{{note.FileUrl}}" target="_blank">
                                                                <img src="assets/images/attachment/{{attachmentThumb['text/csv'].thumb}}"
                                                                    class="img-fluid" ngbTooltip="{{note.FileName}}"
                                                                    width="25" alt="work-thumbnail">
                                                            </a>
                                                        </span>
                                                    </td> -->
                          <td>
                            {{ note.FirstName }} {{ note.LastName }} ({{
                              note.Username
                            }})
                          </td>
                          <td>
                            {{ note.Created | date : "MMM d, y, h:mm a" }}
                          </td>
                          <td>
                            <a
                              (click)="editNotes(note, i)"
                              class="fa fa-edit"
                              *ngIf="
                                RRNotes[MODIFY_ACCESS] == 1 &&
                                note.CreatedBy == CreatedBy &&
                                IsActive == 1
                              "
                              ngbTooltip="Edit"
                              placement="top"
                            ></a
                            >&nbsp;
                            <a
                              (click)="deleteNotes(note.NotesId, i)"
                              *ngIf="
                                RRNotes[DELETE_ACCESS] == 1 &&
                                note.CreatedBy == CreatedBy &&
                                IsActive == 1
                              "
                              class="fa fa-trash text-danger"
                              ngbTooltip="Delete"
                              placement="top"
                            ></a>
                          </td>
                        </tr>
                      </tbody>
                      <tbody *ngIf="RRNotesInfo?.length == 0">
                        <tr>
                          <td colspan="5" class="no-data-available">
                            No data!
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div class="clear">&nbsp;</div>

                <div *ngIf="RRWarranty[VIEW_ACCESS] == 1">
                  <h4 class="page-title bluetxt mb-10">Warranty Info</h4>
                  <div class="table-responsive mt-15">
                    <table class="table table-bordered table-striped mb-0">
                      <thead class="thead-light">
                        <tr>
                          <th>Warranty Start Date</th>
                          <th>Warranty End Date</th>
                          <th>Warranty Period</th>
                          <th>Action</th>
                        </tr>
                      </thead>
                      <tbody
                        *ngFor="let warranty of WarrantyInfo; let i = index"
                      >
                        <tr>
                          <td>{{ warranty.WarrantyStartDate }}</td>
                          <td>{{ warranty.WarrantyEndDate }}</td>
                          <td>
                            {{ warranty.WarrantyPeriod | monthTransform }}
                          </td>
                          <td>
                            <a
                              (click)="editWarranty(warranty, i)"
                              class="fa fa-edit"
                              *ngIf="
                                IsActive == 1 && RRWarranty[MODIFY_ACCESS] == 1
                              "
                              ngbTooltip="Edit"
                              placement="top"
                            ></a
                            >&nbsp;
                            <a
                              (click)="deleteWarranty(warranty.WarrantyId, i)"
                              *ngIf="
                                IsActive == 1 && RRWarranty[DELETE_ACCESS] == 1
                              "
                              class="fa fa-trash text-danger"
                              ngbTooltip="Delete"
                              placement="top"
                            ></a>
                          </td>
                        </tr>
                      </tbody>
                      <tbody *ngIf="WarrantyInfo?.length == 0">
                        <tr>
                          <td colspan="5" class="no-data-available">
                            No data!
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div class="clear">&nbsp;</div>
                <div *ngIf="RRAtachment[VIEW_ACCESS] == 1">
                  <h4 class="page-title bluetxt mb-10">
                    Attachments
                    <button
                      type="button"
                      *ngIf="IsActive == 1 && RRAtachment[CREATE_ACCESS] == 1"
                      (click)="addAttachment()"
                      class="btn btn-add waves-effect"
                    >
                      <i class="remixicon-add-fill mt-3"></i>Add
                    </button>
                  </h4>
                  <div class="table-responsive mt-15">
                    <table class="table table-bordered table-striped mb-0">
                      <thead class="thead-light">
                        <tr>
                          <th>Type</th>
                          <th class="linebreak">Description</th>
                          <th>Attachment</th>
                          <th>Action</th>
                        </tr>
                      </thead>
                      <tbody
                        *ngFor="let attachment of AttachmentList; let i = index"
                      >
                        <tr>
                          <td>{{ attachment.AttachmentTypeName }}</td>
                          <td>{{ attachment.AttachmentDesc }}</td>
                          <td>
                            <a
                              href="{{ attachment.Attachment }}"
                              target="_blank"
                              >{{ attachment.AttachmentOriginalFile }}</a
                            >
                          </td>
                          <td>
                            <a
                              (click)="editAttachment(attachment, i)"
                              class="fa fa-edit"
                              *ngIf="
                                IsActive == 1 && RRAtachment[MODIFY_ACCESS] == 1
                              "
                              ngbTooltip="Edit"
                              placement="top"
                            ></a
                            >&nbsp;
                            <a
                              (click)="
                                deleteAttachment(attachment.AttachmentId, i)
                              "
                              *ngIf="
                                IsActive == 1 && RRAtachment[DELETE_ACCESS] == 1
                              "
                              class="fa fa-trash text-danger"
                              ngbTooltip="Delete"
                              placement="top"
                            ></a>
                          </td>
                        </tr>
                      </tbody>
                      <tbody *ngIf="AttachmentList?.length == 0">
                        <tr>
                          <td colspan="5" class="no-data-available">
                            No data!
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="clear">&nbsp;</div>

                <div *ngIf="RRAtachment[VIEW_ACCESS] == 1">
                  <h4 class="page-title bluetxt mb-10">Customer Attachments</h4>
                  <div class="table-responsive mt-15">
                    <table class="table table-bordered table-striped mb-0">
                      <thead class="thead-light">
                        <tr>
                          <th>Attachment</th>
                          <th class="linebreak">Description</th>
                          <th>Attachment Added By</th>
                          <th>Attachment Added Date</th>
                        </tr>
                      </thead>
                      <tbody
                        *ngFor="
                          let attachment of RRCustomerAttachment;
                          let i = index
                        "
                      >
                        <tr>
                          <td>
                            <a
                              href="{{ attachment.Attachment }}"
                              target="_blank"
                              >{{ attachment.AttachmentOriginalFile }}</a
                            >
                          </td>
                          <td>{{ attachment.AttachmentDesc }}</td>
                          <td>{{ attachment.AddedBy }}</td>
                          <td>{{ attachment.AddedDate }}</td>
                        </tr>
                      </tbody>
                      <tbody *ngIf="RRCustomerAttachment?.length == 0">
                        <tr>
                          <td colspan="5" class="no-data-available">
                            No data!
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-3 col-lg-3 nopad-lt">
              <div class="repair-right">
                <div class="row">
                  <div class="col-xl-12">
                    <div class="example__body">
                      <div class="example__image" *ngIf="RRImages.length > 0">
                        <div class="zoom-left">
                          <img
                            [src]="currentImage.value.img"
                            alt=""
                            width="100%"
                            [redZoom]="currentImage.value.img"
                            redZoomClass="red-zoom--style--window"
                            [redZoomLazy]="true"
                            class="zoom"
                          />
                        </div>
                      </div>

                      <div class="radio-image" *ngIf="RRImages.length > 0">
                        <div style="padding: 0" class="col-xl-12">
                          <div
                            class="col-xl-2"
                            style="float: left !important"
                            *ngFor="let image of RRImages; let i = index"
                          >
                            <label
                              style="
                                cursor: pointer;
                                margin-bottom: 0px !important;
                              "
                              (click)="onImage(i, image.RRImageId, image)"
                            >
                              <a style="cursor: pointer">
                                <span
                                  class="radio-thumb custom-radio"
                                  (click)="onImage(i, image.RRImageId, image)"
                                >
                                  <input
                                    style="
                                      position: absolute;
                                      opacity: 1;
                                      cursor: pointer !important;
                                    "
                                    id="{{ image.RRImageId }}"
                                    [checked]="
                                      image.IsPrimaryImage == 1 ? true : false
                                    "
                                    name="IsPrimaryImage"
                                    type="radio"
                                    (change)="
                                      onImage(i, image.RRImageId, image)
                                    "
                                  />
                                  &nbsp; &nbsp; &nbsp;
                                </span>
                              </a>
                            </label>
                            <br />

                            <label>
                              <a
                                (click)="onImageDelete(i, image.RRImageId)"
                                style="cursor: pointer"
                              >
                                <span class="delhover">
                                  <i class="fa fa-times"></i>
                                </span>
                              </a>

                              <input
                                type="radio"
                                [formControl]="currentImage"
                                name="gallery"
                                [value]="image"
                              />
                              <span>
                                <img src="{{ image.img }}" alt="Thumbnail" />
                              </span>
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-xl-12 mt-2 nopad-rt">
                    <ngb-accordion #acc="ngbAccordion">
                      <!-- activeIds="config-panel-one"-->
                      <ngb-panel title="+ Add Images" id="config-panel-one">
                        <ng-template ngbPanelContent>
                          <div class="row">
                            <div
                              class="col-sm-3"
                              *ngFor="
                                let vattachment of RRImagesList;
                                let i = index
                              "
                            >
                              <span
                                *ngIf="vattachment.mimetype == 'image/jpeg'"
                              >
                                <a
                                  href="{{ vattachment.path }}"
                                  target="_blank"
                                >
                                  <img
                                    src="{{ vattachment.path }}"
                                    class="img-fluid"
                                    ngbTooltip="{{ vattachment.originalname }}"
                                    width="200"
                                    alt="work-thumbnail"
                                  />
                                </a>
                              </span>
                              <span *ngIf="vattachment.mimetype == 'image/png'">
                                <a
                                  href="{{ vattachment.path }}"
                                  target="_blank"
                                >
                                  <img
                                    src="{{ vattachment.path }}"
                                    class="img-fluid"
                                    ngbTooltip="{{ vattachment.originalname }}"
                                    width="200"
                                    alt="work-thumbnail"
                                  />
                                </a>
                              </span>
                              <br />
                            </div>
                          </div>
                          <input
                            type="file"
                            multiple="multiple"
                            class="form-control"
                            accept="image/png,image/jpeg"
                            name="RRImage"
                            (change)="fileProgressMultiple($event)"
                          />
                          <i class="fa fa-spinner fa-spin" *ngIf="spinner"></i>
                        </ng-template>
                      </ngb-panel>
                    </ngb-accordion>
                  </div>
                </div>

                <!-- Status 2 [Assign Vendor] - Start -->
                <div style="height: 1px" class="clear">&nbsp;</div>
                <div
                  class="row ml-1 mt-1"
                  *ngIf="showVendor && RRAssignVendor[VIEW_ACCESS] == 1"
                >
                  <!-- <h3 *ngIf="suggestedVendors">Suggested Vendor</h3>
                                    <span *ngIf="suggestedVendors">{{suggestedVendors}}</span>
                                    <br> -->
                  <h3>Vendor Details</h3>
                  <!-- <div class="col-xl-12 nopad mt-1 mb-2" *ngIf="((!VendorId || VendorId == 0 ) && addButton)"> -->
                  <div
                    class="col-xl-12 nopad mt-1 mb-2"
                    *ngIf="
                      addButton &&
                      RRAssignVendor[CREATE_ACCESS] == 1 &&
                      Status != RRS_NOT_REPAIRABLE
                    "
                  >
                    <div class="col-xl-8 nopad float-left">
                      <ng-select
                        [items]="vendorList"
                        name="VendorId"
                        [(ngModel)]="VendorId"
                        [ngModelOptions]="{ standalone: true }"
                        placeholder="Select"
                        bindLabel="title"
                        bindValue="VendorId"
                        [searchable]="true"
                      >
                      </ng-select>
                    </div>

                    <div class="col-xl-4 float-right">
                      <button
                        *ngIf="IsActive == 1"
                        style="margin-top: 2px"
                        [disabled]="AddVendorbtnDisabled"
                        [ngClass]="{
                          class: AddVendorbtnDisabled
                            ? 'btn btn-light btn-form waves-effect mr-1'
                            : 'btn btn-success btn-form waves-effect mr-1'
                        }"
                        (click)="addVendor()"
                        type="button"
                        class="btn btn-success btn-form waves-effect mr-1"
                      >
                        <i class="remixicon-add-fill"></i> Add
                      </button>
                    </div>
                    <div class="text-danger" *ngIf="selectVendor == 'Error'">
                      Vendor selection is required
                    </div>
                    <div *ngIf="preferredvendorMessage == 'Error'">
                      <p class="text-danger">
                        Preferred vendor is not available for the part
                        {{ PartNo }}.
                      </p>
                      <a
                        style="color: #09518e !important; cursor: pointer"
                        (click)="onmapPreferredVendor()"
                        >Click here to select the Preferred Vendor</a
                      >
                    </div>
                  </div>

                  <!-- <div class="table-responsive" *ngIf="RRVendorId"> Enable this after API fix -->
                  <div style="position: relative; width: 100%">
                    <div
                      class="table-responsive"
                      *ngIf="selectedVendor && VendorsInfo.length > 0"
                    >
                      <table
                        *ngFor="let vendor of VendorsInfo; let i = index"
                        style="border-collapse: separate; border-spacing: 0 1em"
                        class="table table-bordered mb-2"
                      >
                        <tbody>
                          <tr
                            [ngClass]="{
                              'bg-approved':
                                ApprovedVendorId == vendor.VendorId &&
                                ApprovedRRVendorId == vendor.RRVendorId,
                              'bg-vendor':
                                vendor.Status != VENDOR_STATUS_REJECTED,
                              'bg-vendor-rejected':
                                vendor.Status == VENDOR_STATUS_REJECTED ||
                                VendorId != vendor.VendorId,
                              'bg-rejected':
                                VendorId == vendor.VendorId &&
                                vendor.Status == VENDOR_STATUS_REJECTED &&
                                vendor.RejectedStatus == 0
                            }"
                          >
                            <!--  && ApprovedVendorId != vendor.VendorId -->
                            <div
                              class="ribbon-box"
                              *ngIf="vendor.DirectedVendor != '-'"
                            >
                              <div class="ribbon-two ribbon-two-success">
                                <span>Directed</span>
                              </div>
                            </div>
                            <td class="appspc">
                              <div class="mt-1">
                                <span class="float-left">
                                  <img
                                    src="{{ vendor.ProfilePhoto }}"
                                    class="avatar-sm img-thumbnail rounded-circle"
                                    onerror="this.onerror=null;this.src='assets/images/icons/Vendor.png';"
                                  />
                                  &nbsp;
                                  <a class="font-weight-bold mb-1">
                                    {{ vendor.VendorName }}
                                    <span *ngIf="vendor.VendorShipIdLocked > 0"
                                      ><a (click)="unlockShippingAddress(1)"
                                        ><i
                                          class="fa fa-unlock"
                                          aria-hidden="true"
                                          ngbTooltip="Unlock vendor ship address"
                                        ></i></a
                                    ></span>
                                    <br />
                                    <span class="text-pink">{{
                                      vendor.VendorCountryName
                                    }}</span>
                                  </a>
                                  &nbsp;
                                  <span
                                    style="
                                      color: red;
                                      font-weight: 800 !important;
                                    "
                                    class="mb-1 mr-2"
                                    *ngIf="vendor.VendorType == 'OEM'"
                                    >{{ vendor.VendorType }}</span
                                  >
                                  <span
                                    style="
                                      color: #f672a7;
                                      font-weight: 800 !important;
                                    "
                                    class="mb-1 mr-2"
                                    *ngIf="vendor.IsRMARequired == '1'"
                                    >RMA Required</span
                                  >
                                  <span
                                    style="
                                      color: #6559cc;
                                      font-weight: 800 !important;
                                    "
                                    class="mb-1 mr-2"
                                    *ngIf="vendor.IsFlatRateRepair == '1'"
                                    >Flat Rate Repair
                                  </span>
                                </span>
                                <!-- <span class="float-right mt-1"
                                                                    *ngIf="(ShippingIdentityId != vendor.VendorId && VendorId == vendor.VendorId && vendor.RRVendorId && vendor.Status == VENDOR_STATUS_ASSIGNED) && RRAssignVendor[DELETE_ACCESS] == 1">
                                                                    <a *ngIf="IsActive==1"
                                                                        (click)="removeVendor(vendor.RRVendorId)">
                                                                        <i class="fa fa-trash text-danger"
                                                                            aria-hidden="true"
                                                                            ngbTooltip="Remove Vendor"></i>
                                                                    </a>
                                                                </span> -->
                                <span
                                  class="float-right font-weight-bold mt-1"
                                  *ngIf="
                                    vendor.Status == VENDOR_STATUS_REJECTED &&
                                    vendor.RejectedStatus > 0
                                  "
                                >
                                  <img
                                    src="assets/images/icons/Rejected.png"
                                    ngbTooltip="{{ vendor.RejectedStatusName }}"
                                  />
                                  <!-- <i class="fa fa-times redclose" aria-hidden="true"
                                                                    ngbTooltip="Vendor Quote Rejected"></i>   && vendor.RejectedStatus < CUSTOMER_QUOTE_REJECTED-->
                                </span>
                                <!-- (VendorId == vendor.VendorId && QuoteId && QuoteCustomerStatus == 3) -->
                                <span
                                  class="float-right mt-1"
                                  *ngIf="
                                    ApprovedVendorId == vendor.VendorId &&
                                    ApprovedRRVendorId == vendor.RRVendorId &&
                                    vendor.Status != VENDOR_STATUS_REJECTED
                                  "
                                >
                                  <img
                                    src="assets/images/icons/Approved.png"
                                    ngbTooltip="Customer Quote Approved"
                                  />
                                  <!-- <i class="fa fa-check greentick" aria-hidden="true"
                                                                    ngbTooltip="Customer Quote Approved"></i> -->
                                </span>

                                <div class="clear">&nbsp;</div>

                                <div class="row mb-0">
                                  <div class="col-6">
                                    <h5>
                                      Vendor Reference # &nbsp;
                                      <!-- <a href="{{vendor.VendorRefAttachment}}"
                                                                        target="_blank"
                                                                        *ngIf="vendor.VendorRefAttachment != '' && vendor.VendorRefAttachment != null"><i
                                                                            class="fas fa-link"></i></a> -->
                                    </h5>
                                  </div>

                                  <div class="col-6">
                                    <div class="row">
                                      <div class="col-xl-12 nopad-lt">
                                        <input
                                          type="text"
                                          class="form-control"
                                          name="VendorRefNo"
                                          [ngModelOptions]="{
                                            standalone: true
                                          }"
                                          [(ngModel)]="vendor.VendorRefNo"
                                          (change)="
                                            updateVendorReference(
                                              vendor.RRVendorId,
                                              $event
                                            )
                                          "
                                        />
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="clear">&nbsp;</div>
                                <div
                                  *ngIf="
                                    vendor.VendorRefAttachment != '' &&
                                    vendor.VendorRefAttachment != null
                                  "
                                >
                                  <div class="row">
                                    <div class="col-12">
                                      <h5>
                                        <i class="mdi mdi-file-pdf-outline"></i
                                        >&nbsp; Attachment :&nbsp;
                                      </h5>
                                    </div>
                                  </div>
                                  <div class="row mb-0">
                                    <div class="col-12">
                                      <div style="padding: 0 11px 11px">
                                        <a
                                          href="{{
                                            vendor.VendorRefAttachment
                                          }}"
                                          target="_blank"
                                          *ngIf="
                                            vendor.VendorRefAttachment != '' &&
                                            vendor.VendorRefAttachment != null
                                          "
                                          >{{ vendor.VendorRefName }}</a
                                        >
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div
                                  class="clear"
                                  *ngIf="
                                    vendor.VendorRefAttachment != '' &&
                                    vendor.VendorRefAttachment != null
                                  "
                                >
                                  &nbsp;
                                </div>

                                <div *ngIf="RRVendorAttachmentList.length > 0">
                                  <div class="example__body">
                                    <h5 style="margin-bottom: 10px">
                                      Vendor Attachment
                                    </h5>

                                    <div class="">
                                      <div
                                        style="padding: 0"
                                        class="col-12 videocol"
                                      >
                                        <div
                                          *ngFor="
                                            let vattachment of RRVendorAttachmentList;
                                            let i = index
                                          "
                                        >
                                          <div
                                            class="row mt-1"
                                            *ngIf="
                                              vattachment.VendorId ==
                                              vendor.VendorId
                                            "
                                          >
                                            <div
                                              class="col-xl-12"
                                              *ngIf="
                                                vattachment.AttachmentMimeType ==
                                                'video/mp4'
                                              "
                                            >
                                              <label>
                                                <video
                                                  height="200"
                                                  preload="none"
                                                  controls
                                                  (canplay)="
                                                    pauseVideo(videoplayer)
                                                  "
                                                  #videoPlayer
                                                >
                                                  <source
                                                    src="{{
                                                      vattachment.AttachmentPath
                                                    }}"
                                                    type="video/mp4"
                                                  />
                                                  <!-- <span
                                                                                                        class="delhover"
                                                                                                        (click)="onVendorAttachementDelete(i, vattachment.RRVendorAttachmentId)">
                                                                                                        <i
                                                                                                            class="fa fa-times"></i>
                                                                                                    </span> -->
                                                </video>
                                                <span
                                                  class="delhover del2"
                                                  (click)="
                                                    onVendorAttachementDelete(
                                                      i,
                                                      vattachment.RRVendorAttachmentId
                                                    )
                                                  "
                                                >
                                                  <i class="fa fa-times"></i>
                                                </span>
                                              </label>
                                            </div>
                                            <div
                                              class="col-xl-12"
                                              *ngIf="
                                                vattachment.AttachmentMimeType ==
                                                'video/MPEG-4'
                                              "
                                            >
                                              <label>
                                                <video
                                                  height="200"
                                                  preload="none"
                                                  controls
                                                  (canplay)="
                                                    pauseVideo(videoplayer)
                                                  "
                                                  #videoPlayer
                                                >
                                                  <source
                                                    src="{{
                                                      vattachment.AttachmentPath
                                                    }}"
                                                    type="video/MPEG-4"
                                                  />
                                                  <span
                                                    class="delhover"
                                                    (click)="
                                                      onVendorAttachementDelete(
                                                        i,
                                                        vattachment.RRVendorAttachmentId
                                                      )
                                                    "
                                                  >
                                                    <i class="fa fa-times"></i>
                                                  </span>
                                                </video>
                                              </label>
                                            </div>
                                          </div>
                                          <div
                                            class="row mt-1"
                                            *ngIf="
                                              vattachment.VendorId ==
                                              vendor.VendorId
                                            "
                                          >
                                            <div
                                              class="col-xl-12"
                                              *ngIf="
                                                vattachment.AttachmentMimeType ==
                                                'audio/mpeg'
                                              "
                                            >
                                              <label>
                                                <audio controls>
                                                  <source
                                                    src="{{
                                                      vattachment.AttachmentPath
                                                    }}"
                                                    type="audio/mpeg"
                                                  />
                                                  <span
                                                    class="delhover"
                                                    (click)="
                                                      onVendorAttachementDelete(
                                                        i,
                                                        vattachment.RRVendorAttachmentId
                                                      )
                                                    "
                                                  >
                                                    <i class="fa fa-times"></i>
                                                  </span>
                                                </audio>
                                              </label>
                                            </div>
                                          </div>
                                          <div
                                            class="row mt-1"
                                            *ngIf="
                                              vattachment.VendorId ==
                                              vendor.VendorId
                                            "
                                          >
                                            <span
                                              *ngIf="
                                                vattachment.AttachmentMimeType ==
                                                'application/pdf'
                                              "
                                            >
                                              <a
                                                href="{{
                                                  vattachment.AttachmentPath
                                                }}"
                                                target="_blank"
                                                style="cursor: pointer"
                                              >
                                                <img
                                                  src="assets/images/attachment/{{
                                                    attachmentThumb[
                                                      'application/pdf'
                                                    ].thumb
                                                  }}"
                                                  class="img-fluid"
                                                  ngbTooltip="{{
                                                    vattachment.AttachmentOriginalFile
                                                  }}"
                                                  width="200"
                                                  alt="work-thumbnail"
                                                />
                                                <span
                                                  class="delhover"
                                                  (click)="
                                                    onVendorAttachementDelete(
                                                      i,
                                                      vattachment.RRVendorAttachmentId
                                                    )
                                                  "
                                                >
                                                  <i class="fa fa-times"></i>
                                                </span>
                                              </a>
                                            </span>
                                            <div class="col-xl-12 timg">
                                              <label>
                                                <span
                                                  *ngIf="
                                                    vattachment.AttachmentMimeType ==
                                                    'image/jpeg'
                                                  "
                                                >
                                                  <a
                                                    href="{{
                                                      vattachment.AttachmentPath
                                                    }}"
                                                    target="_blank"
                                                    style="cursor: pointer"
                                                  >
                                                    <img
                                                      src="{{
                                                        vattachment.AttachmentPath
                                                      }}"
                                                      class="img-fluid"
                                                      ngbTooltip="{{
                                                        vattachment.AttachmentOriginalFile
                                                      }}"
                                                      width="200"
                                                      alt="work-thumbnail"
                                                    />
                                                    <span
                                                      class="delhover"
                                                      (click)="
                                                        onVendorAttachementDelete(
                                                          i,
                                                          vattachment.RRVendorAttachmentId
                                                        )
                                                      "
                                                    >
                                                      <i
                                                        class="fa fa-times"
                                                      ></i>
                                                    </span>
                                                  </a>
                                                </span>
                                              </label>
                                            </div>

                                            <span
                                              *ngIf="
                                                vattachment.AttachmentMimeType ==
                                                'image/png'
                                              "
                                            >
                                              <a
                                                href="{{
                                                  vattachment.AttachmentPath
                                                }}"
                                                target="_blank"
                                                style="cursor: pointer"
                                              >
                                                <span
                                                  class="delhover"
                                                  (click)="
                                                    onVendorAttachementDelete(
                                                      i,
                                                      vattachment.RRVendorAttachmentId
                                                    )
                                                  "
                                                >
                                                  <i class="fa fa-times"></i>
                                                </span>
                                                <img
                                                  src="{{
                                                    vattachment.AttachmentPath
                                                  }}"
                                                  class="img-fluid"
                                                  ngbTooltip="{{
                                                    vattachment.AttachmentOriginalFile
                                                  }}"
                                                  width="200"
                                                  alt="work-thumbnail"
                                                />
                                              </a>
                                            </span>

                                            <span
                                              *ngIf="
                                                vattachment.AttachmentMimeType ==
                                                'application/msword'
                                              "
                                            >
                                              <a
                                                href="{{
                                                  vattachment.AttachmentPath
                                                }}"
                                                target="_blank"
                                                style="cursor: pointer"
                                              >
                                                <img
                                                  src="assets/images/attachment/{{
                                                    attachmentThumb[
                                                      'application/msword'
                                                    ].thumb
                                                  }}"
                                                  class="img-fluid"
                                                  ngbTooltip="{{
                                                    vattachment.AttachmentOriginalFile
                                                  }}"
                                                  width="200"
                                                  alt="work-thumbnail"
                                                />
                                                <span
                                                  class="delhover"
                                                  (click)="
                                                    onVendorAttachementDelete(
                                                      i,
                                                      vattachment.RRVendorAttachmentId
                                                    )
                                                  "
                                                >
                                                  <i class="fa fa-times"></i>
                                                </span>
                                              </a>
                                            </span>

                                            <span
                                              *ngIf="
                                                vattachment.AttachmentMimeType ==
                                                'application/vnd.ms-excel'
                                              "
                                            >
                                              <a
                                                href="{{
                                                  vattachment.AttachmentPath
                                                }}"
                                                target="_blank"
                                                style="cursor: pointer"
                                              >
                                                <img
                                                  src="assets/images/attachment/{{
                                                    attachmentThumb[
                                                      'application/vnd.ms-excel'
                                                    ].thumb
                                                  }}"
                                                  class="img-fluid"
                                                  ngbTooltip="{{
                                                    vattachment.AttachmentOriginalFile
                                                  }}"
                                                  width="200"
                                                  alt="work-thumbnail"
                                                />
                                                <span
                                                  class="delhover"
                                                  (click)="
                                                    onVendorAttachementDelete(
                                                      i,
                                                      vattachment.RRVendorAttachmentId
                                                    )
                                                  "
                                                >
                                                  <i class="fa fa-times"></i>
                                                </span>
                                              </a>
                                            </span>

                                            <span
                                              *ngIf="
                                                vattachment.AttachmentMimeType ==
                                                'text/csv'
                                              "
                                            >
                                              <a
                                                href="{{
                                                  vattachment.AttachmentPath
                                                }}"
                                                target="_blank"
                                                style="cursor: pointer"
                                              >
                                                <img
                                                  src="assets/images/attachment/{{
                                                    attachmentThumb['text/csv']
                                                      .thumb
                                                  }}"
                                                  class="img-fluid"
                                                  ngbTooltip="{{
                                                    vattachment.AttachmentOriginalFile
                                                  }}"
                                                  width="200"
                                                  alt="work-thumbnail"
                                                />
                                                <span
                                                  class="delhover"
                                                  (click)="
                                                    onVendorAttachementDelete(
                                                      i,
                                                      vattachment.RRVendorAttachmentId
                                                    )
                                                  "
                                                >
                                                  <i class="fa fa-times"></i>
                                                </span>
                                              </a>
                                            </span>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>

                                <div *ngIf="RRVendorQuote[VIEW_ACCESS] == 1">
                                  <div>
                                    <!-- *ngIf="vendor.GrandTotal > 0" -->
                                    <div style="margin-left: 1px">
                                      <span style="float: left">
                                        <h5 class="mb-0 pl2">Vendor Quote</h5>
                                      </span>
                                    </div>

                                    <div class="clear"></div>

                                    <div class="row mt-1 ml-1">
                                      <div class="col-lg-4 col-xl-4">
                                        <h6
                                          class="text-uppercase text-muted nomb"
                                        >
                                          Warranty
                                        </h6>
                                        <p class="mb-0 text-secondary">
                                          <span>
                                            {{
                                              vendor.WarrantyPeriod
                                                | monthTransform
                                            }}
                                          </span>
                                        </p>
                                      </div>
                                      <div
                                        class="col-lg-4 col-xl-4"
                                        *ngIf="
                                          RRVendorQuote[VIEW_COST_ACCESS] == 1
                                        "
                                      >
                                        <h6
                                          class="text-uppercase text-muted nomb"
                                        >
                                          Amount
                                        </h6>
                                        <p
                                          class="mb-0 text-primary font-weight-bold"
                                          *ngIf="vendor.GrandTotal > 0"
                                        >
                                          {{ vendor.CurrencySymbol }}
                                          {{ vendor.GrandTotal }}
                                        </p>
                                        <p
                                          class="mb-0 text-primary font-weight-bold"
                                          *ngIf="vendor.GrandTotal == 0"
                                        >
                                          {{ vendor.CurrencySymbol }} 0
                                        </p>
                                      </div>
                                      <div class="col-lg-4 col-xl-4">
                                        <h6
                                          class="text-uppercase text-muted nomb"
                                          *ngIf="vendor.RouteCause"
                                          ngbTooltip="{{ vendor.RouteCause }}"
                                        >
                                          Root Cause?
                                        </h6>
                                      </div>
                                    </div>
                                  </div>

                                  <div class="pl3">
                                    <button
                                      type="button"
                                      *ngIf="
                                        ((ShippingStatus == 2 &&
                                          ShippingIdentityType == 2 &&
                                          ShippingIdentityId ==
                                            vendor.VendorId) ||
                                          ShippingIdentityId !=
                                            vendor.VendorId ||
                                          IsAllowQuoteBeforeShip == 1) &&
                                        Status < 5 &&
                                        RRVendorQuote[MODIFY_ACCESS] == 1 &&
                                        IsActive == 1
                                      "
                                      (click)="
                                        vendorQuote(
                                          vendor.VendorId,
                                          vendor.RRVendorId,
                                          vendor.Status,
                                          vendor.VendorType,
                                          vendor.DirectedVendor,
                                          vendor.IsRMARequired,
                                          vendor.IsFlatRateRepair
                                        )
                                      "
                                      class="btn btn-info btn-sm waves-effect waves-light mt-2 mr-1"
                                    >
                                      <span
                                        *ngIf="
                                          IsActive == 1 &&
                                          Status != RRS_COMPLETED &&
                                          vendor.Status <=
                                            VENDOR_STATUS_APPROVED &&
                                          Status < RRS_IN_PROGRESS
                                        "
                                        >Update</span
                                      >
                                      Vendor Quote
                                    </button>
                                    <button
                                      type="button"
                                      *ngIf="
                                        IsActive == 1 &&
                                        ((ShippingStatus == 2 &&
                                          ShippingIdentityType == 2 &&
                                          ShippingIdentityId ==
                                            vendor.VendorId) ||
                                          IsAllowQuoteBeforeShip == 1) &&
                                        vendor.GrandTotal > 0 &&
                                          vendor.Status ==
                                            VENDOR_STATUS_ASSIGNED &&
                                        RRVendorQuote[APPROVE_ACCESS] == 1
                                      "
                                      (click)="
                                        SubmitVendorQuote(vendor.RRVendorId)
                                      "
                                      class="btn btn-success btn-sm waves-effect waves-light mt-2 mr-1"
                                    >
                                      Submit
                                    </button>
                                    <button
                                      type="button"
                                      *ngIf="
                                        IsActive == 1 &&
                                        vendor.Status ==
                                          VENDOR_STATUS_APPROVED &&
                                          Status < RRS_IN_PROGRESS &&
                                        RRCustomerQuote[CREATE_ACCESS] == 1
                                      "
                                      (click)="
                                        CreateCustomerQuote(
                                          vendor.VendorId,
                                          vendor.RRVendorId,
                                          vendor.GrandTotal,
                                          vendor.CurrencySymbol
                                        )
                                      "
                                      class="btn btn-purple btn-sm waves-effect waves-light mt-2 mr-1"
                                    >
                                      Create Customer Quote
                                    </button>
                                    <button
                                      type="button"
                                      *ngIf="
                                        IsActive == 1 &&
                                        ((ShippingStatus == 2 &&
                                          ShippingIdentityType == 2 &&
                                          ShippingIdentityId ==
                                            vendor.VendorId) ||
                                          IsAllowQuoteBeforeShip == 1 ||
                                          (Status < RRS_COMPLETED &&
                                            Status != RRS_NEED_RESOURCED &&
                                            Status != RRS_QUOTE_REJECTED &&
                                            VendorId == vendor.VendorId)) &&
                                        vendor.Status !=
                                          VENDOR_STATUS_REJECTED &&
                                        Status != RRS_NOT_REPAIRABLE &&
                                        !CustomerInvoiceNo &&
                                        !VendorInvoiceNo &&
                                        RRVendorQuote[APPROVE_ACCESS] == 1
                                      "
                                      (click)="
                                        RejectVendor(
                                          vendor.RRVendorId,
                                          vendor.VendorId
                                        )
                                      "
                                      class="btn btn-warning btn-sm waves-effect waves-light mt-2 mr-1"
                                    >
                                      <!-- *ngIf="(vendor.GrandTotal > 0 && Status < 5 && Status !=3)"       && vendor.VendorId == VendorId                                                                    
                                                                    *ngIf="((ShippingStatus == 2 && ShippingIdentityType == 2 && ShippingIdentityId != vendor.VendorId) || (vendor.Status <= 2  && Status < 4)) && RRVendorQuote[APPROVE_ACCESS] == 1"-->
                                      Reject & Resource
                                    </button>
                                  </div>

                                  <!-- <div class="mt-2 mb-1">
                                                                <button type="button"
                                                                    *ngIf="(vendor.GrandTotal > 0 && vendor.Status < 2) && RRVendorQuote[APPROVE_ACCESS] == 1"
                                                                    (click)="RejectVendorQuote(vendor.RRVendorId)"
                                                                    class="btn btn-warning btn-sm waves-effect waves-light mr-1">
                                                                    Reject
                                                                </button>
                                                            </div> -->
                                </div>

                                <!-- Customer Quote Section -->
                                <div
                                  *ngIf="
                                    QuoteInfo.length > 0 &&
                                    RRCustomerQuote[VIEW_ACCESS] == 1
                                  "
                                >
                                  <!-- <h5>Customer Quote</h5> -->
                                  <div
                                    *ngFor="
                                      let quote of QuoteInfo;
                                      let i = index
                                    "
                                  >
                                    <div
                                      *ngIf="
                                        vendor.VendorId == quote.VendorId &&
                                        vendor.RRVendorId == quote.RRVendorId
                                      "
                                    >
                                      <div
                                        class="clear"
                                        style="border-bottom: 1px dashed"
                                      >
                                        &nbsp;
                                      </div>
                                      <div class="mt-2">
                                        <div class="col-xl-12 nopad">
                                          <div
                                            class="col-xl-8 col-lg-8 float-left nopad"
                                          >
                                            <h5 class="mb-0 pl2">
                                              Customer Quote #{{ i + 1 }}
                                              &nbsp;
                                              <i
                                                class="fas fa-check-circle greentick"
                                                aria-hidden="true"
                                                *ngIf="
                                                  quote.QuoteId ==
                                                  ApprovedQuoteId
                                                "
                                                ngbTooltip="Approved Quote"
                                              ></i>
                                              <!-- &nbsp; -->
                                              <span
                                                *ngIf="
                                                  quote.CustomerShipIdLocked > 0
                                                "
                                                ><a
                                                  (click)="
                                                    unlockShippingAddress(0)
                                                  "
                                                  ><i
                                                    class="fa fa-unlock ml-1"
                                                    aria-hidden="true"
                                                    ngbTooltip="Unlock customer ship address"
                                                  ></i></a
                                              ></span>
                                              &nbsp;
                                              <!-- <i class="fas fa-window-close text-danger"
                                                                                        aria-hidden="true"
                                                                                        *ngIf="quote.QuoteCustomerStatus == 3"
                                                                                        ngbTooltip="Rejected Quote"></i> &nbsp; -->
                                              <span>
                                                <a
                                                  [routerLink]="[
                                                    '/admin/sales-quote/list'
                                                  ]"
                                                  [queryParams]="{
                                                    QuoteId: quote.QuoteId
                                                  }"
                                                  target="_blank"
                                                  routerLink="#"
                                                  style="cursor: pointer"
                                                >
                                                  View
                                                </a>
                                                <!-- <a 
                                                                                        (click)="goToCustomerQuote(quote.QuoteId)"
                                                                                            routerLink="#" 
                                                                                            style="cursor: pointer;">
                                                                                            View
                                                                                        </a> -->
                                              </span>
                                              &nbsp;&nbsp;
                                              <span>
                                                <a
                                                  *ngIf="IsActive == 1"
                                                  (click)="
                                                    deleteQuotes(
                                                      quote.QuoteId,
                                                      i
                                                    )
                                                  "
                                                  routerLink="#"
                                                  class="fa fa-trash text-danger"
                                                  ngbTooltip="Delete"
                                                  placement="top"
                                                ></a>
                                              </span>
                                              <span
                                                class="float-right mt-1"
                                                *ngIf="
                                                  quote.QuoteCustomerStatus == 3
                                                "
                                              >
                                                <img
                                                  src="assets/images/icons/Rejected.png"
                                                  ngbTooltip="Customer Quote Rejected"
                                                />
                                              </span>

                                              <!-- <button
                                                                                        *ngIf="vendor.Status <= VENDOR_STATUS_APPROVED"
                                                                                        ngbTooltip="Send Customer Quote Email"
                                                                                        placement="top"
                                                                                        class="btn btn-outline-success btn-xs sendmail"
                                                                                        type="button"
                                                                                        (click)="sendEmailCustomerQuote(quote.QuoteId)">
                                                                                        Send <i
                                                                                            class="mdi mdi-email-outline"></i>
                                                                                    </button> -->
                                              <!-- <span class="badge badge-success"
                                                                                        *ngIf="quote.QuoteId == ApprovedQuoteId">
                                                                                        Selected
                                                                                    </span> -->
                                            </h5>
                                          </div>
                                          <div
                                            class="col-xl-4 col-lg-4 float-left nopad"
                                          >
                                            <button
                                              ngbTooltip="Preview Customer Quote"
                                              placement="top"
                                              *ngIf="
                                                vendor.Status <=
                                                  VENDOR_STATUS_APPROVED &&
                                                IsActive == 1
                                              "
                                              class="btn btn-outline-success mt-2 btn-xs sendmail"
                                              type="button"
                                              (click)="
                                                previewCustomerQuote(quote)
                                              "
                                            >
                                              Preview &amp; Send<i
                                                class="mdi mdi-window-restore"
                                              ></i>
                                            </button>
                                          </div>
                                        </div>

                                        <!-- <span
                                                                                style="float:right !important; margin-top:7px;"
                                                                                *ngIf="quote.RouteCause"
                                                                                ngbTooltip="{{quote.RouteCause}}">
                                                                                Root Cause?
                                                                            </span> -->

                                        <div class="clear"></div>

                                        <div
                                          class="col-12"
                                          *ngIf="quote.QuoteId"
                                        >
                                          <div class="row mt-1">
                                            <!-- <div class="col-lg-4 col-xl-4">
                                                                                <h6
                                                                                    class="text-uppercase text-muted nomb pl3">
                                                                                    Lead Time
                                                                                </h6>
                                                                                <p class="mb-0 text-secondary pl3">
                                                                                    {{quote.LeadTimes}}
                                                                                </p>
                                                                                </div> -->
                                            <div class="col-lg-4 col-xl-4">
                                              <h6
                                                class="text-uppercase text-muted nomb"
                                              >
                                                Warranty
                                              </h6>
                                              <p class="mb-0 text-secondary">
                                                <span
                                                  *ngIf="!quote.WarrantyPeriod"
                                                >
                                                  No Warranty
                                                </span>
                                                <span
                                                  *ngIf="
                                                    quote.WarrantyPeriod > 0
                                                  "
                                                >
                                                  {{ quote.WarrantyPeriod }}
                                                  Months
                                                </span>
                                              </p>
                                            </div>
                                            <div
                                              class="col-lg-4 col-xl-4"
                                              *ngIf="
                                                RRCustomerQuote[
                                                  VIEW_COST_ACCESS
                                                ] == 1
                                              "
                                            >
                                              <h6
                                                class="text-uppercase text-muted nomb"
                                              >
                                                Amount
                                              </h6>
                                              <p
                                                class="mb-0 text-primary font-weight-bold"
                                                *ngIf="quote.GrandTotal > 0"
                                              >
                                                {{ quote.CurrencySymbol }}
                                                {{ quote.GrandTotal }}
                                              </p>
                                              <p
                                                class="mb-0 text-primary font-weight-bold"
                                                *ngIf="quote.GrandTotal == 0"
                                              >
                                                {{ quote.CurrencySymbol }}
                                                0
                                              </p>
                                            </div>
                                            <div class="col-lg-4 col-xl-4">
                                              <h6
                                                class="text-uppercase text-muted nomb"
                                                *ngIf="quote.RouteCause"
                                                ngbTooltip="{{
                                                  quote.RouteCause
                                                }}"
                                              >
                                                Root Cause?
                                              </h6>
                                            </div>
                                          </div>

                                          <div class="row mt-1">
                                            <div class="col-lg-12 col-xl-12">
                                              <h6
                                                class="text-uppercase text-muted nomb pl3"
                                              >
                                                Lead Time
                                              </h6>
                                              <p
                                                class="mb-0 text-secondary pl3"
                                              >
                                                {{ quote.LeadTimes }}
                                              </p>
                                            </div>
                                          </div>
                                        </div>
                                      </div>

                                      <div class="mt-2 pl3">
                                        <button
                                          type="button"
                                          *ngIf="
                                            IsActive == 1 &&
                                            quote.QuoteId &&
                                            Status < RRS_IN_PROGRESS &&
                                            RRCustomerQuote[MODIFY_ACCESS] == 1
                                          "
                                          (click)="
                                            EditCustomerQuote(
                                              quote.QuoteId,
                                              quote.VendorId,
                                              quote.QuoteCustomerStatus
                                            )
                                          "
                                          class="btn btn-pink btn-sm waves-effect waves-light mr-1 mb-1"
                                        >
                                          <!-- <span *ngIf="Status != 7 && vendor.Status <= 2 && Status < 5">Update</span> -->
                                          <span
                                            *ngIf="
                                              IsActive == 1 &&
                                              Status != RRS_COMPLETED &&
                                              vendor.Status <=
                                                VENDOR_STATUS_APPROVED &&
                                              Status < RRS_IN_PROGRESS
                                            "
                                            >Update</span
                                          >
                                          Customer Quote
                                        </button>
                                      </div>
                                      <div
                                        class="mt-2 pl3"
                                        *ngIf="
                                          vendor.Status !=
                                          VENDOR_STATUS_REJECTED
                                        "
                                      >
                                        <button
                                          type="button"
                                          *ngIf="
                                            IsActive == 1 &&
                                            quote.QuoteId &&
                                              quote.QuoteCustomerStatus == 0 &&
                                              Status < RRS_IN_PROGRESS &&
                                              vendor.Status !=
                                                VENDOR_STATUS_REJECTED &&
                                            RRCustomerQuote[MODIFY_ACCESS] == 1
                                          "
                                          (click)="
                                            SubmitCustomerQuote(
                                              quote.QuoteId,
                                              vendor.RRVendorId
                                            )
                                          "
                                          class="btn btn-success btn-sm waves-effect waves-light mr-1 mb-1"
                                        >
                                          Submit Quote to Customer
                                        </button>

                                        <button
                                          type="button"
                                          *ngIf="
                                            IsActive == 1 &&
                                            quote.QuoteId &&
                                              quote.QuoteCustomerStatus == 1 &&
                                              ApprovedQuoteStatus != 2 &&
                                            RRCustomerQuote[APPROVE_ACCESS] ==
                                              1 &&
                                            Status != RRS_NOT_REPAIRABLE
                                          "
                                          (click)="
                                            ApproveQuote(
                                              quote.QuoteId,
                                              quote.GrandTotal,
                                              quote.CurrencySymbol
                                            )
                                          "
                                          class="btn btn-success btn-sm waves-effect waves-light mr-1 mb-1"
                                        >
                                          Approve
                                        </button>
                                        <button
                                          type="button"
                                          *ngIf="
                                            IsActive == 1 &&
                                            quote.QuoteId &&
                                              quote.QuoteCustomerStatus == 1 &&
                                              ApprovedQuoteStatus != 2 &&
                                            RRCustomerQuote[APPROVE_ACCESS] ==
                                              1 &&
                                            Status != RRS_NOT_REPAIRABLE
                                          "
                                          (click)="
                                            RejectCustomerQuote(
                                              quote.QuoteId,
                                              quote.RRVendorId
                                            )
                                          "
                                          class="btn btn-warning btn-sm waves-effect waves-light mr-1 mb-1"
                                        >
                                          Reject
                                        </button>

                                        <!-- <div class="row mt-2 mb-0"
                                                                            *ngIf="(quote.QuoteId && (quote.QuoteCustomerStatus == 2))">
                                                                            
                                                                            <div class="col-12 mt-1">
                                                                                <h5 style="font-size: 20px ! important;"><span 
                                                                                        class="col-xl-6 nopad float-left text-success">
                                                                                        Customer PO # :</span>
                                                                                    <span  
                                                                                        class="col-xl-6 nopad float-left">
                                                                                        <p style="width: 80%;float: left;">{{CustomerPONo}}</p> -->
                                        <!-- <input
                                                                                            style="width: 80%;float: left;"
                                                                                            type="text"
                                                                                            class="form-control"
                                                                                            name="CustomerPONo"
                                                                                            [(ngModel)]="CustomerPONo"
                                                                                            formControlName="CustomerPONo"> -->
                                        <!-- <i *ngIf="ApprovedQuoteStatus>1"
                                                                                            class="mdi mdi-content-save saveicon"
                                                                                            (click)='onSaveCustomerPO()'></i> -->

                                        <!-- </span>
                                                                                </h5>
                                                                            </div>
                                                                        </div>   -->
                                        <!-- <div>
                                                                            <div class="clear"
                                                                                style="border-bottom: 1px dashed;">
                                                                                &nbsp;</div>
                                                                            <div class="clear">&nbsp;</div>
                                                                            <div class="row mt-2 mb-0">

                                                                                <div class="col-12 mt-1">
                                                                                    <h5
                                                                                        style="font-size: 16px;margin: 0;">
                                                                                        <label
                                                                                            class="text-success">Customer
                                                                                            PO # :</label>
                                                                                        {{CustomerPONo}}
                                                                                        <a style="padding: 2px;"
                                                                                            (click)="onCustomerPOEdit(quote.QuoteId,quote.GrandTotal)"
                                                                                            ngbTooltip="Edit Customer PO"
                                                                                            placement="top"
                                                                                            class="btn btn-icon waves-effect">
                                                                                            <i
                                                                                                class="remixicon-pencil-line editpoicon"></i></a>
                                                                                    </h5>
                                                                                </div>
                                                                            </div>
                                                                        </div> -->
                                        <div
                                          *ngIf="
                                            quote.QuoteCustomerStatus ==
                                              CUSTOMER_QUOTE_ACCEPTED &&
                                            Status == RRS_NOT_REPAIRABLE &&
                                            RRSalesOrder[VIEW_ACCESS] == 1
                                          "
                                        >
                                          <div *ngIf="CustomerSONo">
                                            <div
                                              class="clear"
                                              style="border-bottom: 1px dashed"
                                            >
                                              &nbsp;
                                            </div>
                                            <div class="clear">&nbsp;</div>
                                            <div class="row mt-2 mb-0">
                                              <div class="col-12 mt-1">
                                                <h5
                                                  class="row"
                                                  style="
                                                    font-size: 16px;
                                                    margin: 0;
                                                  "
                                                >
                                                  <label class="text-success"
                                                    >Customer PO # :</label
                                                  >

                                                  <span
                                                    *ngIf="
                                                      viewResult.RRInfo[0]
                                                        .CustomerBlanketPOId ==
                                                      0
                                                    "
                                                    >{{ CustomerPONo || "-" }}
                                                  </span>
                                                  <a
                                                    style="color: #09518e"
                                                    *ngIf="
                                                      viewResult.RRInfo[0]
                                                        .CustomerBlanketPOId !=
                                                      0
                                                    "
                                                    style="
                                                      color: #333;
                                                      padding: 0;
                                                      font-size: 21px;
                                                      margin-top: -2px;
                                                    "
                                                    [routerLink]="[
                                                      '/admin/Blanket-PO-History'
                                                    ]"
                                                    [queryParams]="{
                                                      CustomerBlanketPOId:
                                                        this.viewResult
                                                          .RRInfo[0]
                                                          .CustomerBlanketPOId
                                                    }"
                                                    target="_blank"
                                                    ngbTooltip="Blanket PO"
                                                    placement="top"
                                                    class="btn btn-icon waves-effect"
                                                  >
                                                    <i
                                                      style="float: left"
                                                      class="remixicon-wallet-3-fill mr-1 ml-1 blanketpo-icon"
                                                    ></i
                                                    >{{
                                                      CustomerPONo || "-"
                                                    }}</a
                                                  >
                                                  <i
                                                    style="
                                                      margin-top: -1px !important;
                                                      margin-left: 5px;
                                                      float: left;
                                                      cursor: pointer;
                                                    "
                                                    class="remixicon-pencil-line editpoicon mr-1"
                                                    ngbTooltip="Edit Customer PO"
                                                    *ngIf="
                                                      Status != 8 &&
                                                      IsActive == 1
                                                    "
                                                    placement="top"
                                                    (click)="
                                                      onCustomerPOEdit(
                                                        quote.QuoteId,
                                                        quote.GrandTotal,
                                                        quote.CurrencySymbol
                                                      )
                                                    "
                                                  ></i>
                                                  <!-- {{CustomerPONo}} -->
                                                  <!-- <a style="padding: 2px;"
                                                                                                (click)="onCustomerPOEdit(quote.QuoteId,quote.GrandTotal)"
                                                                                                ngbTooltip="Edit Customer PO"
                                                                                                placement="top" *ngIf="Status !=8"
                                                                                                class="btn btn-icon waves-effect">
                                                                                                <i
                                                                                                    class="remixicon-pencil-line editpoicon"></i></a> -->
                                                </h5>
                                              </div>
                                            </div>
                                            <h5 class="pl2 text-success">
                                              Customer Sales Order #
                                            </h5>
                                            <div class="row">
                                              <div class="col-4">
                                                <p class="pt-10 pl3">
                                                  <!-- <a (click)="goToCustomerSOView()"
                                                                                                routerLink="#"
                                                                                                style="cursor: pointer;">
                                                                                                {{CustomerSONo}}
                                                                                            </a> -->
                                                  <a
                                                    [routerLink]="[
                                                      '/admin/orders/sales-list'
                                                    ]"
                                                    [queryParams]="{
                                                      SOId: this.CustomerSOId
                                                    }"
                                                    target="_blank"
                                                    style="cursor: pointer"
                                                  >
                                                    {{ CustomerSONo }}
                                                  </a>
                                                </p>
                                              </div>

                                              <div class="col-8">
                                                <div class="row">
                                                  <div
                                                    class="col-4 pt-10 nopad-rt"
                                                  >
                                                    Cancelled
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>

                                          <div
                                            *ngIf="
                                              VendorPONo &&
                                              RRPurchaseOrder[VIEW_ACCESS] == 1
                                            "
                                          >
                                            <div class="clear">&nbsp;</div>
                                            <h5 class="pl2 text-success">
                                              Vendor Purchase Order #
                                            </h5>
                                            <div class="row">
                                              <div class="col-4">
                                                <p class="pt-10 pl3">
                                                  <!-- <a (click)="goToVendorPOView()"
                                                                                                routerLink="#"
                                                                                                style="cursor: pointer;">
                                                                                                {{VendorPONo}}
                                                                                            </a> -->
                                                  <a
                                                    [routerLink]="[
                                                      '/admin/orders/purchase-list'
                                                    ]"
                                                    [queryParams]="{
                                                      POId: this.VendorPOId
                                                    }"
                                                    target="_blank"
                                                    routerLink="#"
                                                    style="cursor: pointer"
                                                  >
                                                    {{ VendorPONo }}
                                                  </a>
                                                </p>
                                              </div>

                                              <div class="col-8">
                                                <div class="row">
                                                  <div
                                                    class="col-4 pt-10 nopad-rt"
                                                  >
                                                    Cancelled
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>

                                        <div
                                          class="clear"
                                          *ngIf="
                                            quote.QuoteId &&
                                            quote.QuoteCustomerStatus == 2 &&
                                            !CustomerSONo
                                          "
                                        >
                                          &nbsp;
                                        </div>

                                        <button
                                          type="button"
                                          *ngIf="
                                            IsActive == 1 &&
                                            quote.QuoteId &&
                                              quote.QuoteCustomerStatus == 2 &&
                                              !CustomerSONo &&
                                            RRSalesOrder[CREATE_ACCESS] == 1 &&
                                            Status != RRS_NOT_REPAIRABLE
                                          "
                                          (click)="CreateSO(quote.QuoteId)"
                                          class="btn btn-purple cvpo btn-sm waves-effect waves-light mr-1 mb-1"
                                        >
                                          Create Customer SO
                                        </button>
                                        <button
                                          type="button"
                                          *ngIf="
                                            IsActive == 1 &&
                                            quote.QuoteId &&
                                              quote.QuoteCustomerStatus == 2 &&
                                              CustomerSONo &&
                                              !VendorPONo &&
                                            RRPurchaseOrder[CREATE_ACCESS] ==
                                              1 &&
                                            Status != RRS_NOT_REPAIRABLE
                                          "
                                          (click)="CreatePO(quote.QuoteId)"
                                          class="btn btn-secondary cvpo btn-sm waves-effect waves-light mr-1 mb-1"
                                        >
                                          Create Vendor PO
                                        </button>

                                        <!-- <button type="button"
                                                                            *ngIf="(quote.QuoteId && quote.QuoteId == ApprovedQuoteId && CustomerSONo != '' && CustomerSONo != null && VendorPONo != '' && VendorPONo != null && !CustomerInvoiceNo && RRSalesInvoice[CREATE_ACCESS] == 1) && Status != RRS_NOT_REPAIRABLE"
                                                                            (click)="CreateInvoice(quote.QuoteId)"
                                                                            class="btn btn-purple btn-sm waves-effect waves-light mr-1 mb-1">
                                                                            Create Customer Invoice
                                                                        </button> -->

                                        <button
                                          type="button"
                                          *ngIf="
                                            IsActive == 1 &&
                                            VendorPOId &&
                                              quote.QuoteId ==
                                                ApprovedQuoteId &&
                                              VendorPONo != '' &&
                                              !VendorInvoiceNo &&
                                              RRVendorBill[CREATE_ACCESS] ==
                                                1 &&
                                            Status != RRS_NOT_REPAIRABLE
                                          "
                                          (click)="
                                            CreateVendorInvoice(
                                              quote.QuoteId,
                                              vendor.CurrencySymbol
                                            )
                                          "
                                          class="btn btn-info btn-sm waves-effect waves-light mr-1 mb-1"
                                        >
                                          Create Vendor Bill
                                        </button>

                                        <!-- <button type="button"
                                                                            *ngIf="(quote.QuoteId == ApprovedQuoteId && Status != 7 && CustomerSONo != '' && CustomerInvoiceNo != '' && (VendorPONo != ''&& VendorPONo != null) && RRComplete[CREATE_ACCESS] == 1)"
                                                                            (click)="CompleteRR(quote.QuoteId)"
                                                                            class="btn btn-success btn-sm waves-effect waves-light mr-1 mb-1">
                                                                            Complete
                                                                        </button> -->
                                      </div>

                                      <div
                                        *ngIf="
                                          quote.QuoteId == ApprovedQuoteId &&
                                          Status != RRS_NOT_REPAIRABLE &&
                                          RRSalesOrder[VIEW_ACCESS] == 1
                                        "
                                      >
                                        <div *ngIf="CustomerSONo">
                                          <div
                                            class="clear"
                                            style="border-bottom: 1px dashed"
                                          >
                                            &nbsp;
                                          </div>
                                          <div class="clear">&nbsp;</div>
                                          <div class="row mt-2 mb-0">
                                            <div class="col-12 mt-1">
                                              <h5
                                                class="row"
                                                style="
                                                  font-size: 16px;
                                                  margin: 0;
                                                "
                                              >
                                                <label class="text-success"
                                                  >Customer PO # :</label
                                                >
                                                <span
                                                  *ngIf="
                                                    viewResult.RRInfo[0]
                                                      .CustomerBlanketPOId == 0
                                                  "
                                                  >{{ CustomerPONo || "-" }}
                                                </span>
                                                <a
                                                  *ngIf="
                                                    viewResult.RRInfo[0]
                                                      .CustomerBlanketPOId != 0
                                                  "
                                                  style="
                                                    padding: 0;
                                                    font-size: 21px;
                                                    margin-top: -2px;
                                                  "
                                                  [routerLink]="[
                                                    '/admin/Blanket-PO-History'
                                                  ]"
                                                  [queryParams]="{
                                                    CustomerBlanketPOId:
                                                      this.viewResult.RRInfo[0]
                                                        .CustomerBlanketPOId
                                                  }"
                                                  target="_blank"
                                                  ngbTooltip="Blanket PO"
                                                  placement="top"
                                                >
                                                  <i
                                                    style="float: left"
                                                    class="remixicon-wallet-3-fill mr-1 ml-1 blanketpo-icon"
                                                  ></i
                                                  >{{ CustomerPONo || "-" }}</a
                                                >
                                                <i
                                                  style="
                                                    margin-top: -1px !important;
                                                    margin-left: 5px;
                                                    float: left;
                                                    cursor: pointer;
                                                  "
                                                  class="remixicon-pencil-line editpoicon mr-1"
                                                  ngbTooltip="Edit Customer PO"
                                                  *ngIf="
                                                    IsActive == 1 && Status != 8
                                                  "
                                                  placement="top"
                                                  (click)="
                                                    onCustomerPOEdit(
                                                      quote.QuoteId,
                                                      quote.GrandTotal,
                                                      quote.CurrencySymbol
                                                    )
                                                  "
                                                ></i>
                                                <!-- {{CustomerPONo}}
                                                                                        <a style="padding: 2px;"
                                                                                            (click)="onCustomerPOEdit(quote.QuoteId,quote.GrandTotal)"
                                                                                            ngbTooltip="Edit Customer PO"
                                                                                            placement="top"
                                                                                            class="btn btn-icon waves-effect">
                                                                                            <i
                                                                                                class="remixicon-pencil-line editpoicon"></i></a> -->
                                              </h5>
                                            </div>
                                          </div>
                                          <div class="row mt-2">
                                            <div class="col-xl-8 float-left">
                                              <h5 class="pl2 text-success">
                                                Customer Sales Order #
                                                <!-- <button ngbTooltip="Send SO Email"
                                                                                    placement="top"
                                                                                    *ngIf="vendor.Status <= VENDOR_STATUS_APPROVED"
                                                                                    class="btn btn-outline-success btn-xs sendmail"
                                                                                    type="button">
                                                                                    Print <i
                                                                                        class="mdi mdi-print"></i>
                                                                                </button> -->
                                                <!-- <button ngbTooltip="Send SO Email"
                                                                                    placement="top"
                                                                                    *ngIf="vendor.Status <= VENDOR_STATUS_APPROVED"
                                                                                    class="btn btn-outline-success btn-xs sendmail"
                                                                                    type="button"
                                                                                    (click)="sendEmailSO(CustomerSOId)">
                                                                                    Send <i
                                                                                        class="mdi mdi-email-outline"></i>
                                                                                </button> -->
                                              </h5>
                                            </div>
                                            <div
                                              class="col-xl-4 float-left text-center nopad-lt"
                                            >
                                              <button
                                                ngbTooltip="Preview Sales Order"
                                                placement="top"
                                                *ngIf="
                                                  vendor.Status <=
                                                    VENDOR_STATUS_APPROVED &&
                                                  IsActive == 1
                                                "
                                                class="btn nomt-2 btn-outline-success mt-2 btn-xs sendmail"
                                                type="button"
                                                (click)="
                                                  previewSO(CustomerSOId)
                                                "
                                              >
                                                Preview &amp; Send<i
                                                  class="mdi mdi-window-restore"
                                                ></i>
                                              </button>
                                            </div>
                                          </div>

                                          <div class="row">
                                            <div
                                              class="col-xl-4 col-lg-12 nopad-rt"
                                            >
                                              <p class="pt-10 pl3">
                                                <!-- <a (click)="goToCustomerSOView()"
                                                                                            routerLink="#"
                                                                                            style="cursor: pointer;">
                                                                                            {{CustomerSONo}}
                                                                                        </a> -->
                                                <a
                                                  [routerLink]="[
                                                    '/admin/orders/sales-list'
                                                  ]"
                                                  [queryParams]="{
                                                    SOId: this.CustomerSOId
                                                  }"
                                                  target="_blank"
                                                  style="cursor: pointer"
                                                >
                                                  {{ CustomerSONo }}
                                                </a>
                                                <i
                                                  class="fas fa-check-circle greentick"
                                                  aria-hidden="true"
                                                  *ngIf="IsSOApproved == 1"
                                                  ngbTooltip="Approved Sales Order"
                                                ></i>
                                                &nbsp;
                                              </p>
                                            </div>

                                            <div class="col-xl-8 col-lg-12">
                                              <div class="row">
                                                <div
                                                  class="col-4 pt-10 nopad-rt"
                                                >
                                                  Due Date:
                                                </div>
                                                <div class="col-8 nopad-lt">
                                                  <input
                                                    type="hidden"
                                                    name="CustomerSONo"
                                                    [(ngModel)]="CustomerSONo"
                                                    formControlName="CustomerSONo"
                                                  />
                                                  <input
                                                    type="text"
                                                    class="form-control"
                                                    name="CustomerSODueDate"
                                                    placeholder="mm/dd/yyyy"
                                                    [(ngModel)]="
                                                      CustomerSODueDate
                                                    "
                                                    formControlName="CustomerSODueDate"
                                                  />
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>

                                        <div
                                          *ngIf="
                                            VendorPONo &&
                                            RRPurchaseOrder[VIEW_ACCESS] == 1
                                          "
                                        >
                                          <div class="clear">&nbsp;</div>
                                          <div class="row">
                                            <div class="col-xl-8 float-left">
                                              <h5 class="pl2 text-success">
                                                Vendor Purchase Order #

                                                <!-- <button ngbTooltip="Export to PDF"
                                                                                    placement="top"
                                                                                    *ngIf="vendor.Status <= VENDOR_STATUS_APPROVED"
                                                                                    class="btn btn-outline-success btn-xs sendmail"
                                                                                    type="button"
                                                                                    (click)="printPO(VendorPOId)">
                                                                                    PDF <i class="mdi mdi-file-pdf-outline"></i>
                                                                                </button>
                                                                                <button ngbTooltip="Send PO Email"
                                                                                    placement="top"
                                                                                    *ngIf="vendor.Status <= VENDOR_STATUS_APPROVED"
                                                                                    class="btn btn-outline-success btn-xs sendmail"
                                                                                    type="button"
                                                                                    (click)="sendEmailPO(VendorPOId)">
                                                                                    Send <i
                                                                                        class="mdi mdi-email-outline"></i>
                                                                                </button> -->
                                              </h5>
                                            </div>
                                            <div
                                              class="col-xl-4 float-left text-center nopad-lt"
                                            >
                                              <button
                                                ngbTooltip="Preview PO"
                                                placement="top"
                                                *ngIf="
                                                  IsActive == 1 &&
                                                  vendor.Status <=
                                                    VENDOR_STATUS_APPROVED
                                                "
                                                class="btn btn-outline-success btn-xs sendmail"
                                                type="button"
                                                (click)="previewPO(VendorPOId)"
                                              >
                                                Preview &amp; Send<i
                                                  class="mdi mdi-window-restore"
                                                ></i>
                                              </button>
                                            </div>
                                          </div>
                                          <div class="row">
                                            <div class="col-4">
                                              <p class="pt-10 pl3">
                                                <!-- <a (click)="goToVendorPOView()"
                                                                                            routerLink="#"
                                                                                            style="cursor: pointer;">
                                                                                            {{VendorPONo}}
                                                                                        </a> -->
                                                <a
                                                  [routerLink]="[
                                                    '/admin/orders/purchase-list'
                                                  ]"
                                                  [queryParams]="{
                                                    POId: this.VendorPOId
                                                  }"
                                                  target="_blank"
                                                  routerLink="#"
                                                  style="cursor: pointer"
                                                >
                                                  {{ VendorPONo }}
                                                </a>
                                                <i
                                                  class="fas fa-check-circle greentick"
                                                  aria-hidden="true"
                                                  *ngIf="IsPoApproved == 1"
                                                  ngbTooltip="Approved Purchase Order"
                                                ></i>
                                              </p>
                                            </div>

                                            <div class="col-8">
                                              <div class="row">
                                                <div
                                                  class="col-4 pt-10 nopad-rt"
                                                >
                                                  Due Date:
                                                </div>
                                                <div class="col-8 nopad-lt">
                                                  <input
                                                    type="hidden"
                                                    name="VendorPONo"
                                                    [(ngModel)]="VendorPONo"
                                                    formControlName="VendorPONo"
                                                  />
                                                  <input
                                                    type="text"
                                                    class="form-control"
                                                    name="VendorPODueDate"
                                                    placeholder="mm/dd/yyyy"
                                                    [(ngModel)]="
                                                      VendorPODueDate
                                                    "
                                                    formControlName="VendorPODueDate"
                                                  />
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>

                                        <div *ngIf="CustomerInvoiceNo">
                                          <div class="clear">&nbsp;</div>

                                          <div class="row">
                                            <div class="col-xl-8 float-left">
                                              <h5 class="pl2 text-success">
                                                Customer Invoice #
                                                <!-- <button ngbTooltip="Send Invoice Email"
                                                                                    placement="top"
                                                                                    *ngIf="vendor.Status <= VENDOR_STATUS_APPROVED"
                                                                                    class="btn btn-outline-success btn-xs sendmail"
                                                                                    type="button"
                                                                                    (click)="sendEmailInvoice(CustomerInvoiceId)">
                                                                                    Send <i
                                                                                        class="mdi mdi-email-outline"></i>
                                                                                </button> -->
                                              </h5>
                                            </div>
                                            <div
                                              class="col-xl-4 float-left text-center nopad-lt"
                                            >
                                              <button
                                                ngbTooltip="Preview Customer Invoice"
                                                placement="top"
                                                *ngIf="
                                                  IsActive == 1 &&
                                                  vendor.Status <=
                                                    VENDOR_STATUS_APPROVED
                                                "
                                                class="btn nomt-2 btn-outline-success mt-2 btn-xs sendmail"
                                                type="button"
                                                (click)="
                                                  previewInvoice(
                                                    CustomerInvoiceId
                                                  )
                                                "
                                              >
                                                Preview &amp; Send<i
                                                  class="mdi mdi-window-restore"
                                                ></i>
                                              </button>
                                            </div>
                                          </div>

                                          <div class="row">
                                            <div class="col-4">
                                              <p class="pt-10 pl3">
                                                <a
                                                  [routerLink]="[
                                                    '/admin/invoice/list'
                                                  ]"
                                                  [queryParams]="{
                                                    InvoiceId:
                                                      this.CustomerInvoiceId
                                                  }"
                                                  target="_blank"
                                                  routerLink="#"
                                                  style="cursor: pointer"
                                                >
                                                  {{ CustomerInvoiceNo }}
                                                </a>
                                                <!-- <a (click)="goToCustomerInvoiceView()"
                                                                                            routerLink="#"
                                                                                            style="cursor: pointer;">
                                                                                            {{CustomerInvoiceNo}}
                                                                                        </a> -->
                                                <i
                                                  class="fas fa-check-circle greentick"
                                                  aria-hidden="true"
                                                  *ngIf="IsInvoiceApproved == 1"
                                                  ngbTooltip="Approved Invoice"
                                                ></i>
                                              </p>
                                            </div>

                                            <div class="col-8">
                                              <div class="row">
                                                <div
                                                  class="col-4 pt-10 nopad-rt"
                                                >
                                                  Due Date:
                                                </div>
                                                <div class="col-8 nopad-lt">
                                                  <input
                                                    type="hidden"
                                                    name="CustomerInvoiceNo"
                                                    [(ngModel)]="
                                                      CustomerInvoiceNo
                                                    "
                                                    formControlName="CustomerInvoiceNo"
                                                  />
                                                  <input
                                                    type="text"
                                                    class="form-control"
                                                    name="CustomerInvoiceDueDate"
                                                    placeholder="mm/dd/yyyy"
                                                    [(ngModel)]="
                                                      CustomerInvoiceDueDate
                                                    "
                                                    formControlName="CustomerInvoiceDueDate"
                                                  />
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>

                                        <div *ngIf="VendorInvoiceNo">
                                          <div class="clear">&nbsp;</div>
                                          <h5 class="pl2 text-success">
                                            Vendor Bill #
                                          </h5>
                                          <div class="row">
                                            <div class="col-4">
                                              <p class="pt-10 pl3">
                                                <!-- <a (click)="goToVendorInvoiceView()"
                                                                                            routerLink="#"
                                                                                            style="cursor: pointer;">
                                                                                            {{VendorInvoiceNo}}
                                                                                        </a> -->
                                                <a
                                                  [routerLink]="[
                                                    '/admin/invoice/vendor-invoice-list'
                                                  ]"
                                                  [queryParams]="{
                                                    VendorInvoiceId:
                                                      this.VendorInvoiceId
                                                  }"
                                                  target="_blank"
                                                  routerLink="#"
                                                  style="cursor: pointer"
                                                >
                                                  {{ VendorInvoiceNo }}
                                                </a>
                                                <i
                                                  class="fas fa-check-circle greentick"
                                                  aria-hidden="true"
                                                  *ngIf="
                                                    IsVendorBillApproved == 1
                                                  "
                                                  ngbTooltip="Approved Vendor Bill"
                                                ></i>
                                              </p>
                                            </div>

                                            <div class="col-8">
                                              <div class="row">
                                                <div
                                                  class="col-4 pt-10 nopad-rt"
                                                >
                                                  Due Date:
                                                </div>
                                                <div class="col-8 nopad-lt">
                                                  <input
                                                    type="hidden"
                                                    name="VendorInvoiceNo"
                                                    [(ngModel)]="
                                                      VendorInvoiceNo
                                                    "
                                                    formControlName="VendorInvoiceNo"
                                                  />
                                                  <input
                                                    type="text"
                                                    class="form-control"
                                                    name="VendorInvoiceDueDate"
                                                    placeholder="mm/dd/yyyy"
                                                    [(ngModel)]="
                                                      VendorInvoiceDueDate
                                                    "
                                                    formControlName="VendorInvoiceDueDate"
                                                  />
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <!-- Status 2 [Assign Vendor] - End -->

                <div style="height: 1px" class="clear">&nbsp;</div>

                <h3 *ngIf="VendorQuoteAttachment">
                  Vendor Quote Attachment Details
                </h3>
                <div
                  *ngIf="VendorQuoteAttachment"
                  class="table-responsive bg-vendor"
                  style="
                    border: 1px solid #dee2e6;
                    cursor: pointer;
                    padding-bottom: 10px;
                  "
                  (click)="onVendorAttachment()"
                >
                  <div class="row ml-1 mt-1 vendorAttachment">
                    <div class="col-3 txt-center">
                      <h5>Attachment</h5>
                      <span><i class="fa fa-paperclip"></i></span>
                    </div>
                    <div class="col-4 txt-center">
                      <h5>Recom. Price</h5>
                      <span style="color: red"
                        ><strong
                          >{{ VendorQuoteAttachment.CustomerCurrencySymbol }}
                          {{ VendorQuoteAttachment.RecomPrice }}</strong
                        ></span
                      >
                    </div>
                    <div class="col-5 txt-center">
                      <h5>Recom. By</h5>
                      <span
                        >{{
                          VendorQuoteAttachment.RecomPriceUpdatedByName != null
                            ? VendorQuoteAttachment.RecomPriceUpdatedByName
                            : VendorQuoteAttachment.CreatedByName
                        }}
                        on
                        {{
                          VendorQuoteAttachment.RecomPriceUpdatedDate != null
                            ? VendorQuoteAttachment.RecomPriceUpdatedDate
                            : VendorQuoteAttachment.Created
                        }}</span
                      >
                    </div>
                  </div>
                </div>

                <div style="height: 1px" class="clear">&nbsp;</div>
                <div class="row ml-1 mt-1">
                  <h3>GM Repair Tracker Info</h3>
                  <!-- <div class="col-xl-12 nopad mt-1 mb-2" *ngIf="((!VendorId || VendorId == 0 ) && addButton)"> -->

                  <!-- <div class="table-responsive" *ngIf="RRVendorId"> Enable this after API fix -->
                  <div style="position: relative; width: 100%">
                    <div class="table-responsive">
                      <table
                        style="border: 1px solid #dee2e6"
                        class="table table-bordered mb-2"
                      >
                        <tbody
                          *ngIf="
                            GMRepairTrackerInfoAdd ||
                            GMRepairTrackerInfoEdit ||
                            GMRepairTrackerInfoView ||
                            GMRepairTrackerInfoDelete
                          "
                        >
                          <tr class="bg-vendor">
                            <div class="pl3">
                              <td
                                style="
                                  padding: 10px !important;
                                  border: 0 !important;
                                "
                                class="appspc"
                              >
                                <button
                                  *ngIf="
                                    GMRepairTrackerInfoAdd &&
                                    RRGMTrackerInfo[0] == undefined
                                  "
                                  type="button"
                                  (click)="addRepair()"
                                  class="btn btn-success btn-sm waves-effect waves-light mr-1"
                                >
                                  Add GM Repair Tracker
                                </button>
                                <button
                                  *ngIf="
                                    GMRepairTrackerInfoEdit &&
                                    RRGMTrackerInfo[0] !== undefined &&
                                    RRGMTrackerInfo[0].RRGMTrackerId
                                  "
                                  type="button"
                                  (click)="editRepair()"
                                  class="btn btn-purple btn-sm waves-effect waves-light mr-1"
                                >
                                  Edit GM Repair Tracker
                                </button>
                                <button
                                  *ngIf="
                                    GMRepairTrackerInfoView &&
                                    RRGMTrackerInfo[0] !== undefined &&
                                    RRGMTrackerInfo[0].RRGMTrackerId
                                  "
                                  type="button"
                                  (click)="viewRepair()"
                                  class="btn btn-info btn-sm waves-effect waves-light mr-1"
                                >
                                  View GM Repair Tracker
                                </button>
                                <button
                                  *ngIf="
                                    GMRepairTrackerInfoDelete &&
                                    RRGMTrackerInfo[0] !== undefined &&
                                    RRGMTrackerInfo[0].RRGMTrackerId
                                  "
                                  type="button"
                                  (click)="deleteRepair()"
                                  class="btn btn-danger btn-sm waves-effect waves-light mr-1 mt-2"
                                >
                                  Delete GM Repair Tracker
                                </button>
                              </td>
                            </div>

                            <!-- <td *ngIf="GMRepairTrackerInfoAdd" class="appspc">
                                                            <button type="button" (click)="addRepair()"
                                                                class="btn btn-success btn-sm waves-effect waves-light mt-2 mr-1">
                                                                Add GM Repair Tracker
                                                            </button>

                                                        </td>
                                                        <td *ngIf="GMRepairTrackerInfoEdit" class="appspc">
                                                            <button type="button" (click)="addRepair()"
                                                                class="btn btn-purple btn-sm waves-effect waves-light mt-2 mr-1">
                                                                Edit GM Repair Tracker
                                                            </button>
                                                        </td> -->
                          </tr>

                          <!-- <tr class="bg-vendor">
                                                        <td *ngIf="GMRepairTrackerInfoView" class="appspc">
                                                            <button type="button" (click)="viewRepair()"
                                                                class="btn btn-info btn-sm waves-effect waves-light mt-2 mr-1">
                                                                View GM Repair Tracker
                                                            </button>
                                                        </td>
                                                        <td *ngIf="GMRepairTrackerInfoDelete" class="appspc">
                                                            <button type="button" (click)="deleteRepair()"
                                                                class="btn btn-danger btn-sm waves-effect waves-light mt-2 mr-1">
                                                                Delete GM Repair Tracker
                                                            </button>
                                                        </td>
                                                    </tr> -->
                        </tbody>
                        <tbody
                          *ngIf="
                            !GMRepairTrackerInfoAdd &&
                            !GMRepairTrackerInfoEdit &&
                            !GMRepairTrackerInfoView &&
                            !GMRepairTrackerInfoDelete
                          "
                        >
                          <tr class="bg-vendor" style="text-align: center">
                            <td class="appspc">Access Denied</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <!-- <div style="height:1px;" class="clear">&nbsp;</div>
                                <div class="row ml-1 mt-1">
                                    <h3>Repair Report Checklist
                                        <a *ngIf="!spinnerPDF && incomingView && outgoingView" (click)="callBothPdf()" href="javascript:void(0);" class="ml-1">
                                            <i class="far fa-file-pdf printpdficon" ngbTooltip="Download PDF"></i></a>
                                        <a *ngIf="spinnerPDF" href="javascript:void(0);" class="ml-1">
                                            <i class="fa fa-spinner fa-spin" ngbTooltip="Loading...."></i></a>
                                    </h3>
                                    <div style="position:relative;width:100%;">
                                        <div class="table-responsive">

                                            <table style="border:1px solid #dee2e6;" class="table table-bordered mb-2">
                                                <tbody *ngIf="IncomingChecklistAdd || IncomingChecklistEdit || OutgoingChecklistAdd || OutgoingChecklistEdit">
                                                    <tr class="bg-vendor">
                                                        <div style="display:table;width:100%;" class="pl3">
                                                            <td style="padding:10px !important;border:0 !important;" class="appspc">
                                                                <h5 style="color:#f672a7;margin:0;">Incoming / Evaluation Checklist <span *ngIf="IncomingChecklistEdit"><a
                                                                            (click)="removeIncomingChecklist()">
                                                                            <i class="fa fa-trash text-danger"
                                                                                aria-hidden="true"
                                                                                ngbTooltip="Remove Incoming Checklist"></i>
                                                                        </a></span></h5>
                                                                <button *ngIf="IncomingChecklistAdd" type="button" (click)="IncomingChecklist(0)" class="btn btn-success btn-sm waves-effect waves-light mt-2 mr-1">
                                                                    Assign Checklist
                                                                </button>
                                                                <button *ngIf="IncomingChecklistEdit" type="button" (click)="IncomingChecklist(2)" class="btn btn-purple btn-sm waves-effect waves-light mt-2 mr-1">
                                                                    Edit Checklist
                                                                </button>
                                                                <button *ngIf="IncomingChecklistEdit" type="button" (click)="IncomingChecklist(3)" class="btn btn-info btn-sm waves-effect waves-light mt-2 mr-1">
                                                                    REPAIR ANALYSIS REPORT
                                                                </button>

                                                                <div class="clear" style="border-bottom: 1px dashed;">
                                                                    &nbsp;</div>
                                                                <h5 style="color:#f672a7;margin:15px 0 0;">Outgoing Checklist <span *ngIf="OutgoingChecklistEdit"><a
                                                                            (click)="removeOutgoingChecklist()">
                                                                            <i class="fa fa-trash text-danger"
                                                                                aria-hidden="true"
                                                                                ngbTooltip="Remove Outgoing Checklist"></i>
                                                                        </a></span></h5>
                                                                <button *ngIf="OutgoingChecklistAdd" type="button" (click)="OutgoingChecklist(0)" class="btn btn-success btn-sm waves-effect waves-light mt-2 mr-1">
                                                                    Assign Checklist
                                                                </button>
                                                                <button *ngIf="OutgoingChecklistEdit" type="button" (click)="OutgoingChecklist(2)" class="btn btn-purple btn-sm waves-effect waves-light mt-2 mr-1">
                                                                    Edit Checklist
                                                                </button>
                                                                <button *ngIf="OutgoingChecklistEdit" type="button" (click)="OutgoingChecklist(3)" class="btn btn-info btn-sm waves-effect waves-light mt-2 mr-1">
                                                                    REPAIR FINAL REPORT
                                                                </button>
                                                            </td>
                                                        </div>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div> -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<ng-template #NotesBar>
  <div class="dropdown" ngbDropdown>
    <a
      href="javascript: void(0);"
      class="dropdown-toggle arrow-none"
      ngbDropdownToggle
      data-toggle="dropdown"
      aria-expanded="false"
    >
      <i class="remixicon-honour-line ri-xl text-danger"></i
    ></a>
    <div
      class="dropdown-menu dropdown-menu-right mt-0 searchbox"
      ngbDropdownMenu
    >
      <div
        class="alert alert-info"
        role="alert"
        *ngIf="notesArr[1] && notesArr[1].length > 0"
      >
        <h5 class="text-primary">
          <i class="mdi mdi-access-point mr-1"></i> Internal
        </h5>
        <ul class="toast-list" *ngFor="let note of notesArr[1]; let i = index">
          <li>
            {{ i + 1 }}) {{ note.Notes }}
            <span class="toastdate">
              - {{ note.FirstName }} {{ note.LastName }} ({{
                note.Created | date : "MMM d, y, h:mm a"
              }})</span
            >
          </li>
        </ul>
      </div>

      <div
        class="alert alert-warning"
        role="alert"
        *ngIf="notesArr[2] && notesArr[2].length > 0"
      >
        <h5 class="text-customer">
          <i class="mdi mdi-access-point mr-1"></i> Customer
        </h5>
        <ul class="toast-list" *ngFor="let note of notesArr[2]; let i = index">
          <li>
            {{ i + 1 }}) {{ note.Notes }}
            <span class="toastdate">
              - {{ note.FirstName }} {{ note.LastName }} ({{
                note.Created
                  | date
                    : "MMM
                            d,y, h:mm a"
              }})</span
            >
          </li>
        </ul>
      </div>

      <div
        class="alert alert-danger"
        role="alert"
        *ngIf="notesArr[3] && notesArr[3].length > 0"
      >
        <h5 class="text-vendor">
          <i class="mdi mdi-access-point mr-1"></i> Vendor
        </h5>
        <ul class="toast-list" *ngFor="let note of notesArr[3]; let i = index">
          <li>
            {{ i + 1 }}) {{ note.Notes }}
            <span class="toastdate">
              - {{ note.FirstName }} {{ note.LastName }} ({{
                note.Created
                  | date
                    : "MMM
                            d,y, h:mm a"
              }})</span
            >
          </li>
        </ul>
      </div>
    </div>
  </div>
</ng-template>
