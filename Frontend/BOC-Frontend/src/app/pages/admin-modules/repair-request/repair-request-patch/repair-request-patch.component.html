<div class="container-fluid">
    <app-page-title title="Add Repair Request" [breadcrumbItems]="breadCrumbItems"></app-page-title>

    <div class="row">
        <div class="col-xl-12">
            <form class="form" role="form" (ngSubmit)="onSubmit(AddForm)" [formGroup]="AddForm">
                <div class="row">
                    <div class="col-12">
                        <div class="sticky-container">
                            <div id="so-groups" class="right so-groups-sticky hidden-xs" style="top:198px">
                                <!-- <a (click)="reLoad()" data-target="popup" data-popup="#popup-revert">
                                    <span>Reset</span> <i class="mdi mdi-refresh"></i>
                                </a> -->
                                <button *ngIf="showsave" [disabled]="btnDisabled" [ngClass]="{'class': (btnDisabled)? 'gray': 'btn-group btn-group-sm float-right'}">
                                    <span>Save</span> <i class="mdi mdi-content-save"></i>
                                </button>
                                <button routerLink="/admin/repair-request/list" class="bg-danger" type="button">
                                    <span>Back</span><i class="fas fa-arrow-left"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-box">
                    <div class="row">
                        <div class="col-xl-12 float-left">
                            <span class="alert alert-warning" *ngIf="PriorityNotes != ''">
                                <i class="mdi mdi-alert-outline mr-1"></i> {{PriorityNotes}}
                            </span>
                        </div>

                        <!-- <div class="col-xl-3 sales-right">
                            <div class="btn-group btn-group-sm float-right" role="group">
                                <button ngbTooltip="Save" placement="top" class="btn btn-icon waves-effect"
                                    *ngIf="showsave">
                                    <i class="mdi mdi-content-save"></i>
                                </button>
                                <button ngbTooltip="Back" placement="top" class="btn btn-icon bg-primary waves-effect"
                                    routerLink="/admin/repair-request/list">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                            </div>
                        </div> -->
                    </div>

                    <div class="row">
                        <div class="col-xl-12 float-left">
                            <div class="repair-left">

                                <div class="row">
                                    <h4 class="page-title bluetxt ml-2 mb-3">Basic Details</h4>
                                </div>

                                <div class="row">
                                    <div class="col-xl-5 col-lg-5 float-left">
                                        <div class="form-group">
                                            <label for="Customer">Customer <span class="red">*</span></label>
                                            <ng-autocomplete class="ng-autocomplete" [isLoading]="isLoading" [data]="customerList" [initialValue]="" [placeholder]="placeholder" (selected)='selectEvent($event)' (inputCleared)='clearEvent($event)' [searchKeyword]="keyword" (inputChanged)='onChangeSearch($event)'
                                                (inputFocused)='onFocused($event)' [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundTemplate" debounceTime="1000">

                                            </ng-autocomplete>


                                            <span class="text-danger" style="position:relative; top:31px;" *ngIf="(AddFormControl.CompanyName.touched || submitted) && AddFormControl.CompanyName.errors?.required">
                                                Customer is required
                                            </span>
                                            <ng-template #itemTemplate let-item>
                                                <a [innerHTML]="item.CompanyName"></a>
                                            </ng-template>

                                            <ng-template #notFoundTemplate let-notFound>
                                                <div [innerHTML]="notFound"></div>
                                            </ng-template>
                                            <!-- <ng-select [items]="customerList" [searchable]="true" [virtualScroll]="true" formControlName="CustomerId" name="CustomerId" placeholder="Select" [(ngModel)]="CustomerId" (change)="getCustomerProperties(CustomerId, $event)" bindLabel="title" bindValue="CustomerId">

                                            </ng-select> -->

                                        </div>
                                        <br>
                                        <div class="row" *ngIf="CustomerCountryId!=Location && CustomerId">
                                            <div class="col-xl-12">
                                                <label><span class="text-danger">Country mismatch</span> - <span
                                                        class="badge badge-primary btn-xs">Customer Country</span>
                                                    :{{CustomerCountry}}, <span class="badge badge-pink btn-xs">Ah
                                                        Country</span> : {{LocationName}}</label>
                                            </div>
                                        </div>
                                        <!-- <div class="row">
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label for="Customer">Department</label>
                                                    <ng-select [items]="departmentList" [searchable]="true"
                                                        [(ngModel)]="DepartmentId" formControlName="DepartmentId"
                                                        placeholder="Select" bindLabel="DepartmentName"
                                                        (change)="getDepartmentDetails(DepartmentId)" id="rrDepartment"
                                                        bindValue="DepartmentId">
                                                    </ng-select>
                                                </div>
                                            </div>
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label for="Customer">Machine/Asset</label>
                                                    <ng-select [items]="assetList" [searchable]="true"
                                                        [(ngModel)]="AssetId" formControlName="AssetId"
                                                        placeholder="Select" bindLabel="AssetName"
                                                        (change)="getAssetDetails(AssetId)" id="rrAsset"
                                                        bindValue="AssetId">
                                                    </ng-select>
                                                </div>
                                            </div>
                                        </div> -->

                                        <!-- <div class="row mb-0">
                                            <div class="col-xl-12">
                                                <div class="form-group">
                                                    <label for="Customer">Warranty Recovery :</label>
                                                    <select class="custom-select" name="IsWarrantyRecovery" formControlName="IsWarrantyRecovery">
                                                        <option value="">Select</option>
                                                        <option value="{{item.warranty_type_id}}" *ngFor="let item of WarrantyList">{{item.warranty_type_Name}}</option>
                                                    </select>
                                                  
                                                </div>
                                            </div>
                                            </div>
                                            <div class="row mb-0">
                                                <div class="col-xl-12">
                                                <div class="form-check form-check-inline">
                                                    <div class="form-group">
                                                        <div class="custom-control custom-checkbox">
                                                            <input class="custom-control-input"
                                                                formControlName="IsWarrantyDenied" id="IsWarrantyDenied" value="1"
                                                                name="IsRepairTag" type="checkbox">
                                                            <label class="custom-control-label" for="IsWarrantyDenied">
                                                                Warranty denied?
                                                            </label>
                                                        </div>
                                                    
                                                </div>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <div class="form-group">
                                                    <div class="custom-control custom-checkbox">
                                                        <input class="custom-control-input" id="IsRushRepair" value="1"
                                                            formControlName="IsRushRepair" name="IsRushRepair"
                                                            type="checkbox">
                                                        <label class="custom-control-label" for="IsRushRepair">
                                                            Rush Repair
                                                        </label>
                                                    </div>
                                               
                                            </div>
                                        </div>
                                        <div class="form-check form-check-inline">
                                                <div class="form-group">
                                                    <div class="custom-control custom-checkbox">
                                                        <input class="custom-control-input"
                                                            formControlName="IsRepairTag" id="IsRepairTag" value="1"
                                                            name="IsRepairTag" type="checkbox">
                                                        <label class="custom-control-label" for="IsRepairTag">
                                                            Repair Tag
                                                        </label>
                                                    </div>
                                                
                                            </div>
                                        </div>
                                       
                                        </div>
                                        </div> -->
                                        <!-- <div class="row mt-1 mb-2">
                                            <div class="col-xl-12">
                                                <label class="form-group">Upload Part Images</label>

                                                <div class="row">
                                                    <div class="col-sm-3"
                                                        *ngFor="let vattachment of RRImagesList; let i = index;">
                                                        <span *ngIf="vattachment.mimetype == 'image/jpeg'">
                                                            <a href="{{vattachment.path}}" target="_blank">
                                                                <img src="{{vattachment.path}}" class="img-fluid"
                                                                    ngbTooltip="{{vattachment.originalname}}"
                                                                    width="200" alt="work-thumbnail">
                                                            </a>
                                                        </span>
                                                        <span *ngIf="vattachment.mimetype == 'image/png'">
                                                            <a href="{{vattachment.path}}" target="_blank">
                                                                <img src="{{vattachment.path}}" class="img-fluid"
                                                                    ngbTooltip="{{vattachment.originalname}}"
                                                                    width="200" alt="work-thumbnail">
                                                            </a>
                                                        </span>
                                                        <br>
                                                    </div>
                                                </div>
                                                <input type="file" multiple="multiple" class="form-control"
                                                    accept="image/png,image/jpeg" [(ngModel)]="Attachment"
                                                    formControlName="Attachment" (change)="fileProgressMultiple($event)"
                                                    [writeFile]="true">
                                                <i class="fa fa-spinner fa-spin" *ngIf="spinner"></i>
                                                <span class="text-danger"
                                                    *ngIf="(AddFormControl.Attachment.touched || submitted) && AddFormControl.Attachment.errors?.extension">
                                                    image should be jpeg and png only
                                                </span>

                                            </div>
                                        </div> -->
                                    </div>

                                    <div class="col-xl-3 col-lg-3 float-left">
                                        <!-- <div class="form-group">
                                            <label for="Customer">Description <span class="red">*</span></label>
                                            <textarea class="form-control" placeholder="Description..."
                                                name="RRDescription" formControlName="RRDescription"
                                                [(ngModel)]="RRDescription" rows="5"></textarea>
                                            <span class="text-danger"
                                                *ngIf="(AddFormControl.RRDescription.touched || submitted) && AddFormControl.RRDescription.errors?.required">
                                                Description is required
                                            </span>
                                        </div> -->

                                        <!-- <div class="form-group">
                                            <label for="Customer">Customer Stated Issue
                                                <span class="red">*</span>
                                            </label>
                                            <textarea class="form-control" placeholder="Customer Stated Issue..."
                                                name="StatedIssue" formControlName="StatedIssue" rows="5"></textarea>
                                                <span class="text-danger"
                                                *ngIf="(AddFormControl.StatedIssue.touched || submitted) && AddFormControl.StatedIssue.errors?.required">
                                                Customer Stated Issue is required
                                            </span>
                                        </div> -->
                                    </div>
                                </div>

                                <h4 class="page-title bluetxt mb-10">Repair Parts <span style="cursor:pointer;" (click)="addRepairPart()"><i class="mdi mdi-plus-circle mr-1"></i></span></h4>
                                <!-- <div class="repair_parts_am" *ngFor="let item of partLoop; let i = index;"> -->
                                <div formArrayName="RepairPartsList">
                                    <div *ngFor="let item of RepairPartsList.controls; let i = index;" [formGroupName]="i" class="repair_parts_am approve-quotedetail-even">
                                        <a (click)="removePart(i)" class="float-right text-danger" style="cursor: pointer;font-size: 20px; margin-right:10px;" *ngIf="i != 0">
                                            <i class="remixicon-delete-bin-line delete-btn-ico"></i>
                                        </a>
                                        <div class="table-responsive mt-15">
                                            <table class="table table-bordered table-striped mb-0">
                                                <thead class="thead-light">
                                                    <tr>
                                                        <th> #</th>
                                                        <th>Part #<span class="red">*</span></th>
                                                        <th>Description</th>
                                                        <th>Manufacturer Name/Part #</th>
                                                        <!-- <th>Manufacturer Part #</th> -->
                                                        <th>Serial # <span class="red">*</span></th>
                                                        <!-- <th>Lead Time</th> -->
                                                        <th>Department</th>
                                                        <th>Machine/Asset</th>
                                                        <th>Qty <span class="red">*</span></th>
                                                        <!-- <th>Ref #</th> -->
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td style="width: 1%;">{{i+1}}</td>
                                                        <td style="width: 15%;">
                                                            <!-- [(ngModel)]="PartId" -->
                                                            <ng-select [items]="partList" [searchable]="true" formControlName="PartId" placeholder="Select Part #" id="rrParts" (click)="openPopup(PartId, $event, i)" [keyDownFn]="keydownInDropdown" (change)="getPartDetails(PartId, $event, i)" bindLabel="PartNo"
                                                                bindValue="PartId">
                                                            </ng-select>
                                                            <div style="clear:both; display:block; height:1px;">&nbsp;
                                                            </div>
                                                            <span class="text-danger" *ngIf="(item.get('PartId').touched || submitted) && item.get('PartId').errors?.required">
                                                                Part # is required &nbsp;
                                                            </span>
                                                            <!-- <div *ngIf="PON[i] != ''"><b>New Price (Customer)</b> : {{Symbol}} <label style="font-weight:bold;">{{PON[i]}}</label>
                                                                <input name="PartNo" formControlName="PON">
                                                            </div> -->
                                                            <div><span><b>New Price (Customer)</b> : {{Symbol}} 
                                                                <input name="PartNo" formControlName="PON" readonly class="inputNonBorder">
                                                            </span>
                                                            </div>

                                                            <input type="hidden" name="PartNo" formControlName="PartNo">
                                                            <input type="hidden" name="Price" formControlName="Price">



                                                            <!--
                                                            <div *ngIf="PON != ''"><b>New Price (Customer)</b> :
                                                                {{Symbol}}
                                                                <input type="text"
                                                                    class="form-control input-text-only pon" readonly
                                                                    name="PON" formControlName="PON">
                                                            </div>
                                                            <div *ngIf="LPP != ''"><b>LPP</b>&nbsp;&nbsp; : $ <input
                                                                    type="text" class="form-control input-text-only pon"
                                                                    readonly name="LPP" formControlName="LPP"></div>
                                                             
                                                            <br>-->
                                                            <!-- <div class="row mb-0">
                                                                <div class="col-xl-12">
                                                                    
                                                                </div>
                                                            </div> -->
                                                            <div class="row mb-0">
                                                                <div class="col-xl-12">
                                                                    <!-- <div class="form-check form-check-inline">
                                                                    <div class="form-group">
                                                                        <div class="custom-control custom-checkbox">
                                                                            <input class="custom-control-input"
                                                                                formControlName="IsWarrantyDenied" id="IsWarrantyDenied" value="1"
                                                                                name="IsRepairTag" type="checkbox">
                                                                            <label class="custom-control-label" for="IsWarrantyDenied">
                                                                                Warranty denied?
                                                                            </label>
                                                                        </div>
                                                                    
                                                                </div>
                                                            </div> -->


                                                                </div>
                                                            </div>

                                                            <!-- Warranty recovery End -->
                                                        </td>
                                                        <td style="width: 15%;">
                                                            <textarea style="height:65px;" class="form-control" placeholder="Description..." name="Description" formControlName="Description" rows="3"></textarea>
                                                        </td>
                                                        <td style="width: 10%;">
                                                            <!-- [(ngModel)]="ManufacturerPartNo" -->
                                                            <input type="text" class="form-control" name="ManufacturerPartNo" formControlName="ManufacturerPartNo" placeholder="Manufacturer Part #"> <br>
                                                            <span *ngIf="ManufactuerName">{{ManufactuerName}}</span>
                                                            <!-- [(ngModel)]="Manufactuer" -->
                                                            <input type="hidden" name="Manufactuer" formControlName="Manufactuer">
                                                        </td>
                                                        <!-- <td style="width: 12%;">
                                                        <input type="text" class="form-control" name="ManufacturerPartNo"
                                                            [(ngModel)]="ManufacturerPartNo"
                                                            formControlName="ManufacturerPartNo"
                                                            placeholder="Manufacturer Part #">
                                                    </td> -->
                                                        <td style="width: 12%;">
                                                            <!-- [(ngModel)]="SerialNo" -->
                                                            <input type="text" class="form-control" name="SerialNo" formControlName="SerialNo" (change)="checkWarranty($event, i)" placeholder="Serial #"><br>
                                                            <span class="text-danger" *ngIf="(item.get('SerialNo').touched || submitted) && item.get('SerialNo').errors?.required">
                                                                Serial # is required &nbsp;
                                                            </span><br>
                                                            <span class="text-danger" *ngIf="(item.get('SerialNo').touched || submitted) && item.get('SerialNo').errors?.pattern">
                                                                Serial # must be alphanumeric &nbsp;
                                                            </span>
                                                        </td>
                                                        <td style="width: 10%;">
                                                            <!-- <div class="input-group">
                                                            <input type="number" min="1" class="form-control"
                                                                name="LeadTime" formControlName="LeadTime">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">Day(s)</span>
                                                            </div>
                                                        </div> -->
                                                            <div class="form-group">
                                                                <!-- [(ngModel)]="DepartmentId" -->
                                                                <ng-select [items]="departmentList" [searchable]="true" formControlName="DepartmentId" placeholder="Select" bindLabel="DepartmentName" (change)="getDepartmentDetails(DepartmentId)" id="rrDepartment" bindValue="DepartmentId">
                                                                </ng-select>
                                                            </div>
                                                        </td>
                                                        <td style="width: 10%;">
                                                            <div class="form-group">
                                                                <!-- [(ngModel)]="AssetId" -->
                                                                <ng-select [items]="assetList" [searchable]="true" formControlName="AssetId" placeholder="Select" bindLabel="AssetName" (change)="getAssetDetails(AssetId)" id="rrAsset" bindValue="AssetId">
                                                                </ng-select>
                                                            </div>
                                                        </td>
                                                        <td style="width: 6%;">
                                                            <!-- [(ngModel)]="Quantity" -->
                                                            <input type="text" min="1" class="form-control" name="Quantity" formControlName="Quantity" digitOnly>
                                                            <span class="text-danger" *ngIf="(item.get('Quantity').touched || submitted) && item.get('Quantity').errors?.required">
                                                                Quantity is required &nbsp;
                                                            </span>

                                                        </td>
                                                        <!-- <td style="width: 2%;"><a>Add</a>
                                                        </td> -->
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                        <!-- <div class="row">
                                        <div class="col-xl-7 float-left text-danger"
                                            *ngIf="(item.get('PartId').touched || submitted) && item.get('PartId').errors?.required">
                                            Part # is required &nbsp;
                                        </div>
                                        <div class="col-xl-4 float-right text-danger"
                                            *ngIf="(item.get('SerialNo').touched || submitted) && item.get('SerialNo').errors?.required">
                                            Serial # is required &nbsp;
                                        </div>
                                        <div class="col-xl-4 float-right text-danger"
                                            *ngIf="(item.get('SerialNo').touched || submitted) && item.get('SerialNo').errors?.pattern">
                                            Serial # must be alphanumeric &nbsp;
                                        </div>
                                    </div> -->
                                        <!-- <div class="row">
                                        <div class="col-xl-12 float-left text-danger"
                                            *ngIf="!showsave">
                                            Duplicate entry. RR already exists with same part and serial no. You cannot add RR unless it is Completed / Rejected / Not Repairable
                                        </div>
                                        </div> -->
                                        <!-- <div class="row">
                                            <div class="col-xl-12 mm15">

                                            </div>
                                        </div> -->

                                        <div class="row">
                                            <div class="col-xl-12 mm15">
                                                <div class="col-xl-2 cust-part3"><label class="form-group">Customer Part
                                                        #1</label><input type="text" class="form-control w-95" name="CustomerPartNo1" formControlName="CustomerPartNo1"></div>
                                                <div class="col-xl-2 cust-part3"><label class="form-group">Customer Part
                                                        #2</label><input type="text" class="form-control w-95" name="CustomerPartNo2" formControlName="CustomerPartNo2"></div>
                                                <div class="col-xl-2 cust-part3">
                                                    <label class="form-group">Upload Part Images</label>
                                                    <div class="row">
                                                        <div class="col-sm-3" *ngFor="let vattachment of RRImagesList[i];">
                                                            <span *ngIf="vattachment.mimetype == 'image/jpeg'">
                                                                <a href="{{vattachment.path}}" target="_blank">
                                                                    <img src="{{vattachment.path}}" class="img-fluid"
                                                                        ngbTooltip="{{vattachment.originalname}}"
                                                                        width="200" alt="work-thumbnail">
                                                                </a>
                                                            </span>
                                                            <span *ngIf="vattachment.mimetype == 'image/png'">
                                                                <a href="{{vattachment.path}}" target="_blank">
                                                                    <img src="{{vattachment.path}}" class="img-fluid"
                                                                        ngbTooltip="{{vattachment.originalname}}"
                                                                        width="200" alt="work-thumbnail">
                                                                </a>
                                                            </span>
                                                            <br>
                                                        </div>
                                                    </div>
                                                    <!-- [(ngModel)]="Attachment" -->
                                                    <input type="file" multiple="multiple" class="form-control" accept="image/png,image/jpeg" formControlName="Attachment" (change)="fileProgressMultiple($event, i)" [writeFile]="true">
                                                    <i class="fa fa-spinner fa-spin" *ngIf="spinner"></i>
                                                    <!-- <span class="text-danger"
                                                    *ngIf="(AddFormControl.RepairPartsList[i].Attachment.touched || submitted) && AddFormControl.RepairPartsList[i].Attachment.errors?.extension">
                                                    image should be jpeg and png only
                                                </span> -->
                                                </div>

                                                <div class="col-xl-2 cust-part3">
                                                    <label style="margin:0;display:flex;height:26px;" class="form-group" for="Customer">Customer Stated Issue<span
                                                            class="red">*</span></label>
                                                    <textarea style="margin-top:0px;" class="form-control" name="StatedIssue" formControlName="StatedIssue" rows="2"></textarea>
                                                    <span class="text-danger" *ngIf="(item.get('StatedIssue').touched || submitted) && item.get('StatedIssue').errors?.required">
                                                        Customer Stated Issue is required &nbsp;
                                                    </span>
                                                </div>
                                                <div class="col-xl-2 cust-part3">
                                                    <label style="margin:0; display:flex;" class="form-group" for="Customer">Warranty
                                                        Recovery
                                                        :</label>
                                                    <select style="margin-top:7px;" class="custom-select" name="IsWarrantyRecovery" formControlName="IsWarrantyRecovery">
                                                        <option value="">Select</option>
                                                        <option value="{{item.warranty_type_id}}"
                                                            *ngFor="let item of WarrantyList">
                                                            {{item.warranty_type_Name}}</option>
                                                    </select>
                                                </div>
                                                <div class="col-xl-2 cust-part3">
                                                    <div class="form-check form-check" style="margin-top:18px;">
                                                        <div class="form-group">
                                                            <div class="custom-control custom-checkbox">
                                                                <input class="custom-control-input" value="1" formControlName="IsRushRepair" id="IsRushRepair-{{i+1}}" name="IsRushRepair" type="checkbox">
                                                                <label style="color:#6c7580;" class="custom-control-label" for="IsRushRepair-{{i+1}}">
                                                                    Rush Repair
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-check form-check">
                                                        <div class="form-group">
                                                            <div class="custom-control custom-checkbox">
                                                                <input class="custom-control-input" formControlName="IsRepairTag" value="1" id="IsRepairTag-{{i+1}}" name="IsRepairTag" type="checkbox">
                                                                <label style="color:#6c7580;" class="custom-control-label" for="IsRepairTag-{{i+1}}">
                                                                    Repair Tag
                                                                </label>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Start Check CRef -->
                                        <div *ngIf="customerReferenceList.length>0" class="row">
                                            <div class="col-xl-12 mm15">
                                                <div class="col-xl-12 nopad mtt float-left">
                                                    <!--   <h4>Customer Reference : </h4> -->

                                                    <!-- <div class="col-xl-4 mtt float-left cr-txt">
                                                    <input id="ReferenceLabelName"
                                                        formControlName="ReferenceLabelName"
                                                        name="ReferenceLabelName" type="hidden">
                                                    <input id="CReferenceId"
                                                        formControlName="CReferenceId"
                                                        name="CReferenceId" type="hidden">

                                                    {{item.controls.ReferenceLabelName.value}} <span
                                                        class="float-right">:</span>
                                                </div> -->

                                                    <div style="margin-top:3px;" *ngFor="let cref of customerReferenceList; let j = index;" class="col-xl-2 cust-part3 float-left">
                                                        <label class="form-group">{{cref.CReferenceName}} : <span class="red">*</span></label><br>
                                                        <input id="ReferenceLabelName" formControlName="ReferenceLabelName{{j}}" name="ReferenceLabelName" type="hidden">
                                                        <input id="CReferenceId" formControlName="CReferenceId{{j}}" name="CReferenceId" type="hidden">
                                                        <input type="text" class="form-control" formControlName="ReferenceValue{{j}}" name="ReferenceValue" required>
                                                        <span class="text-danger" *ngIf="(item.get('ReferenceValue'+j).touched || submitted) && item.get('ReferenceValue'+j).errors?.required">
                                                            {{cref.CReferenceName}} is required &nbsp;
                                                        </span>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <!-- End Check CRef -->
                                    </div>
                                </div>
                                <!-- </div> -->
                                <div class="clear">&nbsp;</div>

                                <h4 class="page-title bluetxt mb-10 mt-2">Contact Information</h4>
                                <div class="table-responsive mt-15">
                                    <table class="table table-bordered table-striped mb-0">
                                        <thead class="thead-light">
                                            <tr>
                                                <th>Name</th>
                                                <th>Phone</th>
                                                <th>Email</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <!-- [(ngModel)]="UserId"  -->
                                                    <ng-select [items]="adminList" [searchable]="true" formControlName="UserId" [(ngModel)]="UserId" placeholder="Select" (change)="getAdminView($event, UserId)" bindLabel="title" bindValue="UserId">
                                                    </ng-select>
                                                </td>
                                                <td>
                                                    <!-- [(ngModel)]="ContactPhone" -->
                                                    <input type="text" class="form-control" name="ContactPhone" [(ngModel)]="ContactPhone" formControlName="ContactPhone">
                                                </td>
                                                <td>
                                                    <!-- [(ngModel)]="ContactEmail" -->
                                                    <input type="text" class="form-control" name="ContactEmail" [(ngModel)]="ContactEmail" formControlName="ContactEmail">
                                                    <span class="text-danger" *ngIf="(AddFormControl.ContactEmail.touched || submitted) && AddFormControl.ContactEmail.errors?.email">
                                                        Enter a valid email id
                                                    </span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                        <!-- <div class="col-xl-3 float-left mt-2">
                            <div class="repair-right">
                                <div class="col-xl-12">
                                    <div class="row">
                                        <div class="col-12">
                                            <h5 class="header-title m-t-0 mb-2">Upload Images</h5>

                                            <div class="row">
                                                <div class="col-sm-3"
                                                    *ngFor="let vattachment of RRImagesList; let i = index;">


                                                    <span *ngIf="vattachment.mimetype == 'image/jpeg'">
                                                        <a href="{{vattachment.path}}" target="_blank">
                                                            <img src="{{vattachment.path}}" class="img-fluid"
                                                                ngbTooltip="{{vattachment.originalname}}" width="200"
                                                                alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <span *ngIf="vattachment.mimetype == 'image/png'">
                                                        <a href="{{vattachment.path}}" target="_blank">
                                                            <img src="{{vattachment.path}}" class="img-fluid"
                                                                ngbTooltip="{{vattachment.originalname}}" width="200"
                                                                alt="work-thumbnail">
                                                        </a>
                                                    </span>
                                                    <br>
                                                </div>
                                            </div>
                                            <input type="file" multiple="multiple" class="form-control"
                                                accept="image/png,image/jpeg" [(ngModel)]="Attachment"
                                                formControlName="Attachment" (change)="fileProgressMultiple($event)"
                                                [writeFile]="true">
                                            <i class="fa fa-spinner fa-spin" *ngIf="spinner"></i>
                                            <span class="text-danger"
                                                *ngIf="(AddFormControl.Attachment.touched || submitted) && AddFormControl.Attachment.errors?.extension">
                                                image should be jpeg and png only
                                            </span>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                    </div>
                </div>
            </form>
        </div>
    </div>
</div>