<div class="modal-header modal-xl">
    <h4 class="modal-title">Update Vendor Quote</h4>
    <button type="button" class="close" (click)="modalRef.hide()" aria-hidden="true">Ã—</button>
</div>
<div class="modal-body modal-xl">
    <form class="form" role="form" (ngSubmit)="onSubmit()" [formGroup]="AddForm">
        <div class="modal-body">
            <div class="row" *ngIf="QuoteItemInfo">
                <div class="col-xl-12">
                    <h4 class="page-title bluetxt mb-10">Customer Quote Details:</h4>
                </div>
            </div>
            <div class="row" *ngIf="QuoteItemInfo">
                <div class="col-xl-3">
                    <div class="form-group">
                        <label for="field-2" class="control-label">Part # / Type

                        </label>
                        {{QuoteItemInfo.PartNo}} /   {{QuoteItemInfo.PartTypeName}}
                    </div>
                </div>
                <div class="col-xl-3">
                    <div class="form-group">
                        <label for="field-2" class="control-label">Quantity

                        </label>
                        {{QuoteItemInfo.Quantity}}

                    </div>
                </div>
                <div class="col-xl-3">
                    <div class="form-group">
                        <label for="field-2" class="control-label">Customer Unit Price


                        </label>
                        {{viewResult.QuoteInfo[0].CurrencySymbol}} {{QuoteItemInfo.Rate}}
                    </div>
                </div>
                <div class="col-xl-3">
                    <div class="form-group">
                        <label for="field-2" class="control-label">Customer Total Price


                        </label>
                        {{viewResult.QuoteInfo[0].CurrencySymbol}}  {{QuoteItemInfo.Price}}
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-xl-12">
                    <h4 class="page-title bluetxt mb-10">Vendor Quote Details:</h4>
                </div>

                <table class="table table-bordered table-striped mb-0">
                    <thead class="thead-light">
                        <tr>
                            <th width="30%">Vendor / Attachment / Web link</th>
                            <th width="15%">Lead Time</th>
                            <th width="10%">Unit Price</th>
                            <th width="5%">Quantity</th>
                            <th width="10%">{{VAT_field_Name}}</th>
                            <th width="10%">{{Shipping_field_Name}}</th>
                            <th width="10%" *ngIf="IsDisplayBaseCurrencyValue==1">Price({{BaseCurrencySymbol}})<span class="red">*</span></th>
                            <th width="15%">Total Cost</th>
                            <th>Action</th>

                        </tr>

                    </thead>
                    <tbody formArrayName="QuoteItem">
                        <tr *ngFor="let item of quoteItem().controls; let i=index" [formGroupName]="i">
                            <td>

                                <div class="row">
                                    <div class="col-xl-12">
                                        <ng-select [items]="Vendors$ | async" bindLabel="VendorName" (change)='selectVendor($event,i)'
                                            [typeahead]="VendorsInput$" [placeholder]="'Enter Vendor Name'"
                                            formControlName="Vendor">
                                        </ng-select>
                                    </div>

                                   
                                   
                                   
                                </div>
                                <div class="row mt-2">
                                    <div class="col-xl-6">
                                        <input type="file" class="form-control pad5" name="VendorAttachment"   [writeFile]="true"
                                            formControlName="VendorAttachment"  (change)="fileProgressMultiple($event,i)">
                                            <a *ngIf="item['controls'].VendorAttachment.value" [href]="item['controls'].VendorAttachment.value" target="_blank">Preview</a>

                                    </div>
                                    <div class="col-xl-6">
                                        <input type="text" class="form-control"
                                             name="WebLink" formControlName="WebLink" placeholder="Web link">
                                        </div>
                                </div>


                            </td>
                            <td>
                                <div class="input-group">
                                    <input type="number" min="1" class="form-control" name="LeadTime"
                                        formControlName="LeadTime" digitOnly>
                                    <div class="input-group-append">
                                        <span class="input-group-text">Day(s)</span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{{item.value.ItemLocalCurrencySymbol}}</span>
                                    </div>
                                    <input type="text" class="form-control pad5" name="Rate" formControlName="Rate" (keyup)="calculatePrice(i)">

                                </div>
                            </td>
                            <td>
                                <input type="text" min="1" class="form-control" name="Quantity" (keyup)="validateqty($event,i)"
                                    formControlName="Quantity" digitOnly>
                                    <!-- <span class="text-danger"
                                    *ngIf="(item['controls'].Quantity?.touched || submitted) && item['controls'].Quantity?.errors?.lessThanEqualTo">
                                     Vendor Quantity should not exceeds the Customer Quantity
                                </span> -->

                            </td>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">%</span>
                                    </div>
                                <input type="text" min="1" class="form-control" 
                                      name="ItemTaxPercent" formControlName="ItemTaxPercent"
                                      inputmode="numeric" pattern="^\d+(\.\d{1,2})?$" placeholder="0.00" digitOnly
                                      decimal="true" 
                                     (keyup)="calculatePrice(i)">
                                </div>
                                &nbsp;
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{{item.value.ItemLocalCurrencySymbol}}</span>
                                    </div>
                                    <input type="text" class="form-control"  readonly
                                    name="Tax" formControlName="Tax">
                                   
                                </div>
                            </td>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{{item.value.ItemLocalCurrencySymbol}}</span>
                                    </div>
                                    <input type="text" class="form-control"   (keyup)="calculatePrice(i)"
                                    name="ShippingCharge" formControlName="ShippingCharge"
                                    inputmode="numeric" pattern="^\d+(\.\d{1,2})?$" placeholder="0.00" digitOnly
                                                                decimal="true">
                                   
                                </div>
                            </td>
                            <td *ngIf="IsDisplayBaseCurrencyValue==1">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{{BaseCurrencySymbol}}</span>
                                    </div>
                                    <input type="text" class="form-control pad5" readonly name="BasePrice" formControlName="BasePrice">
                                </div>
                            </td>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{{item.value.ItemLocalCurrencySymbol}}</span>
                                    </div>
                                    <input type="text" class="form-control pad5" readonly name="Price"
                                        formControlName="Price">

                                </div>
                            </td>
                            <td>
                                <a (click)="removeVendor(i)" class=" text-danger" style="cursor: pointer;"
                                    *ngIf="i != 0">
                                    <i class="remixicon-delete-bin-line delete-btn-ico"></i>
                                </a>
                            </td>
                        </tr>

                    </tbody>

                </table>


                <div class="row ml-1">
                    <button (click)="addvendor()" type="button" class="btn btn-add waves-effect mt-2 float-right" *ngIf="Status != Rejected">
                        <i class="remixicon-add-fill mt-3"></i> Add Vendor
                    </button>
                </div>
            </div>

        </div>
        <div class="modal-footer">
            <button class="btn btn-success waves-effect waves-light" [disabled]="btnDisabled" *ngIf="Status != Rejected"
                [ngClass]="{'class': (btnDisabled)? 'btn btn-success waves-effect waves-light': 'btn btn-light waves-effect waves-light'}">Save</button>
            <button type="button" class="btn btn-light waves-effect" (click)="modalRef.hide()">Close</button>
        </div>

    </form>
</div>